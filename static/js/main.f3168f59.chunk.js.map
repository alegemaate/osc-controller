{"version":3,"sources":["libs/fulltilt.js","ConnectForm.tsx","images/landscape.jpg","images/bloom.png","images/gmsynth.png","modules/index.tsx","images/fmsynth.png","Dashboard.tsx","AppDrawer.tsx","AppTopBar.tsx","helpers/helpers.ts","modules/OscBloom.tsx","components/AccelPad.tsx","modules/OscAccelerometer.tsx","modules/FmAccelerometer.tsx","components/FmSynth/instruments.ts","components/FmSynth/index.tsx","components/Oscilloscope.tsx","modules/FmSynthController.tsx","modules/Harmonicity.tsx","components/DotDraw.tsx","modules/WaveformDraw.tsx","helpers/chords.ts","helpers/markovChain.ts","components/LivingSynth/index.tsx","modules/GuidedMusic.tsx","App.tsx","index.tsx"],"names":["window","undefined","FULLTILT","M_PI","Math","PI","M_PI_2","M_2_PI","degToRad","radToDeg","sensors","orientation","active","callbacks","data","motion","hasScreenOrientationAPI","screen","angle","screenOrientationAngle","SCREEN_ROTATION_90","SCREEN_ROTATION_180","SCREEN_ROTATION_270","SCREEN_ROTATION_MINUS_90","options","Promise","resolve","reject","control","DeviceOrientation","start","SensorCheck","then","catch","stop","DeviceMotion","x","y","z","w","outQuat","this","set","copy","quaternion","setFromEuler","_x","_y","_z","_x_2","_y_2","_z_2","cX","cY","cZ","sX","sY","sZ","euler","alpha","beta","gamma","cos","sin","normalize","setFromRotationMatrix","R","matrix","elements","sqrt","sign","multiply","Quaternion","prototype","multiplyQuaternions","rotateX","rotateByAxisAngle","rotateY","rotateZ","constructor","multipliedQuat","a","b","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","q","len","halfAngle","sA","outputQuaternion","transformQuaternion","targetQuaternion","axis","RotationMatrix","m11","m12","m13","m21","m22","m23","m31","m32","m33","outMatrix","Float32Array","identity","setFromQuaternion","sqw","sqx","sqy","sqz","m","multiplyMatrices","aE","bE","determinant","cA","outputMatrix","transformMatrix","validAxis","targetRotationMatrix","Euler","inEuler","_alpha","_beta","_gamma","atan2","asin","unitLength","wxyz","aX","aY","gX","gY","_matrix","targetEuler","tries","successCount","alphaOffsetScreen","alphaOffsetDevice","type","setGameAlphaOffset","evt","removeEventListener","bind","addEventListener","setCompassAlphaOffset","absolute","webkitCompassAccuracy","webkitCompassHeading","callback","Object","toString","call","push","handleScreenOrientationChange","handleDeviceOrientationChange","listen","getFixedFrameQuaternion","orientationData","adjustedAlpha","getScreenAdjustedQuaternion","getFixedFrameMatrix","getScreenAdjustedMatrix","getFixedFrameEuler","getScreenAdjustedEuler","isAbsolute","getLastRawEventData","ALPHA","BETA","GAMMA","handleDeviceMotionChange","getScreenAdjustedAcceleration","accData","acceleration","screenAccData","getScreenAdjustedAccelerationIncludingGravity","accGData","accelerationIncludingGravity","screenAccGData","getScreenAdjustedRotationRate","rotRateData","rotationRate","screenRotRateData","isNaN","sensorRootObj","runCheck","setTimeout","event","i","ConnectForm","onSubmit","loading","open","error","onClose","React","useState","url","setUrl","useEffect","lsUrl","localStorage","getItem","Dialog","DialogTitle","DialogContent","DialogContentText","TextField","autoFocus","margin","value","onChange","preventDefault","target","placeholder","label","id","fullWidth","disabled","helperText","DialogActions","Button","color","onClick","console","log","MODULES","name","link","icon","Home","dashboard","description","Equalizer","image","ImgBloom","ImgLandscape","ImgTwoOpFmSynth","useStyles","makeStyles","root","maxWidth","media","height","Dashboard","classes","Grid","container","spacing","filter","mod","map","xs","item","to","style","textDecoration","Card","className","CardActionArea","CardMedia","title","CardContent","Typography","gutterBottom","variant","component","theme","list","width","AppDrawer","toggle","Drawer","anchor","role","onKeyDown","List","ListItem","button","ListItemIcon","ListItemText","primary","menuButton","marginRight","flexGrow","AppTopBar","toggleDrawer","onDisconnect","onConnect","anchorEl","setAnchorEl","Boolean","handleOpen","currentTarget","handleClose","AppBar","position","Toolbar","IconButton","edge","aria-label","SyncRounded","Menu","anchorOrigin","vertical","horizontal","transformOrigin","MenuItem","SyncDisabledRounded","rangeMap","x1","y1","x2","y2","colorMap","ClickDot","click","timer","boardWidth","maxTime","timerDiff","time","backgroundColor","top","left","borderRadius","transition","OscBloom","onTransmit","clickHistory","setClickHistory","setTimer","size","setSize","setMaxTime","boardRef","useRef","playNote","useCallback","freq","vol","address","args","index","interval","setInterval","newTime","forEach","clearInterval","current","clientWidth","clientHeight","ref","overflow","onMouseMove","nativeEvent","offsetX","offsetY","newClick","length","CardActions","Timer","round","Timelapse","Slider","_event","max","min","step","DOT_SIZE","AccelPad","hasMotionDevice","setHasMotionDevice","setError","dotRef","initMotion","gn","GyroNorm","init","frequency","do","DeviceMotionEvent","requestPermission","response","Box","Error","onTouchStart","onTouchEnd","OscAccelerometer","msg","FmAccelerometer","mod1","setMod1","mod2","setMod2","gain1","setGain1","gain2","setGain2","freq1Val","setFreq1Val","freq2Val","setFreq2Val","gain1Val","setGain1Val","gain2Val","setGain2Val","context","setContext","AudioContext","close","resume","out","destination","createOscillator","carrier","mod1Gain","createGain","gain","mod2Gain","mainGain","connect","Waves","VolumeUp","FM_INSTRUMENTS","op1","dest","ratio","feedback","level","adsr","attackLevel","attackTime","decayLevel","decayTime","sustainLevel","sustainTime","releaseLevel","releaseTime","op2","FmSynth","op1Gain","op2Gain","op1Feedback","op2Feedback","analyser","preset","createAnalyser","fftSize","changeInstrument","instrument","custom","wave","createPeriodicWave","real","imag","setPeriodicWave","disconnect","now","currentTime","cancelScheduledValues","setValueAtTime","linearRampToValueAtTime","state","Oscilloscope","oscRef","parentRef","setWidth","requestId","render","ctx","getContext","fillStyle","fillRect","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","bufferLength","frequencyBinCount","dataArray","Uint8Array","getByteTimeDomainData","sliceWidth","requestAnimationFrame","cancelAnimationFrame","FmSynthController","fmSynth","setFmSynth","setPreset","copied","setCopied","presetText","setPresetText","presetError","setPresetError","bounding","getBoundingClientRect","clientX","play","stopNote","copyPreset","navigator","clipboard","writeText","btoa","JSON","stringify","op","onMouseDown","onMouseUp","getAnalyser","Select","marginBottom","defaultValue","parsed","parse","atob","opSchema","yup","oneOf","required","res","validateSync","e","OpPreset","InputLabel","valueLabelDisplay","DEFAULT_PRESET","Harmonicity","DotDraw","samples","points","drawing","setDrawing","canvasWidth","setCanvasWidth","radius","val","ellipse","fill","updatePoints","floor","clientY","pts","copyWithin","handleMouseUp","onMouseLeave","WaveformDraw","setPoints","setFreq","newPreset","slice","pow","getFourierPreset","getChordOffset","key","getChordType","MarkovChain","values","chain","seq","next","currentChain","random","STEP_TIME","mtof","midi","LivingSynth","convolver","operators","arpOp","createConvolver","getImpulseBuffer","osc","oscGain","lfo","panner","createStereoPanner","pan","evolve","chord","notes","transpose","split","nums","offset","n","getChord","nextNote","impulseUrl","fetch","arrayBuffer","decodeAudioData","buffer","GuidedMusic","synth","App","client","setClient","setLoading","drawerOpen","setDrawerOpen","connectOpen","setConnectOpen","handleDisconnect","send","userSelect","exec","ws","WebSocket","onopen","connection","setItem","onerror","onclose","onmessage","message","Container","mt","basepath","path","webkitAudioContext","ReactDOM","StrictMode","CssBaseline","document","getElementById"],"mappings":"kHAgBA,SAAWA,GAET,QAAwBC,IAApBD,EAAOE,UAA8C,OAApBF,EAAOE,SAA5C,CAIA,IAAIC,EAAOC,KAAKC,GACZC,EAASH,EAAO,EAChBI,EAAS,EAAIJ,EAGbK,EAAWL,EAAO,IAClBM,EAAW,IAAMN,EAGjBO,EAAU,CACZC,YAAa,CACXC,QAAQ,EACRC,UAAW,GACXC,UAAMb,GAERc,OAAQ,CACNH,QAAQ,EACRC,UAAW,GACXC,UAAMb,IAMNe,KACFhB,EAAOiB,SACPjB,EAAOiB,OAAON,kBACsBV,IAApCD,EAAOiB,OAAON,YAAYO,OACU,OAApClB,EAAOiB,OAAON,YAAYO,OAGxBC,GACDH,EACGhB,EAAOiB,OAAON,YAAYO,MAC1BlB,EAAOW,aAAe,GAAKH,EAE7BY,EAAqBd,EACvBe,EAAsBlB,EACtBmB,EAAsBf,EAAS,EAC/BgB,GAA4BjB,EA8D1BJ,EAAW,CAEfA,QAAmB,QAInBA,qBAAgC,SAAUsB,GAkBxC,OAjBc,IAAIC,SAAQ,SAAUC,EAASC,GAC3C,IAAIC,EAAU,IAAI1B,EAAS2B,kBAAkBL,GAE7CI,EAAQE,QAEqB,IAAIC,EAAYrB,EAAQC,aAGlDqB,MAAK,WACJN,EAAQE,MAETK,OAAM,WACLL,EAAQM,OACRP,EAAO,6CAOfzB,gBAA2B,SAAUsB,GAkBnC,OAjBc,IAAIC,SAAQ,SAAUC,EAASC,GAC3C,IAAIC,EAAU,IAAI1B,EAASiC,aAAaX,GAExCI,EAAQE,QAEgB,IAAIC,EAAYrB,EAAQK,QAG7CiB,MAAK,WACJN,EAAQE,MAETK,OAAM,WACLL,EAAQM,OACRP,EAAO,wCASfzB,WAAsB,SAAUkC,EAAGC,EAAGC,EAAGC,GACvC,IAAIC,EAEJC,KAAKC,IAAM,SAAUN,EAAGC,EAAGC,EAAGC,GAC5BE,KAAKL,EAAIA,GAAK,EACdK,KAAKJ,EAAIA,GAAK,EACdI,KAAKH,EAAIA,GAAK,EACdG,KAAKF,EAAIA,GAAK,GAGhBE,KAAKE,KAAO,SAAUC,GACpBH,KAAKL,EAAIQ,EAAWR,EACpBK,KAAKJ,EAAIO,EAAWP,EACpBI,KAAKH,EAAIM,EAAWN,EACpBG,KAAKF,EAAIK,EAAWL,GAGtBE,KAAKI,aAAgB,WACnB,IAAIC,EAAIC,EAAIC,EACRC,EAAMC,EAAMC,EACZC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAExB,OAAO,SAAUC,GA2Bf,OAxBAV,IAFAU,EAAQA,GAAS,IAELC,OAAS,GAAKnD,EAC1BsC,GAAMY,EAAME,MAAQ,GAAKpD,EACzBuC,GAAMW,EAAMG,OAAS,GAAKrD,EAE1B2C,EAAOH,EAAK,EACZC,EAAOH,EAAK,EACZI,EAAOH,EAAK,EAEZK,EAAKhD,KAAK0D,IAAIb,GACdI,EAAKjD,KAAK0D,IAAIZ,GACdI,EAAKlD,KAAK0D,IAAIX,GACdI,EAAKnD,KAAK2D,IAAId,GACdO,EAAKpD,KAAK2D,IAAIb,GACdO,EAAKrD,KAAK2D,IAAIZ,GAEdV,KAAKC,IACHa,EAAKF,EAAKC,EAAKF,EAAKI,EAAKC,EACzBL,EAAKI,EAAKF,EAAKC,EAAKF,EAAKI,EACzBL,EAAKC,EAAKI,EAAKF,EAAKC,EAAKF,EACzBF,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAG3BhB,KAAKuB,YAEEvB,MAhCU,GAoCrBA,KAAKwB,sBAAyB,WAC5B,IAAIC,EAEJ,OAAO,SAAUC,GAUf,OATAD,EAAIC,EAAOC,SAEX3B,KAAKC,IACH,GAAMtC,KAAKiE,KAAK,EAAIH,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMI,EAAKJ,EAAE,GAAKA,EAAE,IACxD,GAAM9D,KAAKiE,KAAK,EAAIH,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMI,EAAKJ,EAAE,GAAKA,EAAE,IACxD,GAAM9D,KAAKiE,KAAK,EAAIH,EAAE,GAAKA,EAAE,GAAKA,EAAE,IAAMI,EAAKJ,EAAE,GAAKA,EAAE,IACxD,GAAM9D,KAAKiE,KAAK,EAAIH,EAAE,GAAKA,EAAE,GAAKA,EAAE,KAG/BzB,MAbmB,GAiB9BA,KAAK8B,SAAW,SAAU3B,GAOxB,OANAJ,EAAUtC,EAASsE,WAAWC,UAAUC,oBACtCjC,KACAG,GAEFH,KAAKE,KAAKH,GAEHC,MAGTA,KAAKkC,QAAU,SAAUzD,GAQvB,OAPAsB,EAAUtC,EAASsE,WAAWC,UAAUG,kBACtCnC,KACA,CAAC,EAAG,EAAG,GACPvB,GAEFuB,KAAKE,KAAKH,GAEHC,MAGTA,KAAKoC,QAAU,SAAU3D,GAQvB,OAPAsB,EAAUtC,EAASsE,WAAWC,UAAUG,kBACtCnC,KACA,CAAC,EAAG,EAAG,GACPvB,GAEFuB,KAAKE,KAAKH,GAEHC,MAGTA,KAAKqC,QAAU,SAAU5D,GAQvB,OAPAsB,EAAUtC,EAASsE,WAAWC,UAAUG,kBACtCnC,KACA,CAAC,EAAG,EAAG,GACPvB,GAEFuB,KAAKE,KAAKH,GAEHC,MAGTA,KAAKuB,UAAY,WACf,OAAO9D,EAASsE,WAAWC,UAAUT,UAAUvB,OAIjDA,KAAKC,IAAIN,EAAGC,EAAGC,EAAGC,KAGpBrC,EAASsE,WAAWC,UAAY,CAC9BM,YAAa7E,EAASsE,WAEtBE,oBAAsB,WACpB,IAAIM,EAAiB,IAAI9E,EAASsE,WAElC,OAAO,SAAUS,EAAGC,GAClB,IAAIC,EAAMF,EAAE7C,EACVgD,EAAMH,EAAE5C,EACRgD,EAAMJ,EAAE3C,EACRgD,EAAML,EAAE1C,EACNgD,EAAML,EAAE9C,EACVoD,EAAMN,EAAE7C,EACRoD,EAAMP,EAAE5C,EACRoD,EAAMR,EAAE3C,EASV,OAPAyC,EAAetC,IACbyC,EAAMO,EAAMJ,EAAMC,EAAMH,EAAMK,EAAMJ,EAAMG,EAC1CJ,EAAMM,EAAMJ,EAAME,EAAMH,EAAME,EAAMJ,EAAMM,EAC1CJ,EAAMK,EAAMJ,EAAMG,EAAMN,EAAMK,EAAMJ,EAAMG,EAC1CD,EAAMI,EAAMP,EAAMI,EAAMH,EAAMI,EAAMH,EAAMI,GAGrCT,GApBW,GAwBtBhB,UAAW,SAAU2B,GACnB,IAAIC,EAAMxF,KAAKiE,KAAKsB,EAAEvD,EAAIuD,EAAEvD,EAAIuD,EAAEtD,EAAIsD,EAAEtD,EAAIsD,EAAErD,EAAIqD,EAAErD,EAAIqD,EAAEpD,EAAIoD,EAAEpD,GAgBhE,OAdY,IAARqD,GACFD,EAAEvD,EAAI,EACNuD,EAAEtD,EAAI,EACNsD,EAAErD,EAAI,EACNqD,EAAEpD,EAAI,IAENqD,EAAM,EAAIA,EAEVD,EAAEvD,GAAKwD,EACPD,EAAEtD,GAAKuD,EACPD,EAAErD,GAAKsD,EACPD,EAAEpD,GAAKqD,GAGFD,GAGTf,kBAAoB,WAClB,IAGIiB,EAAWC,EAHXC,EAAmB,IAAI7F,EAASsE,WAChCwB,EAAsB,IAAI9F,EAASsE,WAIvC,OAAO,SAAUyB,EAAkBC,EAAMhF,GAiBvC,OAhBA2E,GAAa3E,GAAS,GAAK,EAC3B4E,EAAK1F,KAAK2D,IAAI8B,GAEdG,EAAoBtD,KACjBwD,EAAK,IAAM,GAAKJ,GAChBI,EAAK,IAAM,GAAKJ,GAChBI,EAAK,IAAM,GAAKJ,EACjB1F,KAAK0D,IAAI+B,IAIXE,EAAmB7F,EAASsE,WAAWC,UAAUC,oBAC/CuB,EACAD,GAGK9F,EAASsE,WAAWC,UAAUT,UAAU+B,IAvB/B,IA8BtB7F,EAASiG,eAAiB,SACxBC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,EACAC,GAEA,IAAIC,EAEJpE,KAAK2B,SAAW,IAAI0C,aAAa,GAEjCrE,KAAKsE,SAAW,WAGd,OAFAtE,KAAKC,IAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAE1BD,MAGTA,KAAKC,IAAM,SAAU0D,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,GAC3DnE,KAAK2B,SAAS,GAAKgC,GAAO,EAC1B3D,KAAK2B,SAAS,GAAKiC,GAAO,EAC1B5D,KAAK2B,SAAS,GAAKkC,GAAO,EAC1B7D,KAAK2B,SAAS,GAAKmC,GAAO,EAC1B9D,KAAK2B,SAAS,GAAKoC,GAAO,EAC1B/D,KAAK2B,SAAS,GAAKqC,GAAO,EAC1BhE,KAAK2B,SAAS,GAAKsC,GAAO,EAC1BjE,KAAK2B,SAAS,GAAKuC,GAAO,EAC1BlE,KAAK2B,SAAS,GAAKwC,GAAO,GAG5BnE,KAAKE,KAAO,SAAUwB,GACpB1B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,GACnC3B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,GACnC3B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,GACnC3B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,GACnC3B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,GACnC3B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,GACnC3B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,GACnC3B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,GACnC3B,KAAK2B,SAAS,GAAKD,EAAOC,SAAS,IAGrC3B,KAAKI,aAAgB,WACnB,IAAIC,EAAIC,EAAIC,EACRI,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAExB,OAAO,SAAUC,GAkCf,OA/BAV,IAFAU,EAAQA,GAAS,IAELC,OAAS,GAAKnD,EAC1BsC,GAAMY,EAAME,MAAQ,GAAKpD,EACzBuC,GAAMW,EAAMG,OAAS,GAAKrD,EAE1B4C,EAAKhD,KAAK0D,IAAIhB,GACdO,EAAKjD,KAAK0D,IAAIf,GACdO,EAAKlD,KAAK0D,IAAId,GACdO,EAAKnD,KAAK2D,IAAIjB,GACdU,EAAKpD,KAAK2D,IAAIhB,GACdU,EAAKrD,KAAK2D,IAAIf,GAMdP,KAAKC,IACHY,EAAKD,EAAKI,EAAKF,EAAKC,GACnBJ,EAAKK,EACNJ,EAAKI,EAAKF,EAAKD,EAAKE,EAEpBH,EAAKI,EAAKH,EAAKC,EAAKC,EACpBF,EAAKF,EACLK,EAAKD,EAAKF,EAAKD,EAAKE,GAEnBH,EAAKI,EACND,EACAH,EAAKC,GAGPZ,KAAKuB,YAEEvB,MAtCU,GA0CrBA,KAAKuE,kBAAqB,WACxB,IAAIC,EAAKC,EAAKC,EAAKC,EAEnB,OAAO,SAAUzB,GAoBf,OAnBAsB,EAAMtB,EAAEpD,EAAIoD,EAAEpD,EACd2E,EAAMvB,EAAEvD,EAAIuD,EAAEvD,EACd+E,EAAMxB,EAAEtD,EAAIsD,EAAEtD,EACd+E,EAAMzB,EAAErD,EAAIqD,EAAErD,EAEdG,KAAKC,IACHuE,EAAMC,EAAMC,EAAMC,EAClB,GAAKzB,EAAEvD,EAAIuD,EAAEtD,EAAIsD,EAAEpD,EAAIoD,EAAErD,GACzB,GAAKqD,EAAEvD,EAAIuD,EAAErD,EAAIqD,EAAEpD,EAAIoD,EAAEtD,GAEzB,GAAKsD,EAAEvD,EAAIuD,EAAEtD,EAAIsD,EAAEpD,EAAIoD,EAAErD,GACzB2E,EAAMC,EAAMC,EAAMC,EAClB,GAAKzB,EAAEtD,EAAIsD,EAAErD,EAAIqD,EAAEpD,EAAIoD,EAAEvD,GAEzB,GAAKuD,EAAEvD,EAAIuD,EAAErD,EAAIqD,EAAEpD,EAAIoD,EAAEtD,GACzB,GAAKsD,EAAEtD,EAAIsD,EAAErD,EAAIqD,EAAEpD,EAAIoD,EAAEvD,GACzB6E,EAAMC,EAAMC,EAAMC,GAGb3E,MAvBe,GA2B1BA,KAAK8B,SAAW,SAAU8C,GAIxB,OAHAR,EAAY3G,EAASiG,eAAe1B,UAAU6C,iBAAiB7E,KAAM4E,GACrE5E,KAAKE,KAAKkE,GAEHpE,MAGTA,KAAKkC,QAAU,SAAUzD,GAQvB,OAPA2F,EAAY3G,EAASiG,eAAe1B,UAAUG,kBAC5CnC,KACA,CAAC,EAAG,EAAG,GACPvB,GAEFuB,KAAKE,KAAKkE,GAEHpE,MAGTA,KAAKoC,QAAU,SAAU3D,GAQvB,OAPA2F,EAAY3G,EAASiG,eAAe1B,UAAUG,kBAC5CnC,KACA,CAAC,EAAG,EAAG,GACPvB,GAEFuB,KAAKE,KAAKkE,GAEHpE,MAGTA,KAAKqC,QAAU,SAAU5D,GAQvB,OAPA2F,EAAY3G,EAASiG,eAAe1B,UAAUG,kBAC5CnC,KACA,CAAC,EAAG,EAAG,GACPvB,GAEFuB,KAAKE,KAAKkE,GAEHpE,MAGTA,KAAKuB,UAAY,WACf,OAAO9D,EAASiG,eAAe1B,UAAUT,UAAUvB,OAIrDA,KAAKC,IAAI0D,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,EAAKC,IAGnD1G,EAASiG,eAAe1B,UAAY,CAClCM,YAAa7E,EAASiG,eAEtBmB,iBAAmB,WACjB,IAEIC,EAAIC,EAFJrD,EAAS,IAAIjE,EAASiG,eAI1B,OAAO,SAAUlB,EAAGC,GAkBlB,OAjBAqC,EAAKtC,EAAEb,SACPoD,EAAKtC,EAAEd,SAEPD,EAAOzB,IACL6E,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAC3CD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAC3CD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAE3CD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAC3CD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAC3CD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAE3CD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAC3CD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAC3CD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,GAAKD,EAAG,GAAKC,EAAG,IAGtCrD,GAvBQ,GA2BnBH,UAAW,SAAUG,GACnB,IAAID,EAAIC,EAAOC,SAGXqD,EACFvD,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAChBA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAChBA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAChBA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAChBA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAChBA,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAelB,OAZAA,EAAE,IAAMuD,EACRvD,EAAE,IAAMuD,EACRvD,EAAE,IAAMuD,EACRvD,EAAE,IAAMuD,EACRvD,EAAE,IAAMuD,EACRvD,EAAE,IAAMuD,EACRvD,EAAE,IAAMuD,EACRvD,EAAE,IAAMuD,EACRvD,EAAE,IAAMuD,EAERtD,EAAOC,SAAWF,EAEXC,GAGTS,kBAAoB,WAClB,IAGIkB,EAAI4B,EAHJC,EAAe,IAAIzH,EAASiG,eAC5ByB,EAAkB,IAAI1H,EAASiG,eAG/B0B,GAAY,EAEhB,OAAO,SAAUC,EAAsB5B,EAAMhF,GAkD3C,OAjDA0G,EAAgBb,WAEhBc,GAAY,EAEZ/B,EAAK1F,KAAK2D,IAAI7C,GACdwG,EAAKtH,KAAK0D,IAAI5C,GAEE,IAAZgF,EAAK,IAAwB,IAAZA,EAAK,IAAwB,IAAZA,EAAK,IAGzC2B,GAAY,EAEZD,EAAgBxD,SAAS,GAAKsD,EAC9BE,EAAgBxD,SAAS,IAAM0B,EAC/B8B,EAAgBxD,SAAS,GAAK0B,EAC9B8B,EAAgBxD,SAAS,GAAKsD,GACT,IAAZxB,EAAK,IAAwB,IAAZA,EAAK,IAAwB,IAAZA,EAAK,IAGhD2B,GAAY,EAEZD,EAAgBxD,SAAS,GAAKsD,EAC9BE,EAAgBxD,SAAS,GAAK0B,EAC9B8B,EAAgBxD,SAAS,IAAM0B,EAC/B8B,EAAgBxD,SAAS,GAAKsD,GACT,IAAZxB,EAAK,IAAwB,IAAZA,EAAK,IAAwB,IAAZA,EAAK,KAGhD2B,GAAY,EAEZD,EAAgBxD,SAAS,GAAKsD,EAC9BE,EAAgBxD,SAAS,IAAM0B,EAC/B8B,EAAgBxD,SAAS,GAAK0B,EAC9B8B,EAAgBxD,SAAS,GAAKsD,GAG5BG,GACFF,EAAezH,EAASiG,eAAe1B,UAAU6C,iBAC/CQ,EACAF,GAGFD,EAAezH,EAASiG,eAAe1B,UAAUT,UAC/C2D,IAGFA,EAAeG,EAGVH,GAzDS,IAgEtBzH,EAAS6H,MAAQ,SAAUpE,EAAOC,EAAMC,GACtCpB,KAAKC,IAAM,SAAUiB,EAAOC,EAAMC,GAChCpB,KAAKkB,MAAQA,GAAS,EACtBlB,KAAKmB,KAAOA,GAAQ,EACpBnB,KAAKoB,MAAQA,GAAS,GAGxBpB,KAAKE,KAAO,SAAUqF,GACpBvF,KAAKkB,MAAQqE,EAAQrE,MACrBlB,KAAKmB,KAAOoE,EAAQpE,KACpBnB,KAAKoB,MAAQmE,EAAQnE,OAGvBpB,KAAKwB,sBAAyB,WAC5B,IAAIC,EAAG+D,EAAQC,EAAOC,EAEtB,OAAO,SAAUhE,IACfD,EAAIC,EAAOC,UAEL,GAAK,GAGT6D,EAAS7H,KAAKgI,OAAOlE,EAAE,GAAIA,EAAE,IAC7BgE,EAAQ9H,KAAKiI,KAAKnE,EAAE,IACpBiE,EAAS/H,KAAKgI,OAAOlE,EAAE,GAAIA,EAAE,KACpBA,EAAE,GAAK,GAGhB+D,EAAS7H,KAAKgI,MAAMlE,EAAE,IAAKA,EAAE,IAC7BgE,GAAS9H,KAAKiI,KAAKnE,EAAE,IACrBgE,GAASA,GAAS,GAAK/H,EAAOA,EAC9BgI,EAAS/H,KAAKgI,MAAMlE,EAAE,IAAKA,EAAE,KAIzBA,EAAE,GAAK,GAGT+D,EAAS7H,KAAKgI,OAAOlE,EAAE,GAAIA,EAAE,IAC7BgE,EAAQ9H,KAAKiI,KAAKnE,EAAE,IACpBiE,GAAU7H,GACD4D,EAAE,GAAK,GAGhB+D,EAAS7H,KAAKgI,MAAMlE,EAAE,IAAKA,EAAE,IAC7BgE,GAAS9H,KAAKiI,KAAKnE,EAAE,IACrBgE,GAASA,GAAS,GAAK/H,EAAOA,EAC9BgI,GAAU7H,IAKV2H,EAAS7H,KAAKgI,MAAMlE,EAAE,GAAIA,EAAE,IAC5BgE,EAAQhE,EAAE,GAAK,EAAI5D,GAAUA,EAC7B6H,EAAS,GAKTF,EAAS,IACXA,GAAU1H,GAIZ0H,GAAUxH,EACVyH,GAASzH,EACT0H,GAAU1H,EAGVgC,KAAKC,IAAIuF,EAAQC,EAAOC,IAxDE,GA4D9B1F,KAAKuE,kBAAqB,WACxB,IAAIiB,EAAQC,EAAOC,EAEnB,OAAO,SAAUxC,GACf,IAAIsB,EAAMtB,EAAEpD,EAAIoD,EAAEpD,EACd2E,EAAMvB,EAAEvD,EAAIuD,EAAEvD,EACd+E,EAAMxB,EAAEtD,EAAIsD,EAAEtD,EACd+E,EAAMzB,EAAErD,EAAIqD,EAAErD,EAEdgG,EAAarB,EAAMC,EAAMC,EAAMC,EAC/BmB,EAAO5C,EAAEpD,EAAIoD,EAAEvD,EAAIuD,EAAEtD,EAAIsD,EAAErD,EAG/B,GAAIiG,EAAO,QAAkBD,EAC3BL,EAAS,EAAI7H,KAAKgI,MAAMzC,EAAEtD,EAAGsD,EAAEpD,GAC/B2F,EAAQ5H,EACR6H,EAAS,OACJ,GAAII,GAAO,QAAmBD,EACnCL,GAAU,EAAI7H,KAAKgI,MAAMzC,EAAEtD,EAAGsD,EAAEpD,GAChC2F,GAAS5H,EACT6H,EAAS,MACJ,CACL,IAAIK,EAAKvB,EAAMC,EAAMC,EAAMC,EACvBqB,EAAK,GAAK9C,EAAEpD,EAAIoD,EAAErD,EAAIqD,EAAEvD,EAAIuD,EAAEtD,GAE9BqG,EAAKzB,EAAMC,EAAMC,EAAMC,EACvBuB,EAAK,GAAKhD,EAAEpD,EAAIoD,EAAEtD,EAAIsD,EAAEvD,EAAIuD,EAAErD,GAE9BoG,EAAK,GACPT,EAAS7H,KAAKgI,MAAMK,EAAID,GACxBN,EAAQ9H,KAAKiI,KAAM,EAAIE,EAAQD,GAC/BH,EAAS/H,KAAKgI,MAAMO,EAAID,KAExBT,EAAS7H,KAAKgI,OAAOK,GAAKD,GAC1BN,GAAS9H,KAAKiI,KAAM,EAAIE,EAAQD,GAChCJ,GAASA,EAAQ,EAAI/H,GAAQA,EAC7BgI,EAAS/H,KAAKgI,OAAOO,GAAKD,IAK1BT,EAAS,IACXA,GAAU1H,GAIZ0H,GAAUxH,EACVyH,GAASzH,EACT0H,GAAU1H,EAGVgC,KAAKC,IAAIuF,EAAQC,EAAOC,IAnDF,GAuD1B1F,KAAKkC,QAAU,SAAUzD,GAGvB,OAFAhB,EAAS6H,MAAMtD,UAAUG,kBAAkBnC,KAAM,CAAC,EAAG,EAAG,GAAIvB,GAErDuB,MAGTA,KAAKoC,QAAU,SAAU3D,GAGvB,OAFAhB,EAAS6H,MAAMtD,UAAUG,kBAAkBnC,KAAM,CAAC,EAAG,EAAG,GAAIvB,GAErDuB,MAGTA,KAAKqC,QAAU,SAAU5D,GAGvB,OAFAhB,EAAS6H,MAAMtD,UAAUG,kBAAkBnC,KAAM,CAAC,EAAG,EAAG,GAAIvB,GAErDuB,MAITA,KAAKC,IAAIiB,EAAOC,EAAMC,IAGxB3D,EAAS6H,MAAMtD,UAAY,CACzBM,YAAa7E,EAAS6H,MAEtBnD,kBAAoB,WAClB,IAAIgE,EAAU,IAAI1I,EAASiG,eAE3B,OAAO,SAAU0C,EAAa3C,EAAMhF,GAWlC,OAVA0H,EAAQ/F,aAAagG,GAErBD,EAAU1I,EAASiG,eAAe1B,UAAUG,kBAC1CgE,EACA1C,EACAhF,GAGF2H,EAAY5E,sBAAsB2E,GAE3BC,GAdS,IAqBtB3I,EAAS2B,kBAAoB,SAAUL,GACrCiB,KAAKjB,QAAUA,GAAW,GAE1B,IAAIsH,EAAQ,EAERC,EAAe,EAOnB,GAJAtG,KAAKuG,kBAAoB,EACzBvG,KAAKwG,uBAAoBhJ,EAGC,SAAtBwC,KAAKjB,QAAQ0H,KAAiB,CAChC,IAAIC,EAAqB,SAAUC,IACf,OAAdA,EAAIzF,QAENlB,KAAKwG,kBAAoB,IAAI/I,EAAS6H,MAAMqB,EAAIzF,MAAO,EAAG,GAC1DlB,KAAKwG,kBAAkBnE,SAAS3D,KAG1B4H,GAdW,OAwBbD,GA1BK,MAiBP9I,EAAOqJ,oBACL,oBACAF,GACA,IAaNG,KAAK7G,MAEPzC,EAAOuJ,iBAAiB,oBAAqBJ,GAAoB,QAG5D,GAA0B,UAAtB1G,KAAKjB,QAAQ0H,KAAkB,CACxC,IAAIM,EAAwB,SAAUJ,KAEjB,IAAjBA,EAAIK,eAC0BxJ,IAA9BmJ,EAAIM,uBAC0B,OAA9BN,EAAIM,wBACHN,EAAIM,uBAAyB,IAC7BN,EAAIM,sBAAwB,KAE7BjH,KAAKwG,kBAAoB,IAAI/I,EAAS6H,MACpCqB,EAAIO,qBACJ,EACA,GAEFlH,KAAKwG,kBAAkBnE,QAAQ3D,GAC/BsB,KAAKuG,kBAAoB7H,IAGnB4H,GAtDW,OAgEbD,GAlEK,MAyDP9I,EAAOqJ,oBACL,oBACAG,GACA,IAaNF,KAAK7G,MAEPzC,EAAOuJ,iBACL,oBACAC,GACA,KAKNtJ,EAAS2B,kBAAkB4C,UAAY,CACrCM,YAAa7E,EAAS2B,kBAEtBC,MAAO,SAAU8H,GAEbA,GAC6C,sBAA7CC,OAAOpF,UAAUqF,SAASC,KAAKH,IAE/BlJ,EAAQC,YAAYE,UAAUmJ,KAAKJ,GAI/B5I,EACFhB,EAAOiB,OAAON,YAAY4I,iBACxB,SACAU,GACA,GAGFjK,EAAOuJ,iBACL,oBACAU,GACA,GAKDvJ,EAAQC,YAAYC,SACvBZ,EAAOuJ,iBACL,oBACAW,GACA,GAGFxJ,EAAQC,YAAYC,QAAS,IAIjCsB,KAAM,WACAxB,EAAQC,YAAYC,SACtBZ,EAAOqJ,oBACL,oBACAa,GACA,GAGFxJ,EAAQC,YAAYC,QAAS,IAIjCuJ,OAAQ,SAAUP,GAChBnH,KAAKX,MAAM8H,IAGbQ,wBAA0B,WACxB,IAAI1G,EAAQ,IAAIxD,EAAS6H,MACrB5D,EAAS,IAAIjE,EAASiG,eACtBvD,EAAa,IAAI1C,EAASsE,WAE9B,OAAO,WACL,IAAI6F,EAAkB3J,EAAQC,YAAYG,MAAQ,CAChD6C,MAAO,EACPC,KAAM,EACNC,MAAO,GAGLyG,EAAgBD,EAAgB1G,MAoBpC,OAlBIlB,KAAKwG,oBACP9E,EAAOtB,aAAaJ,KAAKwG,mBACzB9E,EAAOW,SAASrC,KAAKuG,mBACrBtF,EAAMO,sBAAsBE,GAExBT,EAAMC,MAAQ,IAChBD,EAAMC,OAAS,KAGjBD,EAAMC,OAAS,IAEf2G,GAAiB5G,EAAMC,OAGzBD,EAAMhB,IAAI4H,EAAeD,EAAgBzG,KAAMyG,EAAgBxG,OAE/DjB,EAAWC,aAAaa,GAEjBd,GAhCe,GAoC1B2H,4BAA8B,WAC5B,IAAI3H,EAEJ,OAAO,WAML,OALAA,EAAaH,KAAK2H,2BAGPtF,SAAS3D,GAEbyB,GATmB,GAa9B4H,oBAAsB,WACpB,IAAI9G,EAAQ,IAAIxD,EAAS6H,MACrB5D,EAAS,IAAIjE,EAASiG,eAE1B,OAAO,WACL,IAAIkE,EAAkB3J,EAAQC,YAAYG,MAAQ,CAChD6C,MAAO,EACPC,KAAM,EACNC,MAAO,GAGLyG,EAAgBD,EAAgB1G,MAoBpC,OAlBIlB,KAAKwG,oBACP9E,EAAOtB,aAAaJ,KAAKwG,mBACzB9E,EAAOW,SAASrC,KAAKuG,mBACrBtF,EAAMO,sBAAsBE,GAExBT,EAAMC,MAAQ,IAChBD,EAAMC,OAAS,KAGjBD,EAAMC,OAAS,IAEf2G,GAAiB5G,EAAMC,OAGzBD,EAAMhB,IAAI4H,EAAeD,EAAgBzG,KAAMyG,EAAgBxG,OAE/DM,EAAOtB,aAAaa,GAEbS,GA/BW,GAmCtBsG,wBAA0B,WACxB,IAAItG,EAEJ,OAAO,WAML,OALAA,EAAS1B,KAAK+H,uBAGP1F,SAAS3D,GAETgD,GATe,GAa1BuG,mBAAqB,WACnB,IACIvG,EADAT,EAAQ,IAAIxD,EAAS6H,MAGzB,OAAO,WAKL,OAJA5D,EAAS1B,KAAK+H,sBAEd9G,EAAMO,sBAAsBE,GAErBT,GATU,GAarBiH,uBAAyB,WACvB,IACIxG,EADAT,EAAQ,IAAIxD,EAAS6H,MAGzB,OAAO,WAKL,OAJA5D,EAAS1B,KAAKgI,0BAEd/G,EAAMO,sBAAsBE,GAErBT,GATc,GAazBkH,WAAY,WACV,SACElK,EAAQC,YAAYG,OACkB,IAAtCJ,EAAQC,YAAYG,KAAK2I,WAQ7BoB,oBAAqB,WACnB,OAAOnK,EAAQC,YAAYG,MAAQ,IAGrCgK,MAAO,QACPC,KAAM,OACNC,MAAO,SAKT9K,EAASiC,aAAe,SAAUX,GAChCiB,KAAKjB,QAAUA,GAAW,IAG5BtB,EAASiC,aAAasC,UAAY,CAChCM,YAAa7E,EAASiC,aAEtBL,MAAO,SAAU8H,GAEbA,GAC6C,sBAA7CC,OAAOpF,UAAUqF,SAASC,KAAKH,IAE/BlJ,EAAQK,OAAOF,UAAUmJ,KAAKJ,GAI1B5I,EACFhB,EAAOiB,OAAON,YAAY4I,iBACxB,SACAU,GACA,GAGFjK,EAAOuJ,iBACL,oBACAU,GACA,GAKDvJ,EAAQK,OAAOH,SAClBZ,EAAOuJ,iBACL,eACA0B,GACA,GAGFvK,EAAQK,OAAOH,QAAS,IAI5BsB,KAAM,WACAxB,EAAQK,OAAOH,SACjBZ,EAAOqJ,oBACL,eACA4B,GACA,GAGFvK,EAAQK,OAAOH,QAAS,IAI5BuJ,OAAQ,SAAUP,GAChBnH,KAAKX,MAAM8H,IAGbsB,8BAA+B,WAC7B,IAAIC,EACFzK,EAAQK,OAAOD,MAAQJ,EAAQK,OAAOD,KAAKsK,aACvC1K,EAAQK,OAAOD,KAAKsK,aACpB,CAAEhJ,EAAG,EAAGC,EAAG,EAAGC,EAAG,GACnB+I,EAAgB,GAEpB,OAAQlK,GACN,KAAKC,EACHiK,EAAcjJ,GAAK+I,EAAQ9I,EAC3BgJ,EAAchJ,EAAI8I,EAAQ/I,EAC1B,MACF,KAAKf,EACHgK,EAAcjJ,GAAK+I,EAAQ/I,EAC3BiJ,EAAchJ,GAAK8I,EAAQ9I,EAC3B,MACF,KAAKf,EACL,KAAKC,EACH8J,EAAcjJ,EAAI+I,EAAQ9I,EAC1BgJ,EAAchJ,GAAK8I,EAAQ/I,EAC3B,MACF,QAEEiJ,EAAcjJ,EAAI+I,EAAQ/I,EAC1BiJ,EAAchJ,EAAI8I,EAAQ9I,EAM9B,OAFAgJ,EAAc/I,EAAI6I,EAAQ7I,EAEnB+I,GAGTC,8CAA+C,WAC7C,IAAIC,EACF7K,EAAQK,OAAOD,MAAQJ,EAAQK,OAAOD,KAAK0K,6BACvC9K,EAAQK,OAAOD,KAAK0K,6BACpB,CAAEpJ,EAAG,EAAGC,EAAG,EAAGC,EAAG,GACnBmJ,EAAiB,GAErB,OAAQtK,GACN,KAAKC,EACHqK,EAAerJ,GAAKmJ,EAASlJ,EAC7BoJ,EAAepJ,EAAIkJ,EAASnJ,EAC5B,MACF,KAAKf,EACHoK,EAAerJ,GAAKmJ,EAASnJ,EAC7BqJ,EAAepJ,GAAKkJ,EAASlJ,EAC7B,MACF,KAAKf,EACL,KAAKC,EACHkK,EAAerJ,EAAImJ,EAASlJ,EAC5BoJ,EAAepJ,GAAKkJ,EAASnJ,EAC7B,MACF,QAEEqJ,EAAerJ,EAAImJ,EAASnJ,EAC5BqJ,EAAepJ,EAAIkJ,EAASlJ,EAMhC,OAFAoJ,EAAenJ,EAAIiJ,EAASjJ,EAErBmJ,GAGTC,8BAA+B,WAC7B,IAAIC,EACFjL,EAAQK,OAAOD,MAAQJ,EAAQK,OAAOD,KAAK8K,aACvClL,EAAQK,OAAOD,KAAK8K,aACpB,CAAEjI,MAAO,EAAGC,KAAM,EAAGC,MAAO,GAC9BgI,EAAoB,GAExB,OAAQ1K,GACN,KAAKC,EACHyK,EAAkBjI,MAAQ+H,EAAY9H,MACtCgI,EAAkBhI,MAAQ8H,EAAY/H,KACtC,MACF,KAAKvC,EACHwK,EAAkBjI,MAAQ+H,EAAY/H,KACtCiI,EAAkBhI,OAAS8H,EAAY9H,MACvC,MACF,KAAKvC,EACL,KAAKC,EACHsK,EAAkBjI,KAAO+H,EAAY9H,MACrCgI,EAAkBhI,OAAS8H,EAAY/H,KACvC,MACF,QAEEiI,EAAkBjI,KAAO+H,EAAY/H,KACrCiI,EAAkBhI,MAAQ8H,EAAY9H,MAM1C,OAFAgI,EAAkBlI,MAAQgI,EAAYhI,MAE/BkI,GAGThB,oBAAqB,WACnB,OAAOnK,EAAQK,OAAOD,MAAQ,KAMlCd,EAAOE,SAAWA,EA/rClB,SAASoE,EAAKlC,GAEZ,OAAU,KADVA,GAAKA,IACU0J,MAAM1J,GAAWA,EACzBA,EAAI,EAAI,GAAK,EAKtB,SAASL,EAAYgK,GAiBnB,OAhBc,IAAItK,SAAQ,SAAUC,EAASC,IAC5B,SAAXqK,EAAqBlD,GACvBmD,YAAW,WACLF,GAAiBA,EAAcjL,KACjCY,IACSoH,GAAS,GAClBnH,IAEAqK,IAAWlD,KAEZ,IAGLkD,CAAS,MAQb,SAAS/B,IAEL9I,EADEH,GAEChB,EAAOiB,OAAON,YAAYO,OAAS,GAAKV,GAEjBR,EAAOW,aAAe,GAAKH,EAIzD,SAAS0J,EAA8BgC,GAIrC,IAAK,IAAIC,KAHTzL,EAAQC,YAAYG,KAAOoL,EAGbxL,EAAQC,YAAYE,UAChCH,EAAQC,YAAYE,UAAUsL,GAAGpC,KAAKtH,MAI1C,SAASwI,EAAyBiB,GAIhC,IAAK,IAAIC,KAHTzL,EAAQK,OAAOD,KAAOoL,EAGRxL,EAAQK,OAAOF,UAC3BH,EAAQK,OAAOF,UAAUsL,GAAGpC,KAAKtH,OArGvC,CAgvCGzC,S,sNCrvCUoM,EAMR,SAAC,GAAiD,IAA/CC,EAA8C,EAA9CA,SAAUC,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,KAAMC,EAAqB,EAArBA,MAAOC,EAAc,EAAdA,QAAc,EAC9BC,IAAMC,SAAS,IADe,mBAC7CC,EAD6C,KACxCC,EADwC,KAqBpD,OARAH,IAAMI,WAAU,WACd,IAAMC,EAAQ/M,OAAOgN,aAAaC,QAAQ,UAErB,kBAAVF,GACTF,EAAOE,KAER,IAGD,eAACG,EAAA,EAAD,CAAQX,KAAMA,EAAME,QAASA,EAA7B,UACE,cAACU,EAAA,EAAD,wCACA,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,oGAIA,cAACC,EAAA,EAAD,CACEC,WAAS,EACTC,OAAO,QACPtE,KAAK,OACLuE,MAAOb,EACPc,SA/Ba,SAACxB,GACpBA,EAAMyB,iBACNd,EAAOX,EAAM0B,OAAOH,QA8BdI,YAAY,YACZC,MAAM,gBACNC,GAAG,MACHC,WAAS,EACTC,SAAU3B,EACVE,QAASA,EACT0B,WAAY1B,OAGhB,eAAC2B,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAQC,MAAM,UAAUJ,SAAU3B,EAASgC,QArC5B,WACnBC,QAAQC,IAAI5B,GACZP,EAASO,IAmCL,qBAGA,cAACwB,EAAA,EAAD,CAAQC,MAAM,UAAUJ,SAAU3B,EAASgC,QAAS7B,EAApD,0B,uECjEO,wzXCAA,MAA0B,kCCA1B,MAA0B,oCCiB5BgC,EAAwB,CACnC,CACEC,KAAM,OACNC,KAAM,kBACNC,KAAM,cAACC,EAAA,EAAD,IACNC,WAAW,EACXC,YAAa,IAEf,CACEL,KAAM,QACNC,KAAM,4BACNC,KAAM,cAACI,EAAA,EAAD,IACNC,MAAOC,EACPJ,WAAW,EACXC,YAAa,kDAEf,CACEL,KAAM,wBACNC,KAAM,oCACNC,KAAM,cAACI,EAAA,EAAD,IACNC,MAAOE,EACPL,WAAW,EACXC,YAAa,gDAEf,CACEL,KAAM,mBACNC,KAAM,yCACNC,KAAM,cAACI,EAAA,EAAD,IACNC,MC7CW,y3ND8CXH,WAAW,EACXC,YAAa,+BAEf,CACEL,KAAM,gBACNC,KAAM,sCACNC,KAAM,cAACI,EAAA,EAAD,IACNC,MAAOG,EACPN,WAAW,EACXC,YAAa,2BAEf,CACEL,KAAM,oBACNC,KAAM,8BACNC,KAAM,cAACI,EAAA,EAAD,IACNC,MAAOE,EACPL,WAAW,EACXC,YAAa,gCAEf,CACEL,KAAM,gBACNC,KAAM,2BACNC,KAAM,cAACI,EAAA,EAAD,IACNC,MAAOE,EACPL,WAAW,EACXC,YAAa,8BAEf,CACEL,KAAM,eACNC,KAAM,+BACNC,KAAM,cAACI,EAAA,EAAD,IACNC,MAAOE,EACPL,WAAW,EACXC,YAAa,uBEjEXM,EAAYC,YAAW,CAC3BC,KAAM,CACJC,SAAU,KAEZC,MAAO,CACLC,OAAQ,OAICC,EAA2C,WACtD,IAAMC,EAAUP,IAEhB,OACE,cAACQ,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,SACGtB,EAAQuB,QAAO,SAACC,GAAD,OAASA,EAAInB,aAAWoB,KAAI,SAACD,GAAD,OAC1C,cAACJ,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,SACE,cAAC,IAAD,CAAMC,GAAIJ,EAAItB,KAAM2B,MAAO,CAAEC,eAAgB,QAA7C,SACE,cAACC,EAAA,EAAD,CAAMC,UAAWb,EAAQL,KAAzB,SACE,eAACmB,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CACEF,UAAWb,EAAQH,MACnBR,MAAOgB,EAAIhB,MACX2B,MAAM,UAER,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYC,cAAY,EAACC,QAAQ,KAAKC,UAAU,KAAhD,SACGhB,EAAIvB,OAEP,cAACoC,EAAA,EAAD,CACEE,QAAQ,QACR3C,MAAM,gBACN4C,UAAU,IAHZ,SAKGhB,EAAIlB,yBAlBMkB,EAAIvB,Y,6CCX7BW,EAAYC,aAAW,SAAC4B,GAAD,MAAY,CACvCC,KAAM,CACJC,MAAO,SAIEC,EAA6D,SAAC,GAGpE,IAFL9E,EAEI,EAFJA,KACA+E,EACI,EADJA,OAEM1B,EAAUP,IAEhB,OACE,cAACkC,EAAA,EAAD,CAAQC,OAAO,OAAOjF,KAAMA,EAAME,QAAS6E,EAA3C,SACE,qBACEb,UAAWb,EAAQuB,KACnBM,KAAK,eACLnD,QAASgD,EACTI,UAAWJ,EAJb,SAME,cAACK,EAAA,EAAD,UACGlD,EAAQyB,KAAI,SAACE,GAAD,OACX,cAAC,IAAD,CAEEC,GAAID,EAAKzB,KACT2B,MAAO,CAAEC,eAAgB,OAAQlC,MAAO,SAH1C,SAKE,eAACuD,EAAA,EAAD,CAAUC,QAAM,EAAhB,UACE,cAACC,EAAA,EAAD,UAAe1B,EAAKxB,OACpB,cAACmD,EAAA,EAAD,CAAcC,QAAS5B,EAAK1B,WANzB0B,EAAKzB,gB,iFC3BlBU,EAAYC,aAAW,SAAC4B,GAAD,MAAY,CACvCe,WAAY,CACVC,YAAahB,EAAMnB,QAAQ,IAE7Ba,MAAO,CACLuB,SAAU,OAIDC,EAKR,SAAC,GAAoD,IAAlDC,EAAiD,EAAjDA,aAAczF,EAAmC,EAAnCA,IAAK0F,EAA8B,EAA9BA,aAAcC,EAAgB,EAAhBA,UAAgB,EACvB7F,IAAMC,SACpC,MAFqD,mBAChD6F,EADgD,KACtCC,EADsC,KAKjD7C,EAAUP,IAEV9C,EAAOmG,QAAQF,GAEfG,EAAa,SACjBzG,GAEAuG,EAAYvG,EAAM0G,gBAGdC,EAAc,WAClBJ,EAAY,OAad,OACE,cAACK,EAAA,EAAD,CAAQC,SAAS,SAAjB,SACE,eAACC,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CACEC,KAAK,QACLzC,UAAWb,EAAQqC,WACnB5D,MAAM,UACN8E,aAAW,OACX7E,QAAS+D,EALX,SAOE,cAAC,IAAD,MAEF,cAAC,IAAD,CACEhC,GAAG,mBACHI,UAAWb,EAAQgB,MACnBN,MAAO,CAAEC,eAAgB,OAAQlC,MAAO,SAH1C,SAKE,cAACyC,EAAA,EAAD,CAAYE,QAAQ,KAApB,iCAEDpE,GACC,qCACE,cAACqG,EAAA,EAAD,CAAY5E,MAAM,UAAUC,QAASqE,EAArC,SACE,cAACS,EAAA,EAAD,MAEF,cAACC,EAAA,EAAD,CACEtF,GAAG,cACHyE,SAAUA,EACVc,aAAc,CACZC,SAAU,MACVC,WAAY,SAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAEdjH,KAAMA,EACNE,QAASoG,EAZX,SAcE,cAACa,EAAA,EAAD,CAAUpF,QAhDG,WACvBgE,IACAO,KA8CU,8BAIJjG,GACA,qCACE,cAACqG,EAAA,EAAD,CAAY5E,MAAM,UAAUC,QAASqE,EAArC,SACE,cAACgB,EAAA,EAAD,MAEF,cAACN,EAAA,EAAD,CACEtF,GAAG,cACHyE,SAAUA,EACVc,aAAc,CACZC,SAAU,MACVC,WAAY,SAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,SAEdjH,KAAMA,EACNE,QAASoG,EAZX,SAcE,cAACa,EAAA,EAAD,CAAUpF,QAlEA,WACpBiE,IACAM,KAgEU,gC,iDCtHDe,GAAW,SACtBnG,EACAoG,EACAC,EACAC,EACAC,GALsB,OAMjBvG,EAAQoG,IAAOG,EAAKD,IAAQD,EAAKD,GAAME,GAEjCE,GAAW,SAACxG,EAAeoG,EAAYC,GAA5B,OACN,KAAdrG,EAAQoG,IAAcC,EAAKD,ICYzBK,GAKD,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,MAAOC,EAAiC,EAAjCA,MAAOC,EAA0B,EAA1BA,WAAYC,EAAc,EAAdA,QAC5BC,EAEF,IADCnU,KAAK2D,MAAMqQ,EAAQD,EAAMK,OAASF,EAAU,GAAK,IAAOlU,KAAKC,IAAM,GAGtE,OACE,qBACEiQ,MAAO,CACLc,MAAQmD,EAAYF,EAAc,EAClC3E,OAAS6E,EAAYF,EAAc,EACnCI,gBAAgB,UAAD,OAAYN,EAAM/R,EAAI,EAAtB,YAA2B+R,EAAM9R,EAAI,EAArC,YACbkS,EAAY,EADC,KAGfxB,SAAU,WACV2B,IAAKP,EAAM9R,EAAKkS,EAAYF,EAAc,EAC1CM,KAAMR,EAAM/R,EAAKmS,EAAYF,EAAc,EAC3CO,aAAc,MACdC,WAAY,eAMPC,GAET,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,WAAiB,EACkBrI,IAAMC,SAAyB,IADjD,mBACfqI,EADe,KACDC,EADC,OAEIvI,IAAMC,SAAS,GAFnB,mBAEfyH,EAFe,KAERc,EAFQ,OAGExI,IAAMC,SAAS,CAAEyE,MAAO,EAAG1B,OAAQ,IAHrC,mBAGfyF,EAHe,KAGTC,EAHS,OAIQ1I,IAAMC,SAAS,GAJvB,mBAIf2H,EAJe,KAINe,EAJM,KAMhBC,EAAW5I,IAAM6I,OAAuB,MAExCC,EAAW9I,IAAM+I,aACrB,SAACtB,GACC,IAAMuB,EAAO9B,GAASO,EAAM/R,EAAG,EAAG+S,EAAK/D,MAAO,GAAI,KAC5CuE,EAAM/B,GAASO,EAAM9R,EAAG,EAAG8S,EAAKzF,OAAQ,EAAG,GACjDnB,QAAQC,IAAI,gBAAiBkH,EAAMC,GAEnCZ,EAAW,CACTa,QAAS,iBACTC,KAAM,CAACH,EAAMC,EAAKxB,EAAM2B,WAG5B,CAACf,EAAYI,IAGfzI,IAAMI,WAAU,WACd,IAAMiJ,EAAWC,aAAY,WAC3B,IAAIC,EAAU7B,EAAQ,GAClB6B,EAAU3B,IACZ2B,EAAU,GAGZjB,EACGhF,QAAO,SAACmE,GAAD,OAAWA,EAAMK,OAASyB,KACjCC,SAAQ,SAAC/B,GAAD,OAAWqB,EAASrB,MAE/Be,EAASe,KACR,KAEH,OAAO,kBAAME,cAAcJ,MAC1B,CAACP,EAAUR,EAAcZ,EAAOE,IAEnC5H,IAAMI,WAAU,WACVwI,EAASc,SACXhB,EAAQ,CACNhE,MAAOkE,EAASc,QAAQC,YACxB3G,OAAQ4F,EAASc,QAAQE,iBAG5B,CAAChB,IA+CJ,OACE,eAAC9E,EAAA,EAAD,WACE,sBACE+F,IAAKjB,EACLhF,MAAO,CACLc,MAAO,OACP1B,OAAQ,IACRqD,SAAU,WACVyD,SAAU,SACV3B,WAAY,yBAPhB,UAUGG,EAAa9E,KAAI,SAACiE,GAAD,OAChB,cAAC,GAAD,CAEEA,MAAOA,EACPC,MAAOA,EACPC,WAAYc,EAAK/D,MACjBkD,QAASA,GAJJH,EAAM2B,UAOf,qBACExF,MAAO,CACLyC,SAAU,WACV0B,gBAAiB,gBACjBC,IAAK,EACLC,KAAM,EACNvD,MAAO,OACP1B,OAAQ,QAEV+G,YA3EW,SAACvK,GAAyD,IACnEwK,EAAgBxK,EAAhBwK,YACFtU,EAAIsU,EAAYC,QAChBtU,EAAIqU,EAAYE,QACtBrI,QAAQC,IAAIpM,EAAGC,GAEXiT,EAASc,UACXd,EAASc,QAAQ9F,MAAMmE,gBAAvB,kBAAoDb,GAClDxR,EACA,EACA+S,EAAK/D,MACL,EACA,KALF,aAMMwC,GAASvR,EAAG,EAAG8S,EAAKzF,OAAQ,EAAG,KANrC,OAqEIpB,QA3Da,SACnBpC,GACI,IACIwK,EAAgBxK,EAAhBwK,YAIFG,EAAyB,CAC7BzU,EAJQsU,EAAYC,QAKpBtU,EAJQqU,EAAYE,QAKpBpC,KAAMJ,EACN0B,MAAOd,EAAa8B,QAGtB7B,EAAgB,GAAD,oBAAKD,GAAL,CAAmB6B,KAClCrB,EAASqB,SA+CP,eAACE,GAAA,EAAD,WACE,cAACC,GAAA,EAAD,IACA,eAAClG,EAAA,EAAD,CAAYE,QAAQ,QAAQV,MAAO,CAAEc,MAAO,QAA5C,UACGhR,KAAK6W,MAAc,IAAR7C,GAAe,IAD7B,IACmChU,KAAK6W,MAAgB,IAAV3C,GAAiB,OAE/D,cAAC4C,GAAA,EAAD,IACA,cAACC,GAAA,EAAD,CACE1J,MAAO6G,EACP5G,SAhDoB,SAAC0J,EAAiB3J,GACvB,kBAAVA,GACT4H,EAAW5H,IA+CP4J,IAAK,GACLC,IAAK,EACLC,KAAM,KAER,cAACnJ,EAAA,EAAD,CAAQE,QAzDO,WACnB2G,EAAgB,KAwDZ,0B,+BCzLFuC,GAAW,IAQJC,GAGR,SAAC,GAA2B,IAAzB/J,EAAwB,EAAxBA,SAAUY,EAAc,EAAdA,QAAc,EACgB5B,IAAMC,UAAS,GAD/B,mBACvB+K,EADuB,KACNC,EADM,OAEJjL,IAAMC,SAAS,IAFX,mBAEvBH,EAFuB,KAEhBoL,EAFgB,OAGNlL,IAAMC,SAAS,CAAEyE,MAAO,EAAG1B,OAAQ,IAH7B,mBAGvByF,EAHuB,KAGjBC,EAHiB,KAKxBE,EAAW5I,IAAM6I,OAAuB,MACxCsC,EAASnL,IAAM6I,OAAuB,MAE5C7I,IAAMI,WAAU,WACVwI,EAASc,SACXhB,EAAQ,CACNhE,MAAOkE,EAASc,QAAQC,YACxB3G,OAAQ4F,EAASc,QAAQE,iBAG5B,CAAChB,IAEJ,IAAMwC,EAAa,WACjBH,GAAmB,GACnB,IAAMI,EAAK,IAAIC,KAEfD,EAAGE,KAAK,CAAEC,UAAW,KAClBlW,MAAK,WACJ+V,EAAGjW,OAAM,SAAChB,GACR,GAAI+W,EAAOzB,QAAS,CAAC,IAAD,EACatV,EAAKqX,GAA5BxU,EADU,EACVA,MAAOC,EADG,EACHA,KAAMC,EADH,EACGA,MAErBgU,EAAOzB,QAAQ9F,MAAMqE,KAArB,UACEf,GAAS/P,GAAQ,GAAI,GAAI,EAAGsR,EAAK/D,OAASoG,GAD5C,MAIAK,EAAOzB,QAAQ9F,MAAMoE,IAArB,UACEd,GAAShQ,GAAO,GAAI,GAAI,EAAGuR,EAAKzF,QAAU8H,GAD5C,MAIAK,EAAOzB,QAAQ9F,MAAMmE,gBAArB,kBAAkDR,GAChDrQ,GACC,IACD,KAHF,YAIKqQ,GAASpQ,GAAQ,GAAI,IAJ1B,KAMAgU,EAAOzB,QAAQ9F,MAAMsE,aAArB,UAAuChB,GACrCjQ,EACA,EACA,IACA,EACA,IALF,KAQQ,OAAR+J,QAAQ,IAARA,KAAW,CAAE/J,QAAOC,OAAMC,iBAI/B5B,OAAM,WACL0V,GAAmB,GACnBC,EAAS,mDAgBf,OACE,mCACE,eAACpH,EAAA,EAAD,YACIkH,GACA,eAAC7G,EAAA,EAAD,WACE,cAACzC,EAAA,EAAD,CACEE,QAlBS,WAAO,IAAD,OACrB,UAACtO,OAAOoY,yBAAR,aAAC,EAA0BC,oBAC7BP,IAGF,UAAA9X,OAAOoY,yBAAP,mBAA0BC,yBAA1B,iBAAgDrW,MAAK,SAACsW,GACnC,YAAbA,GACFR,QAYM9G,QAAQ,WACR3C,MAAM,UACNL,WAAS,EAJX,gEASCxB,GACC,eAAC+L,EAAA,EAAD,WACE,cAACC,GAAA,EAAD,CAAOnK,MAAM,UACb,cAACyC,EAAA,EAAD,CAAYC,cAAY,EAACC,QAAQ,UAAjC,SACGxE,UAMX,sBACE+J,IAAKjB,EACLhF,MAAO,CACLc,MAAO,OACP1B,OAAQ,QACRqD,SAAU,WACVyD,SAAU,SACVhJ,OAAQ,SACRiH,gBAAiB,QARrB,UAWE,qBACE8B,IAAKsB,EACLvH,MAAO,CACLc,MAAOoG,GACP9H,OAAQ8H,GACR/C,gBAAiB,mBACjB1B,SAAU,WACV2B,IAAK,EACLC,KAAM,EACNC,aAAc,MACdC,WAAY,eAGhB,qBACE4D,aAAc,yBAAMnK,QAAN,IAAMA,OAAN,EAAMA,EAAU,OAC9BoK,WAAY,yBAAMpK,QAAN,IAAMA,OAAN,EAAMA,EAAU,QAC5BgC,MAAO,CACLyC,SAAU,WACV0B,gBAAiB,gBACjBC,IAAK,EACLC,KAAM,EACNvD,MAAO,OACP1B,OAAQ,mBC3ITiJ,GAIT,SAAC,GAAoB,IAAlB5D,EAAiB,EAAjBA,WAeL,OAAO,cAAC,GAAD,CAAUzG,QAPG,SAACsK,GACnB7D,EAAW,CACTa,QAAS,qBACTC,KAAM,CAAC+C,MAI4BlL,SAdlB,SAACkL,GACpB7D,EAAW,CACTa,QAAS,uBACTC,KAAM,CAAC+C,EAAIjV,MAAOiV,EAAIhV,KAAMgV,EAAI/U,a,oBCKzBgV,GAAiD,WAAO,IAAD,EAC1CnM,IAAMC,SAAgC,MADI,mBAC3DmM,EAD2D,KACrDC,EADqD,OAE1CrM,IAAMC,SAAgC,MAFI,mBAE3DqM,EAF2D,KAErDC,EAFqD,OAGxCvM,IAAMC,SAA0B,MAHQ,mBAG3DuM,EAH2D,KAGpDC,EAHoD,OAIxCzM,IAAMC,SAA0B,MAJQ,mBAI3DyM,EAJ2D,KAIpDC,EAJoD,OAKlC3M,IAAMC,SAAS,KALmB,mBAK3D2M,EAL2D,KAKjDC,EALiD,OAMlC7M,IAAMC,SAAS,KANmB,mBAM3D6M,EAN2D,KAMjDC,EANiD,OAOlC/M,IAAMC,SAAS,KAPmB,mBAO3D+M,EAP2D,KAOjDC,EAPiD,OAQlCjN,IAAMC,SAAS,KARmB,mBAQ3DiN,EAR2D,KAQjDC,EARiD,OASpCnN,IAAMC,SAA8B,MATA,mBAS3DmN,EAT2D,KASlDC,EATkD,KAWlErN,IAAMI,WAAU,WAId,OAHKgN,GACHC,EAAW,IAAIC,cAEV,WACE,OAAPF,QAAO,IAAPA,KAASG,WAEV,CAACH,IAgGJ,OACE,qCACE,eAACtJ,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,WACIiI,GACA,cAAC1K,EAAA,EAAD,CACEE,QApGO,WACjB,GAAKwL,EAAL,CAKAA,EAAQI,SAGR,IAAMC,EAAML,EAAQM,YAGdtB,EAAOgB,EAAQO,mBACfrB,EAAOc,EAAQO,mBACfC,EAAUR,EAAQO,mBACxBC,EAAQpR,KAAO,OAGf4P,EAAKZ,UAAUzK,MAAQ6L,EACvBN,EAAKd,UAAUzK,MAAQ+L,EACvBV,EAAK5P,KAAO,WACZ8P,EAAK9P,KAAO,SACZoR,EAAQpC,UAAUzK,MAAQ,IAG1B,IAAM8M,EAAWT,EAAQU,aACzBD,EAASE,KAAKhN,MAAQiM,EACtB,IAAMgB,EAAWZ,EAAQU,aACzBE,EAASD,KAAKhN,MAAQmM,EACtB,IAAMe,EAAWb,EAAQU,aACzBG,EAASF,KAAKhN,MAAQ,GAGtBqL,EAAK8B,QAAQL,GACbvB,EAAK4B,QAAQF,GACbH,EAASK,QAAQN,EAAQpC,WACzBwC,EAASE,QAAQ9B,EAAKZ,WACtBoC,EAAQM,QAAQD,GAChBA,EAASC,QAAQT,GAGjBrB,EAAKhX,QACLkX,EAAKlX,QACLwY,EAAQxY,QAERiX,EAAQD,GACRK,EAASoB,GACTtB,EAAQD,GACRK,EAASqB,KAqDC1J,QAAQ,WACR3C,MAAM,UACNL,WAAS,EAJX,qBAUJ,eAAC+I,GAAA,EAAD,WACE,sBAAKzG,MAAO,CAAEc,MAAO,QAArB,UACG0H,GACC,qCACE,cAAC+B,GAAA,EAAD,IACA,cAAC1D,GAAA,EAAD,CACE1J,MAAO6L,EACP5L,SAjEU,SAAC0J,EAAiB3J,GACtCqL,GAAyB,kBAAVrL,IACjBqL,EAAKZ,UAAUzK,MAAQA,EACvB8L,EAAYT,EAAKZ,UAAUzK,SA+Df4J,IA5IM,IA6INC,IAAK,EACLC,KAAM,OAIX2B,GACC,qCACE,cAAC4B,GAAA,EAAD,IACA,cAAC3D,GAAA,EAAD,CACE1J,MAAOiM,EACPhM,SA/DU,SAAC0J,EAAiB3J,GACtCyL,GAA0B,kBAAVzL,IAClByL,EAAMuB,KAAKhN,MAAQA,EACnBkM,EAAYT,EAAMuB,KAAKhN,SA6DX4J,IA1JC,IA2JDC,IAAK,EACLC,KAAM,UAKd,sBAAKjH,MAAO,CAAEc,MAAO,QAArB,UACG4H,GACC,qCACE,cAAC6B,GAAA,EAAD,IACA,cAAC1D,GAAA,EAAD,CACE1J,MAAO+L,EACP9L,SApFU,SAAC0J,EAAiB3J,GACtCuL,GAAyB,kBAAVvL,IACjBuL,EAAKd,UAAUzK,MAAQA,EACvBgM,EAAYT,EAAKd,UAAUzK,SAkFf4J,IArKM,GAsKNC,IAAK,EACLC,KAAM,OAIX6B,GACC,qCACE,cAAC0B,GAAA,EAAD,IACA,cAAC3D,GAAA,EAAD,CACE1J,MAAOmM,EACPlM,SAlFU,SAAC0J,EAAiB3J,GACtC2L,GAA0B,kBAAV3L,IAClB2L,EAAMqB,KAAKhN,MAAQA,EACnBoM,EAAYT,EAAMqB,KAAKhN,SAgFX4J,IAnLC,IAoLDC,IAAK,EACLC,KAAM,gBAOjBuB,GAAQ,cAAC,GAAD,CAAUpL,SArFH,SAACD,GACfqL,IACFA,EAAKZ,UAAUzK,MAAQmG,GAASnG,EAAM5J,OAAQ,GAAI,GAAI,EAxGpC,KAyGlB0V,EAAYT,EAAKZ,UAAUzK,QAEzByL,IACFA,EAAMuB,KAAKhN,MAAQmG,GAASnG,EAAM7J,MAAO,GAAI,GAAI,EA9GpC,KA+Gb+V,EAAYT,EAAMuB,KAAKhN,QAErBuL,IACFA,EAAKd,UAAUzK,MAAQmG,GAASnG,EAAM9J,MAAO,EAAG,IAAK,EA/GnC,IAgHlB8V,EAAYT,EAAKd,UAAUzK,e,6FC/HpBsN,GAA6B,CACxC,CACErM,KAAM,QACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJC,YAAa,EACbC,WAAY,EACZC,WAAY,GACZC,UAAW,GACXC,aAAc,EACdC,YAAa,EACbC,aAAc,EACdC,YAAa,IAGjBC,IAAK,CACHb,KAAM,YACN/R,KAAM,OACNgS,MAAO,GACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJC,YAAa,EACbC,WAAY,EACZC,WAAY,EACZC,UAAW,EACXC,aAAc,EACdC,YAAa,EACbC,aAAc,EACdC,YAAa,KAInB,CACEnN,KAAM,UACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJC,YAAa,EACbC,WAAY,GACZC,WAAY,GACZC,UAAW,GACXC,aAAc,EACdC,YAAa,EACbC,aAAc,EACdC,YAAa,IAGjBC,IAAK,CACHb,KAAM,YACN/R,KAAM,WACNgS,MAAO,IACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJC,YAAa,EACbC,WAAY,GACZC,WAAY,EACZC,UAAW,EACXC,aAAc,IACdC,YAAa,EACbC,aAAc,EACdC,YAAa,KAInB,CACEnN,KAAM,iBACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,WACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,EACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,IACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,IACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,GACZD,YAAa,IACbG,UAAW,EACXD,WAAY,IACZG,YAAa,EACbD,aAAc,IACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,QACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,GACZD,YAAa,EACbG,UAAW,EACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,IACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,WACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,GACZD,YAAa,IACbG,UAAW,EACXD,WAAY,IACZG,YAAa,EACbD,aAAc,IACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,QACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,WACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,KACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,GACZD,YAAa,IACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,OACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,GACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,KACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,GACZD,YAAa,IACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,OACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,KACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,GACZD,YAAa,IACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,SACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,EACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,IACZD,YAAa,IACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,UACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,EACXD,WAAY,GACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,IACbG,UAAW,GACXD,WAAY,GACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,YACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,EACXD,WAAY,GACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,KACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,IACbG,UAAW,GACXD,WAAY,GACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,aACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,GACPC,SAAU,MACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,IACPC,SAAU,IACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,GACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,KAIpB,CACElN,KAAM,WACN+L,KAAM,EACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,GACPC,SAAU,MACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,IACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,IAGlBE,IAAK,CACHb,KAAM,MACN/R,KAAM,OACNgS,MAAO,IACPC,SAAU,IACVC,MAAO,EACPC,KAAM,CACJE,WAAY,EACZD,YAAa,EACbG,UAAW,IACXD,WAAY,EACZG,YAAa,EACbD,aAAc,EACdG,YAAa,EACbD,aAAc,MCtaTG,GAAb,WAqBE,aAAsB,0BApBLjC,aAoBI,OAlBJW,UAkBI,OAhBJO,SAgBI,OAdJc,SAcI,OAZJE,aAYI,OAVJC,aAUI,OARJC,iBAQI,OANJC,iBAMI,OAJJC,cAII,OAFbC,YAEa,EAEnB5Z,KAAKqX,QAAU,IAAIE,aACnBvX,KAAKqX,QAAQI,SAGbzX,KAAK2Z,SAAW3Z,KAAKqX,QAAQwC,iBAC7B7Z,KAAK2Z,SAASG,QAAU,IAGxB9Z,KAAKuY,IAAMvY,KAAKqX,QAAQO,mBACxB5X,KAAKqZ,IAAMrZ,KAAKqX,QAAQO,mBAGxB5X,KAAKuZ,QAAUvZ,KAAKqX,QAAQU,aAC5B/X,KAAKwZ,QAAUxZ,KAAKqX,QAAQU,aAG5B/X,KAAKyZ,YAAczZ,KAAKqX,QAAQU,aAChC/X,KAAK0Z,YAAc1Z,KAAKqX,QAAQU,aAGhC/X,KAAKgY,KAAOhY,KAAKqX,QAAQU,aAGzB/X,KAAKuY,IAAIJ,QAAQnY,KAAKuZ,SACtBvZ,KAAKuY,IAAIJ,QAAQnY,KAAKyZ,aACtBzZ,KAAKqZ,IAAIlB,QAAQnY,KAAKwZ,SACtBxZ,KAAKqZ,IAAIlB,QAAQnY,KAAK0Z,aACtB1Z,KAAKgY,KAAKG,QAAQnY,KAAKqX,QAAQM,aAC/B3X,KAAKgY,KAAKG,QAAQnY,KAAK2Z,UAGvB3Z,KAAKuY,IAAIlZ,QACTW,KAAKqZ,IAAIha,QAGTW,KAAK4Z,OAAStB,GAAe,GAC7BtY,KAAK+Z,iBAAiB/Z,KAAK4Z,QA3D/B,kDA8DE,SAAqBI,GACnB,IAAMJ,EAAStB,GAAe0B,GAEzBJ,GAIL5Z,KAAK+Z,iBAAiBH,KArE1B,8BAwEE,SAAwBA,GAQtB,GANA5Z,KAAK4Z,OAASA,EAGd5Z,KAAKgY,KAAKA,KAAKhN,MAAQ4O,EAAO5B,KAGN,WAApB4B,EAAOrB,IAAI9R,MAAqBmT,EAAOrB,IAAI0B,OAAQ,CACrD,IAAMC,EAAOla,KAAKqX,QAAQ8C,mBACxBP,EAAOrB,IAAI0B,OAAOG,KAClBR,EAAOrB,IAAI0B,OAAOI,MAEpBra,KAAKuY,IAAI+B,gBAAgBJ,QAEzBla,KAAKuY,IAAI9R,KAAOmT,EAAOrB,IAAI9R,KAG7B,GAAwB,WAApBmT,EAAOP,IAAI5S,MAAqBmT,EAAOP,IAAIY,OAAQ,CACrD,IAAMC,EAAOla,KAAKqX,QAAQ8C,mBACxBP,EAAOP,IAAIY,OAAOG,KAClBR,EAAOP,IAAIY,OAAOI,MAEpBra,KAAKqZ,IAAIiB,gBAAgBJ,QAEzBla,KAAKqZ,IAAI5S,KAAOmT,EAAOP,IAAI5S,KAuB7B,OAnBAzG,KAAKuZ,QAAQvB,KAAKhN,MAAQ,EAC1BhL,KAAKwZ,QAAQxB,KAAKhN,MAAQ,EAG1BhL,KAAKyZ,YAAYc,aACjBva,KAAK0Z,YAAYa,aAEjBva,KAAKyZ,YAAYzB,KAAKhN,MAAQ4O,EAAOrB,IAAIG,SACzC1Y,KAAK0Z,YAAY1B,KAAKhN,MAAQ4O,EAAOP,IAAIX,SAErCkB,EAAOrB,IAAIG,SAAW,GACxB1Y,KAAKyZ,YAAYtB,QAAQnY,KAAKuY,IAAI9C,WAEhCmE,EAAOP,IAAIX,SAAW,GACxB1Y,KAAK0Z,YAAYvB,QAAQnY,KAAKqZ,IAAI5D,WAIpCzV,KAAKuZ,QAAQgB,aACLX,EAAOrB,IAAIC,MACjB,IAAK,MACHxY,KAAKuZ,QAAQpB,QAAQnY,KAAKqZ,IAAI5D,WAC9B,MACF,IAAK,MACHzV,KAAKuZ,QAAQpB,QAAQnY,KAAKgY,MAQ9B,OADAhY,KAAKwZ,QAAQe,aACLX,EAAOP,IAAIb,MACjB,IAAK,MACHxY,KAAKwZ,QAAQrB,QAAQnY,KAAKuY,IAAI9C,WAC9B,MACF,IAAK,MACHzV,KAAKwZ,QAAQrB,QAAQnY,KAAKgY,SA1IlC,kBAiJE,SAAY/E,GAEVjT,KAAKuY,IAAI9C,UAAUzK,MAAQiI,EAAOjT,KAAK4Z,OAAOrB,IAAIE,MAClDzY,KAAKqZ,IAAI5D,UAAUzK,MAAQiI,EAAOjT,KAAK4Z,OAAOP,IAAIZ,MAElD,IAAM+B,EAAMxa,KAAKqX,QAAQoD,YAGzBza,KAAKuZ,QAAQvB,KAAK0C,sBAAsB,GACxC1a,KAAKuZ,QAAQvB,KAAK2C,eAAe,EAAGH,GACpCxa,KAAKuZ,QAAQvB,KAAK4C,wBAChB5a,KAAK4Z,OAAOrB,IAAIK,KAAKC,YAAc7Y,KAAK4Z,OAAOrB,IAAII,MACnD6B,EAAMxa,KAAK4Z,OAAOrB,IAAIK,KAAKE,YAE7B9Y,KAAKuZ,QAAQvB,KAAK4C,wBAChB5a,KAAK4Z,OAAOrB,IAAIK,KAAKG,WAAa/Y,KAAK4Z,OAAOrB,IAAII,MAClD6B,EAAMxa,KAAK4Z,OAAOrB,IAAIK,KAAKE,WAAa9Y,KAAK4Z,OAAOrB,IAAIK,KAAKI,WAE/DhZ,KAAKuZ,QAAQvB,KAAK4C,wBAChB5a,KAAK4Z,OAAOrB,IAAIK,KAAKK,aAAejZ,KAAK4Z,OAAOrB,IAAII,MACpD6B,EACExa,KAAK4Z,OAAOrB,IAAIK,KAAKE,WACrB9Y,KAAK4Z,OAAOrB,IAAIK,KAAKI,UACrBhZ,KAAK4Z,OAAOrB,IAAIK,KAAKM,aAIzBlZ,KAAKwZ,QAAQxB,KAAK0C,sBAAsB,GACxC1a,KAAKwZ,QAAQxB,KAAK2C,eAAe,EAAGH,GACpCxa,KAAKwZ,QAAQxB,KAAK4C,wBAChB5a,KAAK4Z,OAAOP,IAAIT,KAAKC,YAAc7Y,KAAK4Z,OAAOP,IAAIV,MACnD6B,EAAMxa,KAAK4Z,OAAOP,IAAIT,KAAKE,YAE7B9Y,KAAKwZ,QAAQxB,KAAK4C,wBAChB5a,KAAK4Z,OAAOP,IAAIT,KAAKG,WAAa/Y,KAAK4Z,OAAOP,IAAIV,MAClD6B,EAAMxa,KAAK4Z,OAAOP,IAAIT,KAAKE,WAAa9Y,KAAK4Z,OAAOP,IAAIT,KAAKI,WAE/DhZ,KAAKwZ,QAAQxB,KAAK4C,wBAChB5a,KAAK4Z,OAAOP,IAAIT,KAAKK,aAAejZ,KAAK4Z,OAAOP,IAAIV,MACpD6B,EACExa,KAAK4Z,OAAOP,IAAIT,KAAKE,WACrB9Y,KAAK4Z,OAAOP,IAAIT,KAAKI,UACrBhZ,KAAK4Z,OAAOP,IAAIT,KAAKM,eA3L7B,kBA+LE,WACE,IAAMsB,EAAMxa,KAAKqX,QAAQoD,YAGzBza,KAAKuZ,QAAQvB,KAAK0C,sBAAsB,GACxC1a,KAAKuZ,QAAQvB,KAAK2C,eAAe3a,KAAKuZ,QAAQvB,KAAKhN,MAAOwP,GAC1Dxa,KAAKuZ,QAAQvB,KAAK4C,wBAChB5a,KAAK4Z,OAAOrB,IAAIK,KAAKO,aAAenZ,KAAK4Z,OAAOrB,IAAII,MACpD6B,EAAMxa,KAAK4Z,OAAOrB,IAAIK,KAAKQ,aAI7BpZ,KAAKwZ,QAAQxB,KAAK0C,sBAAsB,GACxC1a,KAAKwZ,QAAQxB,KAAK2C,eAAe3a,KAAKwZ,QAAQxB,KAAKhN,MAAOwP,GAC1Dxa,KAAKwZ,QAAQxB,KAAK4C,wBAChB5a,KAAK4Z,OAAOP,IAAIT,KAAKO,aAAenZ,KAAK4Z,OAAOP,IAAIV,MACpD6B,EAAMxa,KAAK4Z,OAAOP,IAAIT,KAAKQ,eA/MjC,qBAmNE,WACEpZ,KAAKuY,IAAIgC,aACTva,KAAKqZ,IAAIkB,aACTva,KAAKuZ,QAAQgB,aACbva,KAAKwZ,QAAQe,aACbva,KAAKyZ,YAAYc,aACjBva,KAAK0Z,YAAYa,aACjBva,KAAKgY,KAAKuC,aACiB,WAAvBva,KAAKqX,QAAQwD,QACf7a,KAAKqX,QAAQG,QACbxX,KAAKuY,IAAI9Y,OACTO,KAAKqZ,IAAI5Z,UA9Nf,yBAkOE,WACE,OAAOO,KAAK2Z,aAnOhB,KC/BamB,GAAsD,SAAC,GAE7D,IADLnB,EACI,EADJA,SAEMoB,EAAS9Q,SAAgC,MACzC+Q,EAAY/Q,SAA6B,MAF3C,EAGsBA,WAAe,GAHrC,mBAGG0E,EAHH,KAGUsM,EAHV,KAoEJ,OA/DAhR,aAAgB,WACV+Q,EAAUrH,SACZsH,EAASD,EAAUrH,QAAQC,eAE5B,CAACoH,IAEJ/Q,aAAgB,WACd,IA+CMiR,EA/CS,SAATC,IACJ,GAAKJ,EAAOpH,QAAZ,CAIA,IAAMyH,EAAML,EAAOpH,QAAQ0H,WAAW,MACtC,GAAKD,EAAL,CAWA,GANAA,EAAIE,UAAY,eAChBF,EAAIG,SAAS,EAAG,EAAGR,EAAOpH,QAAQhF,MAAOoM,EAAOpH,QAAQ1G,QACxDmO,EAAII,UAAY,EAChBJ,EAAIK,YAAc,qBAClBL,EAAIM,aAEC/B,EAIH,OAHAyB,EAAIO,OAAO,EAAGZ,EAAOpH,QAAQ1G,OAAS,GACtCmO,EAAIQ,OAAOb,EAAOpH,QAAQhF,MAAOoM,EAAOpH,QAAQ1G,OAAS,QACzDmO,EAAIS,SAIN,IAAMC,EAAenC,EAASoC,kBACxBC,EAAY,IAAIC,WAAWH,GACjCnC,EAASuC,sBAAsBF,GAI/B,IAFA,IAAMG,EAAqC,EAAvBpB,EAAOpH,QAAQhF,MAAemN,EAC9Cnc,EAAI,EACC+J,EAAI,EAAGA,EAAIsS,EAAU3H,OAAQ3K,IAAK,CACzC,IACM9J,EADIoc,EAAUtS,GAAK,IACVqR,EAAOpH,QAAQ1G,OAAU,EAE9B,IAANvD,EACF0R,EAAIO,OAAOhc,EAAGC,GAEdwb,EAAIQ,OAAOjc,EAAGC,GAGhBD,GAAKwc,EAIP,OAFAf,EAAIQ,OAAOb,EAAOpH,QAAQhF,MAAOoM,EAAOpH,QAAQ1G,OAAS,GACzDmO,EAAIS,SACGO,sBAAsBjB,KAGbA,GAElB,OAAO,WACDD,GACFmB,qBAAqBnB,MAGxB,CAACvB,EAAUoB,EAAQpM,IAGpB,qBAAKmF,IAAKkH,EAAWnN,MAAO,CAAEc,MAAO,QAArC,SACE,wBAAQA,MAAOA,EAAO1B,OAAQ,IAAK6G,IAAKiH,OCrDjCuB,GAAmD,WAAO,IAAD,EACtCrS,IAAMC,SAAyB,MADO,mBAC7DqS,EAD6D,KACpDC,EADoD,OAExCvS,IAAMC,SAAmBoO,GAAe,IAFA,mBAE7DsB,EAF6D,KAErD6C,EAFqD,OAGxCxS,IAAMC,UAAS,GAHyB,mBAG7DwS,EAH6D,KAGrDC,EAHqD,OAIhC1S,IAAMC,SAAS,IAJiB,mBAI7D0S,EAJ6D,KAIjDC,EAJiD,OAK9B5S,IAAMC,SAAS,IALe,mBAK7D4S,EAL6D,KAKhDC,EALgD,KAO9DhK,EAAW,SAACtJ,GAChB,GAAK8S,EAAL,CAIAA,EAAQxC,iBAAiBH,GACzB,IAAMoD,EAAWvT,EAAM0G,cAAc8M,wBAC/BhK,EAAO9B,GACX1H,EAAMyT,QAAUF,EAASrd,EACzB,EACAqd,EAASrO,MACT,GACA,KAEF4N,EAAQY,KAAKlK,QAZXuJ,EAAW,IAAIlD,KAeb8D,EAAW,WACVb,GAILA,EAAQ9c,QAOJ4d,EAAU,yCAAG,uBAAA7a,EAAA,sEACX8a,UAAUC,UAAUC,UAAUC,KAAKC,KAAKC,UAAU/D,KADvC,OAEjB+C,GAAU,GACVnT,YAAW,WACTmT,GAAU,KACT,KALc,2CAAH,qDAgEhB,OACE,mCACE,eAACvP,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,cAACF,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,SACE,cAAC,GAAD,CAAUiQ,GAAG,MAAMhE,OAAQA,EAAQ6C,UAAWA,MAEhD,cAACrP,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,SACE,cAAC,GAAD,CAAUiQ,GAAG,MAAMhE,OAAQA,EAAQ6C,UAAWA,MAGhD,cAACrP,EAAA,EAAD,CAAMM,GAAI,GAAIC,MAAI,EAAlB,SACE,eAACI,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAYE,QAAQ,KAApB,0BAEF,eAAC+F,GAAA,EAAD,WACE,cAAC3I,EAAA,EAAD,CACEkS,YAAa9K,EACb+K,UAAWV,EACX7O,QAAQ,WACR3C,MAAM,UACNL,WAAS,EALX,kBAUA,cAACI,EAAA,EAAD,CACEE,QAASkH,EACTxE,QAAQ,WACR3C,MAAM,UACNL,WAAS,EAJX,kBASA,cAACI,EAAA,EAAD,CACEE,QAASuR,EACT7O,QAAQ,WACR3C,MAAM,UACNL,WAAS,EAJX,kBASA,cAACI,EAAA,EAAD,CACEE,QAjHA,WACZ4Q,EAAUnE,GAAe,KAiHb/J,QAAQ,WACR3C,MAAM,UACNL,WAAS,EAJX,sBASF,cAAC,GAAD,CAAcoO,SAAQ,OAAE4C,QAAF,IAAEA,OAAF,EAAEA,EAASwB,qBAIrC,cAAC3Q,EAAA,EAAD,CAAMM,GAAI,GAAIC,MAAI,EAAlB,SACE,eAACI,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAYE,QAAQ,KAApB,uBAEF,cAAC+F,GAAA,EAAD,UACE,eAAC0J,GAAA,EAAD,CACEzP,QAAQ,WACRV,MAAO,CAAEoQ,aAAc,IACvBhT,SAAU,SAACxB,GACyB,kBAAvBA,EAAM0B,OAAOH,OACtByR,EAAUnE,GAAe7O,EAAM0B,OAAOH,SAG1CkT,aAAc,EACd3S,WAAS,EACTH,YAAY,kBACZQ,MAAM,UAXR,UAaE,cAACqF,EAAA,EAAD,CAAUjG,OAAQ,EAAGQ,UAAQ,EAA7B,6BAGC8M,GAAe7K,KAAI,SAACmM,EAAQvG,GAAT,aAClB,cAACpC,EAAA,EAAD,CAAUjG,MAAOqI,EAAjB,mBACGuG,EAAO3N,YADV,yBAC4BoH,IADCA,gBASvC,cAACjG,EAAA,EAAD,CAAMM,GAAI,GAAIC,MAAI,EAAlB,SACE,eAACI,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAYE,QAAQ,KAApB,qBAEF,cAAC+F,GAAA,EAAD,UACE,cAAC3I,EAAA,EAAD,CACEE,QAASwR,EACT9O,QAAQ,WACR3C,MAAO8Q,EAAS,YAAc,UAC9BnR,WAAS,EAJX,SAMGmR,EAAS,UAAY,kBAG1B,eAACpI,GAAA,EAAD,WACE,cAACzJ,EAAA,EAAD,CACE0D,QAAQ,WACR3C,MAAM,UACNL,WAAS,EACT9E,KAAK,OACLwE,SAtKa,SACzBxB,GAEAoT,EAAcpT,EAAM0B,OAAOH,UAqKjB,cAACW,EAAA,EAAD,CACEE,QAnKK,WACjB,IACE,IAAMsS,EAAST,KAAKU,MAAMC,KAAKzB,IAEzB0B,EAAWC,KACP,CACN9X,KAAM8X,OAEHC,MAAM,CAAC,WAAY,OAAQ,SAAU,aACrCC,WACHjG,KAAM+F,OAEHC,MAAM,CAAC,MAAO,MAAO,MAAO,cAC5BC,WACHhG,MAAO8F,OAAaE,WACpB/F,SAAU6F,OAAaE,WACvB9F,MAAO4F,OAAaE,WACpB7F,KAAM2F,KACI,CACN1F,YAAa0F,OAAaE,WAC1B3F,WAAYyF,OAAaE,WACzB1F,WAAYwF,OAAaE,WACzBzF,UAAWuF,OAAaE,WACxBxF,aAAcsF,OAAaE,WAC3BvF,YAAaqF,OAAaE,WAC1BtF,aAAcoF,OAAaE,WAC3BrF,YAAamF,OAAaE,aAE3BA,aAEJA,WAUGC,EARSH,KACL,CACNvG,KAAMuG,OAAaE,WACnBlG,IAAK+F,EACLjF,IAAKiF,IAENG,WAEgBE,aAAaR,GAChC1B,EAAUiC,GACV,MAAOE,GACP7B,EAAe,kBAEjBvT,YAAW,WACTuT,EAAe,MACd,MAqHSxO,QAAQ,WACRhD,WAAS,EACTK,MAAOkR,EAAc,YAAc,UAJrC,SAMGA,GAA4B,8BAUvC+B,GAID,SAAC,GAA+B,IAA7BjF,EAA4B,EAA5BA,OAAQ6C,EAAoB,EAApBA,UAAWmB,EAAS,EAATA,GACzB,OACE,cAAC7P,EAAA,EAAD,UACE,eAACK,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYE,QAAQ,KAAKD,cAAY,EAArC,SACU,QAAPsP,EAAe,aAAe,eAGjC,cAACkB,GAAA,EAAD,wBACA,eAACd,GAAA,EAAD,CACEnQ,MAAO,CAAEoQ,aAAc,IACvBjT,MAAO4O,EAAOgE,GAAInX,KAClBwE,SAAU,SACRxB,GAIA,IAAMhD,EAAOgD,EAAM0B,OAAOH,MAK1ByR,EAAU,6BAAK7C,GAAN,mBAAegE,EAAf,aAAC,gBAAwBhE,EAAOgE,IAAhC,IAAqCnX,aAEhD8E,WAAS,EAfX,UAiBE,cAAC0F,EAAA,EAAD,CAAUjG,MAAM,OAAhB,kBACA,cAACiG,EAAA,EAAD,CAAUjG,MAAM,WAAhB,sBACA,cAACiG,EAAA,EAAD,CAAUjG,MAAM,WAAhB,sBACA,cAACiG,EAAA,EAAD,CAAUjG,MAAM,SAAhB,uBAGF,cAAC8T,GAAA,EAAD,0BACA,eAACd,GAAA,EAAD,CACEnQ,MAAO,CAAEoQ,aAAc,IACvBjT,MAAO4O,EAAOgE,GAAIpF,KAClBvN,SAAU,SACRxB,GAIA,IAAM+O,EAAO/O,EAAM0B,OAAOH,MAK1ByR,EAAU,6BAAK7C,GAAN,mBAAegE,EAAf,aAAC,gBAAwBhE,EAAOgE,IAAhC,IAAqCpF,aAEhDjN,WAAS,EAfX,UAiBU,QAAPqS,GAAgB,cAAC3M,EAAA,EAAD,CAAUjG,MAAM,MAAhB,wBACT,QAAP4S,GAAgB,cAAC3M,EAAA,EAAD,CAAUjG,MAAM,MAAhB,wBACjB,cAACiG,EAAA,EAAD,CAAUjG,MAAM,MAAhB,oBACA,cAACiG,EAAA,EAAD,CAAUjG,MAAM,YAAhB,0BAGF,cAAC8T,GAAA,EAAD,oBACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIjF,MAClB1N,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BAAK7C,GAAN,mBAAegE,EAAf,aAAC,gBAAwBhE,EAAOgE,IAAhC,IAAqCjF,MAAO3N,QAGzD4J,IAAK,IACLC,IAAK,EACLC,KAAM,IAGR,cAACgK,GAAA,EAAD,2BACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIjF,MAClB1N,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BAAK7C,GAAN,mBAAegE,EAAf,aAAC,gBAAwBhE,EAAOgE,IAAhC,IAAqCjF,MAAO3N,QAGzD4J,IAAK,EACLC,IAAK,EACLC,KAAM,MAGR,cAACgK,GAAA,EAAD,oBACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAInF,MAClBxN,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BAAK7C,GAAN,mBAAegE,EAAf,aAAC,gBAAwBhE,EAAOgE,IAAhC,IAAqCnF,MAAOzN,QAGzD4J,IAAK,GACLC,IAAK,EACLC,KAAM,MAGR,cAACgK,GAAA,EAAD,wDACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIlF,SAClBzN,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAEGhE,EAAOgE,IAFX,IAEgBlF,SAAU1N,QAIvC4J,IAAK,IACLC,IAAK,EACLC,KAAM,IAGR,cAACzG,EAAA,EAAD,CAAYE,QAAQ,KAAKD,cAAY,EAArC,kBAIA,eAAClB,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,eAACF,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,UACE,cAACmR,GAAA,EAAD,0BACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIhF,KAAKE,WACvB7N,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAGHhE,EAAOgE,IAHL,IAILhF,KAAK,6BAAMgB,EAAOgE,GAAIhF,MAAlB,IAAwBE,WAAY9N,UAKhD4J,IAAK,EACLC,IAAK,EACLC,KAAM,QAGV,eAAC1H,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,UACE,cAACmR,GAAA,EAAD,2BACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIhF,KAAKC,YACvB5N,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAGHhE,EAAOgE,IAHL,IAILhF,KAAK,6BAAMgB,EAAOgE,GAAIhF,MAAlB,IAAwBC,YAAa7N,UAKjD4J,IAAK,EACLC,IAAK,EACLC,KAAM,YAKZ,eAAC1H,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,eAACF,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,UACE,cAACmR,GAAA,EAAD,yBACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIhF,KAAKI,UACvB/N,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAGHhE,EAAOgE,IAHL,IAILhF,KAAK,6BAAMgB,EAAOgE,GAAIhF,MAAlB,IAAwBI,UAAWhO,UAK/C4J,IAAK,EACLC,IAAK,EACLC,KAAM,QAGV,eAAC1H,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,UACE,cAACmR,GAAA,EAAD,0BACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIhF,KAAKG,WACvB9N,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAGHhE,EAAOgE,IAHL,IAILhF,KAAK,6BAAMgB,EAAOgE,GAAIhF,MAAlB,IAAwBG,WAAY/N,UAKhD4J,IAAK,EACLC,IAAK,EACLC,KAAM,YAKZ,eAAC1H,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,eAACF,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,UACE,cAACmR,GAAA,EAAD,2BACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIhF,KAAKM,YACvBjO,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAGHhE,EAAOgE,IAHL,IAILhF,KAAK,6BAAMgB,EAAOgE,GAAIhF,MAAlB,IAAwBM,YAAalO,UAKjD4J,IAAK,EACLC,IAAK,EACLC,KAAM,QAGV,eAAC1H,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,UACE,cAACmR,GAAA,EAAD,4BACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIhF,KAAKK,aACvBhO,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAGHhE,EAAOgE,IAHL,IAILhF,KAAK,6BAAMgB,EAAOgE,GAAIhF,MAAlB,IAAwBK,aAAcjO,UAKlD4J,IAAK,EACLC,IAAK,EACLC,KAAM,YAKZ,eAAC1H,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,eAACF,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,UACE,cAACmR,GAAA,EAAD,2BACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIhF,KAAKQ,YACvBnO,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAGHhE,EAAOgE,IAHL,IAILhF,KAAK,6BAAMgB,EAAOgE,GAAIhF,MAAlB,IAAwBQ,YAAapO,UAKjD4J,IAAK,EACLC,IAAK,EACLC,KAAM,QAGV,eAAC1H,EAAA,EAAD,CAAMM,GAAI,EAAGC,MAAI,EAAjB,UACE,cAACmR,GAAA,EAAD,4BACA,cAACpK,GAAA,EAAD,CACEqK,kBAAkB,OAClB/T,MAAO4O,EAAOgE,GAAIhF,KAAKO,aACvBlO,SAAU,SAAC0J,EAAiB3J,GACL,kBAAVA,GACTyR,EAAU,6BACL7C,GADI,mBAENgE,EAFM,aAAC,gBAGHhE,EAAOgE,IAHL,IAILhF,KAAK,6BAAMgB,EAAOgE,GAAIhF,MAAlB,IAAwBO,aAAcnO,UAKlD4J,IAAK,EACLC,IAAK,EACLC,KAAM,kBCnhBdkK,GAA2B,CAC/BhH,KAAM,EACNO,IAAK,CACHE,MAAO,EACPD,KAAM,MACNE,SAAU,EACVC,MAAO,EACPlS,KAAM,OACNmS,KAAM,CACJC,YAAa,EACbC,WAAY,GACZC,WAAY,GACZC,UAAW,GACXC,aAAc,GACdC,YAAa,GACbC,aAAc,EACdC,YAAa,KAGjBC,IAAK,CACHZ,MAAO,EACPD,KAAM,MACNE,SAAU,EACVC,MAAO,IACPlS,KAAM,OACNmS,KAAM,CACJC,YAAa,EACbC,WAAY,GACZC,WAAY,GACZC,UAAW,GACXC,aAAc,GACdC,YAAa,GACbC,aAAc,EACdC,YAAa,MAKN6F,GAA6C,WAAO,IAAD,EAChChV,IAAMC,SAAyB,MADC,mBACvDqS,EADuD,KAC9CC,EAD8C,OAElCvS,IAAMC,SAAmB8U,IAFS,mBAEvDpF,EAFuD,KAE/C6C,EAF+C,KAIxD1J,EAAW,SAACtJ,GAChB,GAAK8S,EAAL,CAIAA,EAAQxC,iBAAiBH,GACzB,IAAMoD,EAAWvT,EAAM0G,cAAc8M,wBAC/BhK,EAAO9B,GACX1H,EAAMyT,QAAUF,EAASrd,EACzB,EACAqd,EAASrO,MACT,GACA,KAEF4N,EAAQY,KAAKlK,QAZXuJ,EAAW,IAAIlD,KAeb8D,EAAW,WACVb,GAILA,EAAQ9c,QAGV,OACE,mCACE,eAAC2N,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,cAACF,EAAA,EAAD,CAAMM,GAAI,GAAIC,MAAI,EAAlB,SACE,eAACI,EAAA,EAAD,WACE,cAACK,EAAA,EAAD,UACE,cAACC,EAAA,EAAD,CAAYE,QAAQ,KAApB,0BAEF,eAAC+F,GAAA,EAAD,WACE,cAAC3I,EAAA,EAAD,CACEkS,YAAa9K,EACb+K,UAAWV,EACX7O,QAAQ,WACR3C,MAAM,UACNL,WAAS,EALX,kBAUA,cAACI,EAAA,EAAD,CACEE,QAASkH,EACTxE,QAAQ,WACR3C,MAAM,UACNL,WAAS,EAJX,kBASA,cAACI,EAAA,EAAD,CACEE,QAASuR,EACT7O,QAAQ,WACR3C,MAAM,UACNL,WAAS,EAJX,0BAYN,cAAC6B,EAAA,EAAD,CAAMM,GAAI,GAAIC,MAAI,EAAlB,SACE,eAACI,EAAA,EAAD,WACE,eAACK,EAAA,EAAD,WACE,cAACC,EAAA,EAAD,CAAYE,QAAQ,KAApB,oBACCqL,EAAOP,IAAIZ,MAAQmB,EAAOrB,IAAIE,QAAU,EACvC,cAACpK,EAAA,EAAD,CAAYE,QAAQ,QAApB,mCAEA,cAACF,EAAA,EAAD,CAAYE,QAAQ,QAApB,wCAGJ,eAAC+F,GAAA,EAAD,WACE,eAAC0J,GAAA,EAAD,CACEzP,QAAQ,WACRV,MAAO,CAAEoQ,aAAc,IACvBhT,SAAU,SAACxB,GACyB,kBAAvBA,EAAM0B,OAAOH,OACtByR,EAAU,6BACL7C,GADI,IAEPrB,IAAI,6BAAMqB,EAAOrB,KAAd,IAAmBE,MAAOhP,EAAM0B,OAAOH,YAIhDA,MAAO4O,EAAOrB,IAAIE,MAClBlN,WAAS,EACTH,YAAY,kBACZQ,MAAM,UAdR,UAgBE,cAACqF,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,kBAGF,eAACgT,GAAA,EAAD,CACEzP,QAAQ,WACRV,MAAO,CAAEoQ,aAAc,IACvBhT,SAAU,SAACxB,GACyB,kBAAvBA,EAAM0B,OAAOH,OACtByR,EAAU,6BACL7C,GADI,IAEPP,IAAI,6BAAMO,EAAOrB,KAAd,IAAmBE,MAAOhP,EAAM0B,OAAOH,YAIhDA,MAAO4O,EAAOP,IAAIZ,MAClBlN,WAAS,EACTH,YAAY,kBACZQ,MAAM,UAdR,UAgBE,cAACqF,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,eACA,cAACiG,EAAA,EAAD,CAAUjG,MAAO,EAAjB,gCCnLHkU,GAKR,SAAC,GAA2C,IAAzCC,EAAwC,EAAxCA,QAASlS,EAA+B,EAA/BA,OAAQmS,EAAuB,EAAvBA,OAAQnU,EAAe,EAAfA,SACzB6I,EAAM7J,IAAM6I,OAA0B,MACtCkI,EAAY/Q,IAAM6I,OAAuB,MAFD,EAIhB7I,IAAMC,UAAS,GAJC,mBAIvCmV,EAJuC,KAI9BC,EAJ8B,OAKRrV,IAAMC,SAAS,GALP,mBAKvCqV,EALuC,KAK1BC,EAL0B,KAO9CvV,IAAMI,WAAU,WACV2Q,EAAUrH,SACZ6L,EAAexE,EAAUrH,QAAQC,eAGlC,CAACoH,IAEJ/Q,IAAMI,WAAU,WAEd,IAmDM6Q,EAnDS,SAATC,IACJ,GAAKrH,EAAIH,QAAT,CAGA,IAAMyH,EAAMtH,EAAIH,QAAQ0H,WAAW,MACnC,GAAKD,EAAL,CALmB,MAUOtH,EAAIH,QAAtB1G,EAVW,EAUXA,OAAQ0B,EAVG,EAUHA,MAGhByM,EAAIE,UAAY,UAChBF,EAAIG,SAAS,EAAG,EAAG5M,EAAO1B,GAG1BmO,EAAIK,YAAc,UAClBL,EAAIM,YACJN,EAAIO,OAAO,EAAG1O,EAAS,GACvBmO,EAAIQ,OAAOjN,EAAO1B,EAAS,GAC3BmO,EAAIS,SAGJ,IAAM4D,EAASF,EAAcJ,EAAU,EACnCxf,EAAI8f,EAuBR,OArBAL,EAAO3L,SAAQ,SAACiM,EAAKrM,GACnB,IAAMzT,EAAIqN,EAAS,EAAIyS,GAAOzS,EAAS,GAGvCmO,EAAIM,YACJN,EAAIO,OAAOhc,EAAGC,GACdwb,EAAIQ,OAAOjc,EAAGsN,EAAS,GACvBmO,EAAIS,SAGJT,EAAIM,YACJN,EAAIE,UAAJ,eAAiC,IAARjI,EAAe+L,EAAO/K,OAA/C,YACQ,IAANqL,EADF,WAGAtE,EAAIuE,QAAQhgB,EAAGC,EAAG6f,EAAS,EAAGA,EAAS,EAAG,EAAG,EAAG,EAAI9hB,KAAKC,IACzDwd,EAAIwE,OAGJjgB,GAAc,EAAT8f,KAGArD,sBAAsBjB,KAGbA,GAElB,OAAO,WACDD,GACFmB,qBAAqBnB,MAGxB,CAACqE,EAAaH,EAAQD,EAASlS,IAElC,IAAM4S,EAAe,SACnBpW,EACA4V,GAEA,GAAKA,EAAL,CAKA,IAAMrC,EAAWvT,EAAM0G,cAAc8M,wBAC/Btd,EAAIhC,KAAKmiB,OACZrW,EAAMyT,QAAUF,EAASrd,IAAMwf,EAAUI,IAGtC3f,IAAO,GADI6J,EAAMsW,QAAU/C,EAASpd,GACbqN,EAAS,GAGhC+S,EAAMZ,EAAOa,WAAW,EAAG,GACX,kBAAXD,EAAIrgB,KACbqgB,EAAIrgB,GAAKC,GAEXqL,EAAS+U,KAGLE,EAAgB,WACpBZ,GAAW,IAUb,OACE,qBAAKxL,IAAKkH,EAAWnN,MAAO,CAAEc,MAAO,QAArC,SACE,wBACEA,MAAO4Q,EACPtS,OAAQA,EACR4Q,YAZkB,SACtBpU,GAEA6V,GAAW,GACXO,EAAapW,GAAO,IAShBqU,UAAWoC,EACXC,aAAcD,EACdlM,YAAa,SAACvK,GAAD,OAAWoW,EAAapW,EAAO4V,IAC5CvL,IAAKA,OC5GPkL,GAA2B,CAC/B/S,KAAM,QACN+L,KAAM,GACNO,IAAK,CACHC,KAAM,MACN/R,KAAM,OACNgS,MAAO,EACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJC,YAAa,EACbC,WAAY,EACZC,WAAY,EACZC,UAAW,EACXC,aAAc,EACdC,YAAa,EACbC,aAAc,EACdC,YAAa,IAGjBC,IAAK,CACHb,KAAM,YACN/R,KAAM,OACNgS,MAAO,GACPC,SAAU,EACVC,MAAO,EACPC,KAAM,CACJC,YAAa,EACbC,WAAY,EACZC,WAAY,EACZC,UAAW,EACXC,aAAc,EACdC,YAAa,EACbC,aAAc,EACdC,YAAa,KAmDNgH,GAA8C,WAAO,IAAD,EACnCnW,IAAMC,SAAS,CACzCkQ,KAAM,IAAI/V,aAzFU,IA0FpBgW,KAAM,IAAIhW,aA1FU,MAuFyC,mBACxD+a,EADwD,KAChDiB,EADgD,OAKjCpW,IAAMC,SAAyB,MALE,mBAKxDqS,EALwD,KAK/CC,EAL+C,OAMvCvS,IAAMC,SAAS,KANwB,mBAMxD+I,EANwD,KAMlDqN,EANkD,KAQ/DrW,IAAMI,WAAU,WAEd,IAAMkW,EAAmB,6BACpBvB,IADoB,IAEvBzG,IAAI,6BACCyG,GAAezG,KADjB,IAED9R,KAAM,SACNwT,OAAQmF,MAIR7C,IACFA,EAAQxC,iBAAiBwG,GACzBhE,EAAQY,KAAKlK,MAEd,CAACmM,EAAQnM,EAAMsJ,IAsBlB,OACE,eAACxO,EAAA,EAAD,WACE,cAACM,EAAA,EAAD,CAAYE,QAAQ,KAApB,4BACA,cAAC,GAAD,CACEtB,OAzIc,IA0IdkS,QAASC,EAAOhF,KAAK/F,OACrB+K,OAAQA,EAAOhF,KACfnP,SAAU,SAACmP,GACTiG,EAAU,6BAAKjB,GAAN,IAAchF,aAG3B,cAAC/L,EAAA,EAAD,CAAYE,QAAQ,KAApB,iCACA,cAAC,GAAD,CACEtB,OAlJc,IAmJdkS,QAASC,EAAO/E,KAAKhG,OACrB+K,OAAQA,EAAO/E,KACfpP,SAAU,SAACoP,GACTgG,EAAU,6BAAKjB,GAAN,IAAc/E,aAG3B,cAAC,GAAD,CAAcV,SAAQ,OAAE4C,QAAF,IAAEA,OAAF,EAAEA,EAASwB,gBACjC,eAACzJ,GAAA,EAAD,WACE,cAAC3I,EAAA,EAAD,CACEE,QA7BW,WACZ0Q,GACHC,EAAW,IAAIlD,KA4BX/K,QAAQ,WACR3C,MAAM,UACNL,WAAS,EAJX,mBASA,cAACI,EAAA,EAAD,CAAQE,QAnDG,WACV0Q,GAGLA,EAAQ9c,QA+CuB8O,QAAQ,WAAW3C,MAAM,UAAUL,WAAS,EAAvE,kBAIA,cAACI,EAAA,EAAD,CAAQE,QAhDA,WACZwU,EAAU,CACRjG,KAAM,IAAI/V,aAAa+a,EAAOhF,KAAK/F,QACnCgG,KAAM,IAAIhW,aAAa+a,EAAOhF,KAAK/F,WA6CT9F,QAAQ,WAAW3C,MAAM,UAAUL,WAAS,EAApE,sBAIF,eAAC+I,GAAA,EAAD,WACE,cAACjG,EAAA,EAAD,CAAYE,QAAQ,QAApB,uBACA,cAACmG,GAAA,EAAD,CACE1J,MAAOiI,EACPhI,SAAU,SAAC0J,EAAQ3J,GACI,kBAAVA,GACTsV,EAAQtV,IAGZ4J,IAAK,IACLC,IAAK,GACLC,KAAM,EACNiK,kBAAkB,YAGtB,eAACzK,GAAA,EAAD,WACE,cAACjG,EAAA,EAAD,CAAYE,QAAQ,QAApB,qBACA,cAACmG,GAAA,EAAD,CACE1J,MAAOoU,EAAOhF,KAAK/F,OACnBpJ,SAAU,SAAC0J,EAAQ3J,GACjB,GAAqB,kBAAVA,EACT,GAAIoU,EAAOhF,KAAK/F,OAASrJ,EAAO,CAC9B,IAAMoP,EAAOgF,EAAOhF,KAAKoG,MAAM,EAAGxV,GAC5BqP,EAAO+E,EAAO/E,KAAKmG,MAAM,EAAGxV,GAClCqV,EAAU,CACRjG,OACAC,aAEG,CACL,IAAMD,EAAO,IAAI/V,aAAa2G,GACxBqP,EAAO,IAAIhW,aAAa2G,GAC9BoU,EAAOhF,KAAK3G,SAAQ,SAACiM,EAAKhW,GAAN,OAAa0Q,EAAK1Q,GAAKgW,KAC3CN,EAAO/E,KAAK5G,SAAQ,SAACiM,EAAKhW,GAAN,OAAa2Q,EAAK3Q,GAAKgW,KAC3CW,EAAU,CACRjG,OACAC,WAKRzF,IAAK,GACLC,IAAK,EACLC,KAAM,EACNiK,kBAAkB,YAGtB,cAACzK,GAAA,EAAD,UACE,eAAC0J,GAAA,EAAD,CACEzP,QAAQ,WACRV,MAAO,CAAEoQ,aAAc,IACvBhT,SAAU,SAACxB,GACT,IAAMhD,EAAOgD,EAAM0B,OAAOH,MAM1BqV,EA3La,SACvB5Z,EACAiM,GAKA,IAHA,IAAM0H,EAAO,IAAI/V,aAAaqO,GACxB2H,EAAO,IAAIhW,aAAaqO,GAErBhJ,EAAI,EAAGA,EAAIgJ,EAAMhJ,IACxB,OAAQjD,GACN,IAAK,SACCiD,EAAI,IACN0Q,EAAK1Q,GAAM,GAAKA,EAAI/L,KAAKC,IAAOD,KAAK2D,IAAKoI,EAAI/L,KAAKC,GAAM,IAE3D,MACF,IAAK,WACC8L,EAAI,IACN0Q,EAAK1Q,GAAK,EAAI/L,KAAK8iB,IAAI/W,EAAI/L,KAAKC,GAAI,IAEtC,MACF,IAAK,WACC8L,EAAI,IACN2Q,EAAK3Q,GAAK,GAAKA,EAAI/L,KAAKC,KAE1B,MACF,IAAK,YAEDwc,EAAK1Q,GADG,IAANA,EACQ,EAAI/L,KAAKC,IAER,GAAKD,KAAKC,IAAM,EAAID,KAAK8iB,IAAI9iB,KAAKC,GAAI,GAAK,IAExD,MACF,IAAK,SACO,IAAN8L,EACF0Q,EAAK1Q,GAAK,EAAI/L,KAAKC,GACJ,IAAN8L,IACT0Q,EAAK1Q,GAAK,GAQlB,MAAO,CAAE0Q,OAAMC,QAgJKqG,CAAiBja,EAAM2Y,EAAOhF,KAAK/F,UAE/C6J,aAAa,GACb3S,WAAS,EACTH,YAAY,kBACZQ,MAAM,UAfR,UAiBE,cAACqF,EAAA,EAAD,CAAUjG,MAAM,GAAGQ,UAAQ,EAA3B,6BAGA,cAACyF,EAAA,EAAD,CAAUjG,MAAM,SAAhB,oBACA,cAACiG,EAAA,EAAD,CAAUjG,MAAM,WAAhB,sBACA,cAACiG,EAAA,EAAD,CAAUjG,MAAM,WAAhB,sBACA,cAACiG,EAAA,EAAD,CAAUjG,MAAM,YAAhB,uBACA,cAACiG,EAAA,EAAD,CAAUjG,MAAM,SAAhB,6BCtPJ2V,GAAiB,SAACC,GACtB,OAAQA,GACN,IAAK,IACH,OAAO,EACT,IAAK,KACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,KACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,KACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,KACH,OAAO,EACT,IAAK,IACH,OAAO,EACT,IAAK,KACH,OAAO,GACT,IAAK,IACH,OAAO,GACT,IAAK,KACH,OAAO,GACT,QACE,OAAO,IAIPC,GAAe,SAACpa,GACpB,OAAQA,GACN,IAAK,IACH,MAAO,CAAC,EAAG,EAAG,GAChB,IAAK,IACH,MAAO,CAAC,EAAG,EAAG,GAChB,IAAK,MACH,MAAO,CAAC,EAAG,EAAG,GAChB,IAAK,MACH,MAAO,CAAC,EAAG,EAAG,GAChB,IAAK,KACH,MAAO,CAAC,EAAG,EAAG,EAAG,IACnB,IAAK,KACH,MAAO,CAAC,EAAG,EAAG,EAAG,IACnB,IAAK,OACH,MAAO,CAAC,EAAG,EAAG,EAAG,IACnB,IAAK,OACH,MAAO,CAAC,EAAG,EAAG,GAChB,IAAK,OACH,MAAO,CAAC,EAAG,EAAG,GAChB,QACE,MAAO,KC9DAqa,GAAb,WAKE,WAAYC,EAAoB1hB,GAAgB,0BAJ/B2hB,WAI8B,OAFvCrN,aAEuC,EAC7C3T,KAAKghB,MAAQ,GACb,IAAK,IAAItX,EAAI,EAAGA,EAAIqX,EAAO1M,OAAQ3K,IAAK,CACtC,IAAIuX,EAAMF,EAAOrX,GACZ1J,KAAKghB,MAAMC,EAAItN,WAClB3T,KAAKghB,MAAMC,EAAItN,SAAW,IAE5B3T,KAAKghB,MAAMC,EAAItN,SAASpM,KAAK0Z,EAAIC,MAGnClhB,KAAK2T,QAAUtU,EAfnB,yCAkBE,WACE,IAAM8hB,EAAenhB,KAAKghB,MAAMhhB,KAAK2T,SAOrC,OALIwN,IACFnhB,KAAK2T,QACHwN,EAAaxjB,KAAKmiB,MAAMniB,KAAKyjB,SAAWD,EAAa9M,UAGlDrU,KAAK2T,YA1BhB,KCMM0N,GAAY,IAGZC,GAAO,SAACC,GACZ,OAAuC,IAAhC5jB,KAAK8iB,IAAI,GAAIc,EAAO,IAAM,KAGtBC,GAAb,WAmBE,aAAsB,0BAlBLnK,aAkBI,OAhBJW,UAgBI,OAdJyJ,eAcI,OAZJ9H,cAYI,OAVJ+H,eAUI,OARbpO,cAQa,OANb0N,WAMa,OAJJW,WAII,OAFb7M,UAEa,EAEnB9U,KAAKqX,QAAU,IAAIE,aACnBvX,KAAKqX,QAAQI,SAGbzX,KAAKyhB,UAAYzhB,KAAKqX,QAAQuK,kBAC9B5hB,KAAK6hB,iBAAiB,eAGtB7hB,KAAK2Z,SAAW3Z,KAAKqX,QAAQwC,iBAC7B7Z,KAAK2Z,SAASG,QAAU,IAGxB9Z,KAAKgY,KAAOhY,KAAKqX,QAAQU,aACzB/X,KAAKgY,KAAKA,KAAKhN,MAAQ,GAGvBhL,KAAKgY,KAAKG,QAAQnY,KAAKyhB,WACvBzhB,KAAKyhB,UAAUtJ,QAAQnY,KAAKqX,QAAQM,aACpC3X,KAAKgY,KAAKG,QAAQnY,KAAK2Z,UAGvB3Z,KAAK2hB,MAAQ,CACXG,IAAK9hB,KAAKqX,QAAQO,mBAClBmK,QAAS/hB,KAAKqX,QAAQU,aACtBiK,IAAKhiB,KAAKqX,QAAQO,mBAClBqK,OAAQjiB,KAAKqX,QAAQ6K,sBAEvBliB,KAAK2hB,MAAMG,IAAIrb,KAAO,WACtBzG,KAAK2hB,MAAMG,IAAIziB,QACfW,KAAK2hB,MAAMK,IAAI3iB,QACfW,KAAK2hB,MAAMG,IAAI3J,QAAQnY,KAAK2hB,MAAMI,SAClC/hB,KAAK2hB,MAAMK,IAAI7J,QAAQnY,KAAK2hB,MAAMM,OAAOE,KACzCniB,KAAK2hB,MAAMI,QAAQ5J,QAAQnY,KAAK2hB,MAAMM,QACtCjiB,KAAK2hB,MAAMM,OAAO9J,QAAQnY,KAAKgY,MAC/BhY,KAAK2hB,MAAMI,QAAQ/J,KAAKhN,MAAQ,GAChChL,KAAK2hB,MAAMK,IAAIvM,UAAUzK,MAAQ,GAGjChL,KAAK0hB,UAAY,GAEjB,IAAK,IAAIhY,EAAI,EAAGA,EArEH,EAqEiBA,IAAK,CACjC,IAAMkU,EAAe,CACnBkE,IAAK9hB,KAAKqX,QAAQO,mBAClBmK,QAAS/hB,KAAKqX,QAAQU,aACtBiK,IAAKhiB,KAAKqX,QAAQO,mBAClBqK,OAAQjiB,KAAKqX,QAAQ6K,sBAEvBtE,EAAGkE,IAAIziB,QACPue,EAAGoE,IAAI3iB,QACPue,EAAGkE,IAAI3J,QAAQyF,EAAGmE,SAClBnE,EAAGoE,IAAI7J,QAAQyF,EAAGqE,OAAOE,KACzBvE,EAAGmE,QAAQ5J,QAAQyF,EAAGqE,QACtBrE,EAAGqE,OAAO9J,QAAQnY,KAAKgY,MACvB4F,EAAGmE,QAAQ/J,KAAKhN,MAAQ,EACxB4S,EAAGoE,IAAIvM,UAAUzK,MAAQtB,EAAI,EAC7B1J,KAAK0hB,UAAUna,KAAKqW,GAItB5d,KAAKsT,UAAY,EAGjBtT,KAAKghB,MAAQ,IAAIF,GACf,CACE,CACEnN,QAAS,OACTuN,KAAM,QAER,CACEvN,QAAS,OACTuN,KAAM,QAER,CACEvN,QAAS,OACTuN,KAAM,QAER,CACEvN,QAAS,OACTuN,KAAM,QAER,CACEvN,QAAS,OACTuN,KAAM,QAER,CACEvN,QAAS,OACTuN,KAAM,QAER,CACEvN,QAAS,OACTuN,KAAM,SAGV,QAIFlhB,KAAK8U,KAAO,EAtHhB,0CAyHE,YACyB,IAAnB9U,KAAKsT,WACP/V,OAAOmW,cAAc1T,KAAKsT,UAC1BtT,KAAKsT,UAAY,GAEnBtT,KAAKsT,SAAW/V,OAAOgW,YAAYvT,KAAKoiB,OAAOvb,KAAK7G,MAAOqhB,IAC3DrhB,KAAKoiB,WA/HT,oBAkIE,WACE,IAAMC,EAAQriB,KAAKghB,MAAME,OAGnBoB,EFxJc,SAACC,EAAmBF,GAA6B,IAAD,EAClDA,EAAMG,MAAM,KADsC,mBAC/D5B,EAD+D,KAC1Dna,EAD0D,KAGtE,IAAKma,IAAQna,EACX,MAAO,GAGT,IAAIgc,EAAiB5B,GAAapa,GAC9Bic,EAAS/B,GAAeC,GAE5B,OAAO6B,EAAKhV,KAAI,SAACkV,GAAD,OAAOA,EAAI,GAAKJ,EAAYG,KE8I5BE,CAAS,GAAIP,GACrB7H,EAAMxa,KAAKqX,QAAQoD,YAEzBza,KAAK0hB,UAAUjO,SAAQ,SAACmK,EAAIlU,GAAO,IAAD,EAChCkU,EAAGkE,IAAIrM,UAAUiF,sBAAsB,GACvCkD,EAAGkE,IAAIrM,UAAUkF,eAAeiD,EAAGkE,IAAIrM,UAAUzK,MAAOwP,GAExDoD,EAAGkE,IAAIrM,UAAUmF,wBACf0G,GAAI,UAACgB,EAAM5Y,UAAP,QAAa,GACjB8Q,EAAM6G,GAAY,SAKtBrhB,KAAK2hB,MAAMG,IAAIrM,UAAUiF,sBAAsB,GAC/C1a,KAAK8U,MAAQ,EAEb,IAAK,IAAIpL,EAAI,EAAGA,EA7JD,EA6JiBA,IAAK,CAAC,IAAD,EAGD,EAF9BmZ,EAAQ,UAAGP,EAAM3kB,KAAKmiB,MAAMniB,KAAKyjB,SAAWkB,EAAMjO,gBAA1C,QAAsD,EAElE,GAAIrU,KAAK8U,KAhKI,IAgKkB,EAC7B+N,EAAQ,UAAGP,EAAM,UAAT,QAAe,EAEzBxW,QAAQC,IAAI8W,GACZ,IAAM5P,EAAOqO,GAAKuB,EAAW,IAC7B7iB,KAAK2hB,MAAMG,IAAIrM,UAAUkF,eACvB1H,EACAuH,EAAO6G,GAAqC3X,GAIhDoC,QAAQC,IAAIsW,EAAOC,EAAOtiB,KAAK8U,KA3KhB,KAMnB,yBAwKE,WACE,OAAO9U,KAAK2Z,WAzKhB,uEA4KE,WAA+BmJ,GAA/B,+FACuBC,MAAMD,GACxBvjB,MAAK,SAACsW,GAAD,OAAcA,EAASmN,iBAC5BzjB,MAAK,SAACyjB,GAAD,OAAiB,EAAK3L,QAAQ4L,gBAAgBD,MAHxD,OACQE,EADR,OAKEljB,KAAKyhB,UAAUyB,OAASA,EAL1B,gDA5KF,8DCXaC,GAA6C,WAAO,IAAD,EAChClZ,IAAMC,SAA6B,MADH,mBACvDqS,EADuD,KAC9CC,EAD8C,KAe9D,OACE,eAACzO,EAAA,EAAD,WACE,cAACpC,EAAA,EAAD,CAAQE,QAdO,WACjB,IAAK0Q,EAAS,CACZ,IAAM6G,EAAQ,IAAI5B,GAGlB,OAFA4B,EAAM/jB,aACNmd,EAAW4G,GAKb7G,EAAQld,SAKN,SAA8Bkd,EAAU,UAAY,UACpD,cAAC,GAAD,CAAc5C,SAAQ,OAAE4C,QAAF,IAAEA,OAAF,EAAEA,EAASwB,oBCHjCnR,GAAYC,aAAW,iBAAO,CAClCC,KAAM,CACJ4C,SAAU,OAuGC2T,GAnGO,WAAO,IAAD,EACEpZ,IAAMC,SAA2B,MADnC,mBACnBoZ,EADmB,KACXC,EADW,OAEItZ,IAAMC,UAAS,GAFnB,mBAEnBL,EAFmB,KAEV2Z,EAFU,OAGAvZ,IAAMC,SAAS,IAHf,mBAGnBH,EAHmB,KAGZoL,EAHY,OAIUlL,IAAMC,UAAS,GAJzB,mBAInBuZ,EAJmB,KAIPC,EAJO,OAKYzZ,IAAMC,UAAS,GAL3B,mBAKnByZ,EALmB,KAKNC,EALM,KAOpBzW,EAAUP,KAEVgD,EAAe,WACnB8T,GAAc,SAAC5Z,GAAD,OAAWA,MAGrB+Z,EAAmB,WACnBP,GACFA,EAAO9L,QAET+L,EAAU,OAyCNxQ,EAAW,SAACK,GACZkQ,IACFxX,QAAQC,IAAI,gBAAiBqH,GAC7BkQ,EAAOQ,KAAKpG,KAAKC,UAAUvK,MAI/B,OACE,sBAAKpF,UAAWb,EAAQL,KAAMe,MAAO,CAAEkW,WAAY,QAAnD,UACE,cAAC,EAAD,CACEjU,UAAW,kBAAM8T,GAAe,IAChC/T,aAAcgU,EACdjU,aAAcA,EACdzF,IAAG,OAAEmZ,QAAF,IAAEA,OAAF,EAAEA,EAAQnZ,MAEf,cAAC,EAAD,CAAWL,KAAM2Z,EAAY5U,OAAQe,IACrC,cAAC,EAAD,CACE/F,QAASA,EACTD,SAxDmB,SAACO,GAIxB,GAHAqZ,GAAW,GACXrO,EAAS,KAEJ,uLAAmB6O,KAAK7Z,GAG3B,OAFAgL,EAAS,2BACTqO,GAAW,GAIb,IAAMS,EAAK,IAAIC,UAAU/Z,GAEzB8Z,EAAGE,OAAS,SAACC,GACXtY,QAAQC,IAAI,6BAA8BqY,GAC1CZ,GAAW,GACXD,EAAUU,GACVL,GAAe,GACfrmB,OAAOgN,aAAa8Z,QAAQ,SAAUla,IAGxC8Z,EAAGK,QAAU,SAACva,GACZ+B,QAAQC,IAAI,qBAAsBhC,GAClCyZ,GAAW,GACXrO,EAAS,sBAGX8O,EAAGM,QAAU,WACXzY,QAAQC,IAAI,qBACZ8X,KAGFI,EAAGO,UAAY,SAACC,GACO,SAAjBA,EAAQhe,MACVqF,QAAQC,IAAI,cAAgB0Y,EAAQpmB,KAAO,OAwB3CyL,KAAM6Z,EACN5Z,MAAOA,EACPC,QAAS,kBAAM4Z,GAAe,MAEhC,cAACc,EAAA,EAAD,CAAW3X,SAAS,KAApB,SACE,cAAC+I,EAAA,EAAD,CAAK/I,SAAS,KAAK4X,GAAI,EAAvB,SACE,eAAC,IAAD,CAAQC,SAAS,kBAAjB,UACE,cAAC,EAAD,CAAWC,KAAK,MAChB,cAAC,GAAD,CAAUA,KAAK,aAAavS,WAAYS,IACxC,cAAC,GAAD,CAAkB8R,KAAK,qBAAqBvS,WAAYS,IACxD,cAAC,GAAD,CAAiB8R,KAAK,4BACtB,cAAC,GAAD,CAAmBA,KAAK,yBACxB,cAAC,GAAD,CAAaA,KAAK,iBAClB,cAAC,GAAD,CAAcA,KAAK,cACnB,cAAC,GAAD,CAAaA,KAAK,6BC9G9BtnB,OAAOga,aAAeha,OAAOga,cAAiBha,OAAeunB,mBAE7DC,IAAS5J,OACP,eAAC,IAAM6J,WAAP,WACE,cAACC,EAAA,EAAD,IACA,cAAC,GAAD,OAEFC,SAASC,eAAe,W","file":"static/js/main.f3168f59.chunk.js","sourcesContent":["/**\n *\n * FULL TILT\n * http://github.com/richtr/Full-Tilt\n *\n * A standalone DeviceOrientation + DeviceMotion JavaScript library that\n * normalises orientation sensor input, applies relevant screen orientation\n * transforms, returns Euler Angle, Quaternion and Rotation\n * Matrix representations back to web developers and provides conversion\n * between all supported orientation representation types.\n *\n * Copyright: 2014 Rich Tibbett\n * License:   MIT\n *\n */\n\n(function (window) {\n  // Only initialize the FULLTILT API if it is not already attached to the DOM\n  if (window.FULLTILT !== undefined && window.FULLTILT !== null) {\n    return;\n  }\n\n  var M_PI = Math.PI;\n  var M_PI_2 = M_PI / 2;\n  var M_2_PI = 2 * M_PI;\n\n  // Degree to Radian conversion\n  var degToRad = M_PI / 180;\n  var radToDeg = 180 / M_PI;\n\n  // Internal device orientation + motion variables\n  var sensors = {\n    orientation: {\n      active: false,\n      callbacks: [],\n      data: undefined,\n    },\n    motion: {\n      active: false,\n      callbacks: [],\n      data: undefined,\n    },\n  };\n  var screenActive = false;\n\n  // Internal screen orientation variables\n  var hasScreenOrientationAPI =\n    window.screen &&\n    window.screen.orientation &&\n    window.screen.orientation.angle !== undefined &&\n    window.screen.orientation.angle !== null\n      ? true\n      : false;\n  var screenOrientationAngle =\n    (hasScreenOrientationAPI\n      ? window.screen.orientation.angle\n      : window.orientation || 0) * degToRad;\n\n  var SCREEN_ROTATION_90 = M_PI_2,\n    SCREEN_ROTATION_180 = M_PI,\n    SCREEN_ROTATION_270 = M_2_PI / 3,\n    SCREEN_ROTATION_MINUS_90 = -M_PI_2;\n\n  // Math.sign polyfill\n  function sign(x) {\n    x = +x; // convert to a number\n    if (x === 0 || isNaN(x)) return x;\n    return x > 0 ? 1 : -1;\n  }\n\n  ///// Promise-based Sensor Data checker //////\n\n  function SensorCheck(sensorRootObj) {\n    var promise = new Promise(function (resolve, reject) {\n      var runCheck = function (tries) {\n        setTimeout(function () {\n          if (sensorRootObj && sensorRootObj.data) {\n            resolve();\n          } else if (tries >= 20) {\n            reject();\n          } else {\n            runCheck(++tries);\n          }\n        }, 50);\n      };\n\n      runCheck(0);\n    });\n\n    return promise;\n  }\n\n  ////// Internal Event Handlers //////\n\n  function handleScreenOrientationChange() {\n    if (hasScreenOrientationAPI) {\n      screenOrientationAngle =\n        (window.screen.orientation.angle || 0) * degToRad;\n    } else {\n      screenOrientationAngle = (window.orientation || 0) * degToRad;\n    }\n  }\n\n  function handleDeviceOrientationChange(event) {\n    sensors.orientation.data = event;\n\n    // Fire every callback function each time deviceorientation is updated\n    for (var i in sensors.orientation.callbacks) {\n      sensors.orientation.callbacks[i].call(this);\n    }\n  }\n\n  function handleDeviceMotionChange(event) {\n    sensors.motion.data = event;\n\n    // Fire every callback function each time devicemotion is updated\n    for (var i in sensors.motion.callbacks) {\n      sensors.motion.callbacks[i].call(this);\n    }\n  }\n\n  ///// FULLTILT API Root Object /////\n\n  var FULLTILT = {};\n\n  FULLTILT.version = \"0.5.3\";\n\n  ///// FULLTILT API Root Methods /////\n\n  FULLTILT.getDeviceOrientation = function (options) {\n    var promise = new Promise(function (resolve, reject) {\n      var control = new FULLTILT.DeviceOrientation(options);\n\n      control.start();\n\n      var orientationSensorCheck = new SensorCheck(sensors.orientation);\n\n      orientationSensorCheck\n        .then(function () {\n          resolve(control);\n        })\n        .catch(function () {\n          control.stop();\n          reject(\"DeviceOrientation is not supported\");\n        });\n    });\n\n    return promise;\n  };\n\n  FULLTILT.getDeviceMotion = function (options) {\n    var promise = new Promise(function (resolve, reject) {\n      var control = new FULLTILT.DeviceMotion(options);\n\n      control.start();\n\n      var motionSensorCheck = new SensorCheck(sensors.motion);\n\n      motionSensorCheck\n        .then(function () {\n          resolve(control);\n        })\n        .catch(function () {\n          control.stop();\n          reject(\"DeviceMotion is not supported\");\n        });\n    });\n\n    return promise;\n  };\n\n  ////// FULLTILT.Quaternion //////\n\n  FULLTILT.Quaternion = function (x, y, z, w) {\n    var outQuat;\n\n    this.set = function (x, y, z, w) {\n      this.x = x || 0;\n      this.y = y || 0;\n      this.z = z || 0;\n      this.w = w || 1;\n    };\n\n    this.copy = function (quaternion) {\n      this.x = quaternion.x;\n      this.y = quaternion.y;\n      this.z = quaternion.z;\n      this.w = quaternion.w;\n    };\n\n    this.setFromEuler = (function () {\n      var _x, _y, _z;\n      var _x_2, _y_2, _z_2;\n      var cX, cY, cZ, sX, sY, sZ;\n\n      return function (euler) {\n        euler = euler || {};\n\n        _z = (euler.alpha || 0) * degToRad;\n        _x = (euler.beta || 0) * degToRad;\n        _y = (euler.gamma || 0) * degToRad;\n\n        _z_2 = _z / 2;\n        _x_2 = _x / 2;\n        _y_2 = _y / 2;\n\n        cX = Math.cos(_x_2);\n        cY = Math.cos(_y_2);\n        cZ = Math.cos(_z_2);\n        sX = Math.sin(_x_2);\n        sY = Math.sin(_y_2);\n        sZ = Math.sin(_z_2);\n\n        this.set(\n          sX * cY * cZ - cX * sY * sZ, // x\n          cX * sY * cZ + sX * cY * sZ, // y\n          cX * cY * sZ + sX * sY * cZ, // z\n          cX * cY * cZ - sX * sY * sZ // w\n        );\n\n        this.normalize();\n\n        return this;\n      };\n    })();\n\n    this.setFromRotationMatrix = (function () {\n      var R;\n\n      return function (matrix) {\n        R = matrix.elements;\n\n        this.set(\n          0.5 * Math.sqrt(1 + R[0] - R[4] - R[8]) * sign(R[7] - R[5]), // x\n          0.5 * Math.sqrt(1 - R[0] + R[4] - R[8]) * sign(R[2] - R[6]), // y\n          0.5 * Math.sqrt(1 - R[0] - R[4] + R[8]) * sign(R[3] - R[1]), // z\n          0.5 * Math.sqrt(1 + R[0] + R[4] + R[8]) // w\n        );\n\n        return this;\n      };\n    })();\n\n    this.multiply = function (quaternion) {\n      outQuat = FULLTILT.Quaternion.prototype.multiplyQuaternions(\n        this,\n        quaternion\n      );\n      this.copy(outQuat);\n\n      return this;\n    };\n\n    this.rotateX = function (angle) {\n      outQuat = FULLTILT.Quaternion.prototype.rotateByAxisAngle(\n        this,\n        [1, 0, 0],\n        angle\n      );\n      this.copy(outQuat);\n\n      return this;\n    };\n\n    this.rotateY = function (angle) {\n      outQuat = FULLTILT.Quaternion.prototype.rotateByAxisAngle(\n        this,\n        [0, 1, 0],\n        angle\n      );\n      this.copy(outQuat);\n\n      return this;\n    };\n\n    this.rotateZ = function (angle) {\n      outQuat = FULLTILT.Quaternion.prototype.rotateByAxisAngle(\n        this,\n        [0, 0, 1],\n        angle\n      );\n      this.copy(outQuat);\n\n      return this;\n    };\n\n    this.normalize = function () {\n      return FULLTILT.Quaternion.prototype.normalize(this);\n    };\n\n    // Initialize object values\n    this.set(x, y, z, w);\n  };\n\n  FULLTILT.Quaternion.prototype = {\n    constructor: FULLTILT.Quaternion,\n\n    multiplyQuaternions: (function () {\n      var multipliedQuat = new FULLTILT.Quaternion();\n\n      return function (a, b) {\n        var qax = a.x,\n          qay = a.y,\n          qaz = a.z,\n          qaw = a.w;\n        var qbx = b.x,\n          qby = b.y,\n          qbz = b.z,\n          qbw = b.w;\n\n        multipliedQuat.set(\n          qax * qbw + qaw * qbx + qay * qbz - qaz * qby, // x\n          qay * qbw + qaw * qby + qaz * qbx - qax * qbz, // y\n          qaz * qbw + qaw * qbz + qax * qby - qay * qbx, // z\n          qaw * qbw - qax * qbx - qay * qby - qaz * qbz // w\n        );\n\n        return multipliedQuat;\n      };\n    })(),\n\n    normalize: function (q) {\n      var len = Math.sqrt(q.x * q.x + q.y * q.y + q.z * q.z + q.w * q.w);\n\n      if (len === 0) {\n        q.x = 0;\n        q.y = 0;\n        q.z = 0;\n        q.w = 1;\n      } else {\n        len = 1 / len;\n\n        q.x *= len;\n        q.y *= len;\n        q.z *= len;\n        q.w *= len;\n      }\n\n      return q;\n    },\n\n    rotateByAxisAngle: (function () {\n      var outputQuaternion = new FULLTILT.Quaternion();\n      var transformQuaternion = new FULLTILT.Quaternion();\n\n      var halfAngle, sA;\n\n      return function (targetQuaternion, axis, angle) {\n        halfAngle = (angle || 0) / 2;\n        sA = Math.sin(halfAngle);\n\n        transformQuaternion.set(\n          (axis[0] || 0) * sA, // x\n          (axis[1] || 0) * sA, // y\n          (axis[2] || 0) * sA, // z\n          Math.cos(halfAngle) // w\n        );\n\n        // Multiply quaternion by q\n        outputQuaternion = FULLTILT.Quaternion.prototype.multiplyQuaternions(\n          targetQuaternion,\n          transformQuaternion\n        );\n\n        return FULLTILT.Quaternion.prototype.normalize(outputQuaternion);\n      };\n    })(),\n  };\n\n  ////// FULLTILT.RotationMatrix //////\n\n  FULLTILT.RotationMatrix = function (\n    m11,\n    m12,\n    m13,\n    m21,\n    m22,\n    m23,\n    m31,\n    m32,\n    m33\n  ) {\n    var outMatrix;\n\n    this.elements = new Float32Array(9);\n\n    this.identity = function () {\n      this.set(1, 0, 0, 0, 1, 0, 0, 0, 1);\n\n      return this;\n    };\n\n    this.set = function (m11, m12, m13, m21, m22, m23, m31, m32, m33) {\n      this.elements[0] = m11 || 1;\n      this.elements[1] = m12 || 0;\n      this.elements[2] = m13 || 0;\n      this.elements[3] = m21 || 0;\n      this.elements[4] = m22 || 1;\n      this.elements[5] = m23 || 0;\n      this.elements[6] = m31 || 0;\n      this.elements[7] = m32 || 0;\n      this.elements[8] = m33 || 1;\n    };\n\n    this.copy = function (matrix) {\n      this.elements[0] = matrix.elements[0];\n      this.elements[1] = matrix.elements[1];\n      this.elements[2] = matrix.elements[2];\n      this.elements[3] = matrix.elements[3];\n      this.elements[4] = matrix.elements[4];\n      this.elements[5] = matrix.elements[5];\n      this.elements[6] = matrix.elements[6];\n      this.elements[7] = matrix.elements[7];\n      this.elements[8] = matrix.elements[8];\n    };\n\n    this.setFromEuler = (function () {\n      var _x, _y, _z;\n      var cX, cY, cZ, sX, sY, sZ;\n\n      return function (euler) {\n        euler = euler || {};\n\n        _z = (euler.alpha || 0) * degToRad;\n        _x = (euler.beta || 0) * degToRad;\n        _y = (euler.gamma || 0) * degToRad;\n\n        cX = Math.cos(_x);\n        cY = Math.cos(_y);\n        cZ = Math.cos(_z);\n        sX = Math.sin(_x);\n        sY = Math.sin(_y);\n        sZ = Math.sin(_z);\n\n        //\n        // ZXY-ordered rotation matrix construction.\n        //\n\n        this.set(\n          cZ * cY - sZ * sX * sY, // 1,1\n          -cX * sZ, // 1,2\n          cY * sZ * sX + cZ * sY, // 1,3\n\n          cY * sZ + cZ * sX * sY, // 2,1\n          cZ * cX, // 2,2\n          sZ * sY - cZ * cY * sX, // 2,3\n\n          -cX * sY, // 3,1\n          sX, // 3,2\n          cX * cY // 3,3\n        );\n\n        this.normalize();\n\n        return this;\n      };\n    })();\n\n    this.setFromQuaternion = (function () {\n      var sqw, sqx, sqy, sqz;\n\n      return function (q) {\n        sqw = q.w * q.w;\n        sqx = q.x * q.x;\n        sqy = q.y * q.y;\n        sqz = q.z * q.z;\n\n        this.set(\n          sqw + sqx - sqy - sqz, // 1,1\n          2 * (q.x * q.y - q.w * q.z), // 1,2\n          2 * (q.x * q.z + q.w * q.y), // 1,3\n\n          2 * (q.x * q.y + q.w * q.z), // 2,1\n          sqw - sqx + sqy - sqz, // 2,2\n          2 * (q.y * q.z - q.w * q.x), // 2,3\n\n          2 * (q.x * q.z - q.w * q.y), // 3,1\n          2 * (q.y * q.z + q.w * q.x), // 3,2\n          sqw - sqx - sqy + sqz // 3,3\n        );\n\n        return this;\n      };\n    })();\n\n    this.multiply = function (m) {\n      outMatrix = FULLTILT.RotationMatrix.prototype.multiplyMatrices(this, m);\n      this.copy(outMatrix);\n\n      return this;\n    };\n\n    this.rotateX = function (angle) {\n      outMatrix = FULLTILT.RotationMatrix.prototype.rotateByAxisAngle(\n        this,\n        [1, 0, 0],\n        angle\n      );\n      this.copy(outMatrix);\n\n      return this;\n    };\n\n    this.rotateY = function (angle) {\n      outMatrix = FULLTILT.RotationMatrix.prototype.rotateByAxisAngle(\n        this,\n        [0, 1, 0],\n        angle\n      );\n      this.copy(outMatrix);\n\n      return this;\n    };\n\n    this.rotateZ = function (angle) {\n      outMatrix = FULLTILT.RotationMatrix.prototype.rotateByAxisAngle(\n        this,\n        [0, 0, 1],\n        angle\n      );\n      this.copy(outMatrix);\n\n      return this;\n    };\n\n    this.normalize = function () {\n      return FULLTILT.RotationMatrix.prototype.normalize(this);\n    };\n\n    // Initialize object values\n    this.set(m11, m12, m13, m21, m22, m23, m31, m32, m33);\n  };\n\n  FULLTILT.RotationMatrix.prototype = {\n    constructor: FULLTILT.RotationMatrix,\n\n    multiplyMatrices: (function () {\n      var matrix = new FULLTILT.RotationMatrix();\n\n      var aE, bE;\n\n      return function (a, b) {\n        aE = a.elements;\n        bE = b.elements;\n\n        matrix.set(\n          aE[0] * bE[0] + aE[1] * bE[3] + aE[2] * bE[6],\n          aE[0] * bE[1] + aE[1] * bE[4] + aE[2] * bE[7],\n          aE[0] * bE[2] + aE[1] * bE[5] + aE[2] * bE[8],\n\n          aE[3] * bE[0] + aE[4] * bE[3] + aE[5] * bE[6],\n          aE[3] * bE[1] + aE[4] * bE[4] + aE[5] * bE[7],\n          aE[3] * bE[2] + aE[4] * bE[5] + aE[5] * bE[8],\n\n          aE[6] * bE[0] + aE[7] * bE[3] + aE[8] * bE[6],\n          aE[6] * bE[1] + aE[7] * bE[4] + aE[8] * bE[7],\n          aE[6] * bE[2] + aE[7] * bE[5] + aE[8] * bE[8]\n        );\n\n        return matrix;\n      };\n    })(),\n\n    normalize: function (matrix) {\n      var R = matrix.elements;\n\n      // Calculate matrix determinant\n      var determinant =\n        R[0] * R[4] * R[8] -\n        R[0] * R[5] * R[7] -\n        R[1] * R[3] * R[8] +\n        R[1] * R[5] * R[6] +\n        R[2] * R[3] * R[7] -\n        R[2] * R[4] * R[6];\n\n      // Normalize matrix values\n      R[0] /= determinant;\n      R[1] /= determinant;\n      R[2] /= determinant;\n      R[3] /= determinant;\n      R[4] /= determinant;\n      R[5] /= determinant;\n      R[6] /= determinant;\n      R[7] /= determinant;\n      R[8] /= determinant;\n\n      matrix.elements = R;\n\n      return matrix;\n    },\n\n    rotateByAxisAngle: (function () {\n      var outputMatrix = new FULLTILT.RotationMatrix();\n      var transformMatrix = new FULLTILT.RotationMatrix();\n\n      var sA, cA;\n      var validAxis = false;\n\n      return function (targetRotationMatrix, axis, angle) {\n        transformMatrix.identity(); // reset transform matrix\n\n        validAxis = false;\n\n        sA = Math.sin(angle);\n        cA = Math.cos(angle);\n\n        if (axis[0] === 1 && axis[1] === 0 && axis[2] === 0) {\n          // x\n\n          validAxis = true;\n\n          transformMatrix.elements[4] = cA;\n          transformMatrix.elements[5] = -sA;\n          transformMatrix.elements[7] = sA;\n          transformMatrix.elements[8] = cA;\n        } else if (axis[1] === 1 && axis[0] === 0 && axis[2] === 0) {\n          // y\n\n          validAxis = true;\n\n          transformMatrix.elements[0] = cA;\n          transformMatrix.elements[2] = sA;\n          transformMatrix.elements[6] = -sA;\n          transformMatrix.elements[8] = cA;\n        } else if (axis[2] === 1 && axis[0] === 0 && axis[1] === 0) {\n          // z\n\n          validAxis = true;\n\n          transformMatrix.elements[0] = cA;\n          transformMatrix.elements[1] = -sA;\n          transformMatrix.elements[3] = sA;\n          transformMatrix.elements[4] = cA;\n        }\n\n        if (validAxis) {\n          outputMatrix = FULLTILT.RotationMatrix.prototype.multiplyMatrices(\n            targetRotationMatrix,\n            transformMatrix\n          );\n\n          outputMatrix = FULLTILT.RotationMatrix.prototype.normalize(\n            outputMatrix\n          );\n        } else {\n          outputMatrix = targetRotationMatrix;\n        }\n\n        return outputMatrix;\n      };\n    })(),\n  };\n\n  ////// FULLTILT.Euler //////\n\n  FULLTILT.Euler = function (alpha, beta, gamma) {\n    this.set = function (alpha, beta, gamma) {\n      this.alpha = alpha || 0;\n      this.beta = beta || 0;\n      this.gamma = gamma || 0;\n    };\n\n    this.copy = function (inEuler) {\n      this.alpha = inEuler.alpha;\n      this.beta = inEuler.beta;\n      this.gamma = inEuler.gamma;\n    };\n\n    this.setFromRotationMatrix = (function () {\n      var R, _alpha, _beta, _gamma;\n\n      return function (matrix) {\n        R = matrix.elements;\n\n        if (R[8] > 0) {\n          // cos(beta) > 0\n\n          _alpha = Math.atan2(-R[1], R[4]);\n          _beta = Math.asin(R[7]); // beta (-pi/2, pi/2)\n          _gamma = Math.atan2(-R[6], R[8]); // gamma (-pi/2, pi/2)\n        } else if (R[8] < 0) {\n          // cos(beta) < 0\n\n          _alpha = Math.atan2(R[1], -R[4]);\n          _beta = -Math.asin(R[7]);\n          _beta += _beta >= 0 ? -M_PI : M_PI; // beta [-pi,-pi/2) U (pi/2,pi)\n          _gamma = Math.atan2(R[6], -R[8]); // gamma (-pi/2, pi/2)\n        } else {\n          // R[8] == 0\n\n          if (R[6] > 0) {\n            // cos(gamma) == 0, cos(beta) > 0\n\n            _alpha = Math.atan2(-R[1], R[4]);\n            _beta = Math.asin(R[7]); // beta [-pi/2, pi/2]\n            _gamma = -M_PI_2; // gamma = -pi/2\n          } else if (R[6] < 0) {\n            // cos(gamma) == 0, cos(beta) < 0\n\n            _alpha = Math.atan2(R[1], -R[4]);\n            _beta = -Math.asin(R[7]);\n            _beta += _beta >= 0 ? -M_PI : M_PI; // beta [-pi,-pi/2) U (pi/2,pi)\n            _gamma = -M_PI_2; // gamma = -pi/2\n          } else {\n            // R[6] == 0, cos(beta) == 0\n\n            // gimbal lock discontinuity\n            _alpha = Math.atan2(R[3], R[0]);\n            _beta = R[7] > 0 ? M_PI_2 : -M_PI_2; // beta = +-pi/2\n            _gamma = 0; // gamma = 0\n          }\n        }\n\n        // alpha is in [-pi, pi], make sure it is in [0, 2*pi).\n        if (_alpha < 0) {\n          _alpha += M_2_PI; // alpha [0, 2*pi)\n        }\n\n        // Convert to degrees\n        _alpha *= radToDeg;\n        _beta *= radToDeg;\n        _gamma *= radToDeg;\n\n        // apply derived euler angles to current object\n        this.set(_alpha, _beta, _gamma);\n      };\n    })();\n\n    this.setFromQuaternion = (function () {\n      var _alpha, _beta, _gamma;\n\n      return function (q) {\n        var sqw = q.w * q.w;\n        var sqx = q.x * q.x;\n        var sqy = q.y * q.y;\n        var sqz = q.z * q.z;\n\n        var unitLength = sqw + sqx + sqy + sqz; // Normalised == 1, otherwise correction divisor.\n        var wxyz = q.w * q.x + q.y * q.z;\n        var epsilon = 1e-6; // rounding factor\n\n        if (wxyz > (0.5 - epsilon) * unitLength) {\n          _alpha = 2 * Math.atan2(q.y, q.w);\n          _beta = M_PI_2;\n          _gamma = 0;\n        } else if (wxyz < (-0.5 + epsilon) * unitLength) {\n          _alpha = -2 * Math.atan2(q.y, q.w);\n          _beta = -M_PI_2;\n          _gamma = 0;\n        } else {\n          var aX = sqw - sqx + sqy - sqz;\n          var aY = 2 * (q.w * q.z - q.x * q.y);\n\n          var gX = sqw - sqx - sqy + sqz;\n          var gY = 2 * (q.w * q.y - q.x * q.z);\n\n          if (gX > 0) {\n            _alpha = Math.atan2(aY, aX);\n            _beta = Math.asin((2 * wxyz) / unitLength);\n            _gamma = Math.atan2(gY, gX);\n          } else {\n            _alpha = Math.atan2(-aY, -aX);\n            _beta = -Math.asin((2 * wxyz) / unitLength);\n            _beta += _beta < 0 ? M_PI : -M_PI;\n            _gamma = Math.atan2(-gY, -gX);\n          }\n        }\n\n        // alpha is in [-pi, pi], make sure it is in [0, 2*pi).\n        if (_alpha < 0) {\n          _alpha += M_2_PI; // alpha [0, 2*pi)\n        }\n\n        // Convert to degrees\n        _alpha *= radToDeg;\n        _beta *= radToDeg;\n        _gamma *= radToDeg;\n\n        // apply derived euler angles to current object\n        this.set(_alpha, _beta, _gamma);\n      };\n    })();\n\n    this.rotateX = function (angle) {\n      FULLTILT.Euler.prototype.rotateByAxisAngle(this, [1, 0, 0], angle);\n\n      return this;\n    };\n\n    this.rotateY = function (angle) {\n      FULLTILT.Euler.prototype.rotateByAxisAngle(this, [0, 1, 0], angle);\n\n      return this;\n    };\n\n    this.rotateZ = function (angle) {\n      FULLTILT.Euler.prototype.rotateByAxisAngle(this, [0, 0, 1], angle);\n\n      return this;\n    };\n\n    // Initialize object values\n    this.set(alpha, beta, gamma);\n  };\n\n  FULLTILT.Euler.prototype = {\n    constructor: FULLTILT.Euler,\n\n    rotateByAxisAngle: (function () {\n      var _matrix = new FULLTILT.RotationMatrix();\n\n      return function (targetEuler, axis, angle) {\n        _matrix.setFromEuler(targetEuler);\n\n        _matrix = FULLTILT.RotationMatrix.prototype.rotateByAxisAngle(\n          _matrix,\n          axis,\n          angle\n        );\n\n        targetEuler.setFromRotationMatrix(_matrix);\n\n        return targetEuler;\n      };\n    })(),\n  };\n\n  ///// FULLTILT.DeviceOrientation //////\n\n  FULLTILT.DeviceOrientation = function (options) {\n    this.options = options || {}; // by default use UA deviceorientation 'type' (\"game\" on iOS, \"world\" on Android)\n\n    var tries = 0;\n    var maxTries = 200;\n    var successCount = 0;\n    var successThreshold = 10;\n\n    this.alphaOffsetScreen = 0;\n    this.alphaOffsetDevice = undefined;\n\n    // Create a game-based deviceorientation object (initial alpha === 0 degrees)\n    if (this.options.type === \"game\") {\n      var setGameAlphaOffset = function (evt) {\n        if (evt.alpha !== null) {\n          // do regardless of whether 'evt.absolute' is also true\n          this.alphaOffsetDevice = new FULLTILT.Euler(evt.alpha, 0, 0);\n          this.alphaOffsetDevice.rotateZ(-screenOrientationAngle);\n\n          // Discard first {successThreshold} responses while a better compass lock is found by UA\n          if (++successCount >= successThreshold) {\n            window.removeEventListener(\n              \"deviceorientation\",\n              setGameAlphaOffset,\n              false\n            );\n            return;\n          }\n        }\n\n        if (++tries >= maxTries) {\n          window.removeEventListener(\n            \"deviceorientation\",\n            setGameAlphaOffset,\n            false\n          );\n        }\n      }.bind(this);\n\n      window.addEventListener(\"deviceorientation\", setGameAlphaOffset, false);\n\n      // Create a compass-based deviceorientation object (initial alpha === compass degrees)\n    } else if (this.options.type === \"world\") {\n      var setCompassAlphaOffset = function (evt) {\n        if (\n          evt.absolute !== true &&\n          evt.webkitCompassAccuracy !== undefined &&\n          evt.webkitCompassAccuracy !== null &&\n          +evt.webkitCompassAccuracy >= 0 &&\n          +evt.webkitCompassAccuracy < 50\n        ) {\n          this.alphaOffsetDevice = new FULLTILT.Euler(\n            evt.webkitCompassHeading,\n            0,\n            0\n          );\n          this.alphaOffsetDevice.rotateZ(screenOrientationAngle);\n          this.alphaOffsetScreen = screenOrientationAngle;\n\n          // Discard first {successThreshold} responses while a better compass lock is found by UA\n          if (++successCount >= successThreshold) {\n            window.removeEventListener(\n              \"deviceorientation\",\n              setCompassAlphaOffset,\n              false\n            );\n            return;\n          }\n        }\n\n        if (++tries >= maxTries) {\n          window.removeEventListener(\n            \"deviceorientation\",\n            setCompassAlphaOffset,\n            false\n          );\n        }\n      }.bind(this);\n\n      window.addEventListener(\n        \"deviceorientation\",\n        setCompassAlphaOffset,\n        false\n      );\n    } // else... use whatever orientation system the UA provides (\"game\" on iOS, \"world\" on Android)\n  };\n\n  FULLTILT.DeviceOrientation.prototype = {\n    constructor: FULLTILT.DeviceOrientation,\n\n    start: function (callback) {\n      if (\n        callback &&\n        Object.prototype.toString.call(callback) === \"[object Function]\"\n      ) {\n        sensors.orientation.callbacks.push(callback);\n      }\n\n      if (!screenActive) {\n        if (hasScreenOrientationAPI) {\n          window.screen.orientation.addEventListener(\n            \"change\",\n            handleScreenOrientationChange,\n            false\n          );\n        } else {\n          window.addEventListener(\n            \"orientationchange\",\n            handleScreenOrientationChange,\n            false\n          );\n        }\n      }\n\n      if (!sensors.orientation.active) {\n        window.addEventListener(\n          \"deviceorientation\",\n          handleDeviceOrientationChange,\n          false\n        );\n\n        sensors.orientation.active = true;\n      }\n    },\n\n    stop: function () {\n      if (sensors.orientation.active) {\n        window.removeEventListener(\n          \"deviceorientation\",\n          handleDeviceOrientationChange,\n          false\n        );\n\n        sensors.orientation.active = false;\n      }\n    },\n\n    listen: function (callback) {\n      this.start(callback);\n    },\n\n    getFixedFrameQuaternion: (function () {\n      var euler = new FULLTILT.Euler();\n      var matrix = new FULLTILT.RotationMatrix();\n      var quaternion = new FULLTILT.Quaternion();\n\n      return function () {\n        var orientationData = sensors.orientation.data || {\n          alpha: 0,\n          beta: 0,\n          gamma: 0,\n        };\n\n        var adjustedAlpha = orientationData.alpha;\n\n        if (this.alphaOffsetDevice) {\n          matrix.setFromEuler(this.alphaOffsetDevice);\n          matrix.rotateZ(-this.alphaOffsetScreen);\n          euler.setFromRotationMatrix(matrix);\n\n          if (euler.alpha < 0) {\n            euler.alpha += 360;\n          }\n\n          euler.alpha %= 360;\n\n          adjustedAlpha -= euler.alpha;\n        }\n\n        euler.set(adjustedAlpha, orientationData.beta, orientationData.gamma);\n\n        quaternion.setFromEuler(euler);\n\n        return quaternion;\n      };\n    })(),\n\n    getScreenAdjustedQuaternion: (function () {\n      var quaternion;\n\n      return function () {\n        quaternion = this.getFixedFrameQuaternion();\n\n        // Automatically apply screen orientation transform\n        quaternion.rotateZ(-screenOrientationAngle);\n\n        return quaternion;\n      };\n    })(),\n\n    getFixedFrameMatrix: (function () {\n      var euler = new FULLTILT.Euler();\n      var matrix = new FULLTILT.RotationMatrix();\n\n      return function () {\n        var orientationData = sensors.orientation.data || {\n          alpha: 0,\n          beta: 0,\n          gamma: 0,\n        };\n\n        var adjustedAlpha = orientationData.alpha;\n\n        if (this.alphaOffsetDevice) {\n          matrix.setFromEuler(this.alphaOffsetDevice);\n          matrix.rotateZ(-this.alphaOffsetScreen);\n          euler.setFromRotationMatrix(matrix);\n\n          if (euler.alpha < 0) {\n            euler.alpha += 360;\n          }\n\n          euler.alpha %= 360;\n\n          adjustedAlpha -= euler.alpha;\n        }\n\n        euler.set(adjustedAlpha, orientationData.beta, orientationData.gamma);\n\n        matrix.setFromEuler(euler);\n\n        return matrix;\n      };\n    })(),\n\n    getScreenAdjustedMatrix: (function () {\n      var matrix;\n\n      return function () {\n        matrix = this.getFixedFrameMatrix();\n\n        // Automatically apply screen orientation transform\n        matrix.rotateZ(-screenOrientationAngle);\n\n        return matrix;\n      };\n    })(),\n\n    getFixedFrameEuler: (function () {\n      var euler = new FULLTILT.Euler();\n      var matrix;\n\n      return function () {\n        matrix = this.getFixedFrameMatrix();\n\n        euler.setFromRotationMatrix(matrix);\n\n        return euler;\n      };\n    })(),\n\n    getScreenAdjustedEuler: (function () {\n      var euler = new FULLTILT.Euler();\n      var matrix;\n\n      return function () {\n        matrix = this.getScreenAdjustedMatrix();\n\n        euler.setFromRotationMatrix(matrix);\n\n        return euler;\n      };\n    })(),\n\n    isAbsolute: function () {\n      if (\n        sensors.orientation.data &&\n        sensors.orientation.data.absolute === true\n      ) {\n        return true;\n      }\n\n      return false;\n    },\n\n    getLastRawEventData: function () {\n      return sensors.orientation.data || {};\n    },\n\n    ALPHA: \"alpha\",\n    BETA: \"beta\",\n    GAMMA: \"gamma\",\n  };\n\n  ///// FULLTILT.DeviceMotion //////\n\n  FULLTILT.DeviceMotion = function (options) {\n    this.options = options || {}; // placeholder object since no options are currently supported\n  };\n\n  FULLTILT.DeviceMotion.prototype = {\n    constructor: FULLTILT.DeviceMotion,\n\n    start: function (callback) {\n      if (\n        callback &&\n        Object.prototype.toString.call(callback) === \"[object Function]\"\n      ) {\n        sensors.motion.callbacks.push(callback);\n      }\n\n      if (!screenActive) {\n        if (hasScreenOrientationAPI) {\n          window.screen.orientation.addEventListener(\n            \"change\",\n            handleScreenOrientationChange,\n            false\n          );\n        } else {\n          window.addEventListener(\n            \"orientationchange\",\n            handleScreenOrientationChange,\n            false\n          );\n        }\n      }\n\n      if (!sensors.motion.active) {\n        window.addEventListener(\n          \"devicemotion\",\n          handleDeviceMotionChange,\n          false\n        );\n\n        sensors.motion.active = true;\n      }\n    },\n\n    stop: function () {\n      if (sensors.motion.active) {\n        window.removeEventListener(\n          \"devicemotion\",\n          handleDeviceMotionChange,\n          false\n        );\n\n        sensors.motion.active = false;\n      }\n    },\n\n    listen: function (callback) {\n      this.start(callback);\n    },\n\n    getScreenAdjustedAcceleration: function () {\n      var accData =\n        sensors.motion.data && sensors.motion.data.acceleration\n          ? sensors.motion.data.acceleration\n          : { x: 0, y: 0, z: 0 };\n      var screenAccData = {};\n\n      switch (screenOrientationAngle) {\n        case SCREEN_ROTATION_90:\n          screenAccData.x = -accData.y;\n          screenAccData.y = accData.x;\n          break;\n        case SCREEN_ROTATION_180:\n          screenAccData.x = -accData.x;\n          screenAccData.y = -accData.y;\n          break;\n        case SCREEN_ROTATION_270:\n        case SCREEN_ROTATION_MINUS_90:\n          screenAccData.x = accData.y;\n          screenAccData.y = -accData.x;\n          break;\n        default:\n          // SCREEN_ROTATION_0\n          screenAccData.x = accData.x;\n          screenAccData.y = accData.y;\n          break;\n      }\n\n      screenAccData.z = accData.z;\n\n      return screenAccData;\n    },\n\n    getScreenAdjustedAccelerationIncludingGravity: function () {\n      var accGData =\n        sensors.motion.data && sensors.motion.data.accelerationIncludingGravity\n          ? sensors.motion.data.accelerationIncludingGravity\n          : { x: 0, y: 0, z: 0 };\n      var screenAccGData = {};\n\n      switch (screenOrientationAngle) {\n        case SCREEN_ROTATION_90:\n          screenAccGData.x = -accGData.y;\n          screenAccGData.y = accGData.x;\n          break;\n        case SCREEN_ROTATION_180:\n          screenAccGData.x = -accGData.x;\n          screenAccGData.y = -accGData.y;\n          break;\n        case SCREEN_ROTATION_270:\n        case SCREEN_ROTATION_MINUS_90:\n          screenAccGData.x = accGData.y;\n          screenAccGData.y = -accGData.x;\n          break;\n        default:\n          // SCREEN_ROTATION_0\n          screenAccGData.x = accGData.x;\n          screenAccGData.y = accGData.y;\n          break;\n      }\n\n      screenAccGData.z = accGData.z;\n\n      return screenAccGData;\n    },\n\n    getScreenAdjustedRotationRate: function () {\n      var rotRateData =\n        sensors.motion.data && sensors.motion.data.rotationRate\n          ? sensors.motion.data.rotationRate\n          : { alpha: 0, beta: 0, gamma: 0 };\n      var screenRotRateData = {};\n\n      switch (screenOrientationAngle) {\n        case SCREEN_ROTATION_90:\n          screenRotRateData.beta = -rotRateData.gamma;\n          screenRotRateData.gamma = rotRateData.beta;\n          break;\n        case SCREEN_ROTATION_180:\n          screenRotRateData.beta = -rotRateData.beta;\n          screenRotRateData.gamma = -rotRateData.gamma;\n          break;\n        case SCREEN_ROTATION_270:\n        case SCREEN_ROTATION_MINUS_90:\n          screenRotRateData.beta = rotRateData.gamma;\n          screenRotRateData.gamma = -rotRateData.beta;\n          break;\n        default:\n          // SCREEN_ROTATION_0\n          screenRotRateData.beta = rotRateData.beta;\n          screenRotRateData.gamma = rotRateData.gamma;\n          break;\n      }\n\n      screenRotRateData.alpha = rotRateData.alpha;\n\n      return screenRotRateData;\n    },\n\n    getLastRawEventData: function () {\n      return sensors.motion.data || {};\n    },\n  };\n\n  ////// Attach FULLTILT to root DOM element //////\n\n  window.FULLTILT = FULLTILT;\n})(window);\n","import {\n  Button,\n  TextField,\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  DialogContentText,\n} from \"@material-ui/core\";\nimport React from \"react\";\n\nexport const ConnectForm: React.FC<{\n  onSubmit: (url: string) => void;\n  loading: boolean;\n  open: boolean;\n  error: string;\n  onClose: () => void;\n}> = ({ onSubmit, loading, open, error, onClose }) => {\n  const [url, setUrl] = React.useState(\"\");\n\n  const handleChange = (event: React.ChangeEvent<HTMLInputElement>) => {\n    event.preventDefault();\n    setUrl(event.target.value);\n  };\n\n  const handleSubmit = () => {\n    console.log(url);\n    onSubmit(url);\n  };\n\n  React.useEffect(() => {\n    const lsUrl = window.localStorage.getItem(\"wssurl\");\n\n    if (typeof lsUrl === \"string\") {\n      setUrl(lsUrl);\n    }\n  }, []);\n\n  return (\n    <Dialog open={open} onClose={onClose}>\n      <DialogTitle>Connect to OSC Controller</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          To start using osc controller you will have to provide a websocket url\n          to connect to.\n        </DialogContentText>\n        <TextField\n          autoFocus\n          margin=\"dense\"\n          type=\"text\"\n          value={url}\n          onChange={handleChange}\n          placeholder=\"wss://...\"\n          label=\"Websocket URL\"\n          id=\"url\"\n          fullWidth\n          disabled={loading}\n          error={!!error}\n          helperText={error}\n        />\n      </DialogContent>\n      <DialogActions>\n        <Button color=\"primary\" disabled={loading} onClick={handleSubmit}>\n          Connect\n        </Button>\n        <Button color=\"primary\" disabled={loading} onClick={onClose}>\n          Close\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n};\n","export default \"data:image/jpeg;base64,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\"","export default __webpack_public_path__ + \"static/media/bloom.392dd1b6.png\";","export default __webpack_public_path__ + \"static/media/gmsynth.8026e8ce.png\";","import * as React from \"react\";\nimport { Equalizer, Home } from \"@material-ui/icons\";\n\nimport ImgLandscape from \"../images/landscape.jpg\";\nimport ImgBloom from \"../images/bloom.png\";\nimport ImgTwoOpFmSynth from \"../images/gmsynth.png\";\nimport ImgFmSynth from \"../images/fmsynth.png\";\n\ntype ModuleType = {\n  name: string;\n  link: string;\n  icon: JSX.Element;\n  dashboard: boolean;\n  description: string;\n  image?: string;\n};\n\nexport const MODULES: ModuleType[] = [\n  {\n    name: \"Home\",\n    link: \"/osc-controller\",\n    icon: <Home />,\n    dashboard: false,\n    description: \"\",\n  },\n  {\n    name: \"Bloom\",\n    link: \"/osc-controller/osc-bloom\",\n    icon: <Equalizer />,\n    image: ImgBloom,\n    dashboard: true,\n    description: \"Interactive Bloom clone inspired by Bryan Eno.\",\n  },\n  {\n    name: \"Accelerometer Control\",\n    link: \"/osc-controller/osc-accelerometer\",\n    icon: <Equalizer />,\n    image: ImgLandscape,\n    dashboard: true,\n    description: \"Accelerometer controller for mobile devices.\",\n  },\n  {\n    name: \"FM Accelerometer\",\n    link: \"/osc-controller/fm-synth-accelerometer\",\n    icon: <Equalizer />,\n    image: ImgFmSynth,\n    dashboard: true,\n    description: \"Attempt at a fm synthesizer\",\n  },\n  {\n    name: \"2 Op FM Synth\",\n    link: \"/osc-controller/fm-synth-controller\",\n    icon: <Equalizer />,\n    image: ImgTwoOpFmSynth,\n    dashboard: true,\n    description: \"GM implementation in FM\",\n  },\n  {\n    name: \"Harmonicity Ratio\",\n    link: \"/osc-controller/harmonicity\",\n    icon: <Equalizer />,\n    image: ImgLandscape,\n    dashboard: true,\n    description: \"Harmonicity Ratio Playground\",\n  },\n  {\n    name: \"Waveform Draw\",\n    link: \"/osc-controller/waveform\",\n    icon: <Equalizer />,\n    image: ImgLandscape,\n    dashboard: true,\n    description: \"Draw waveform using canvas\",\n  },\n  {\n    name: \"Guided Music\",\n    link: \"/osc-controller/guided-music\",\n    icon: <Equalizer />,\n    image: ImgLandscape,\n    dashboard: true,\n    description: \"Living composition\",\n  },\n];\n","export default \"data:image/png;base64,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RDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIwRDVemKc6IwDoZTgCMEQ1XpinOiMA6GU4AjBENV6YpzojAOhlOAIAABAZjgAAAESGIwAAAJHhCAAAQGQ4AgAAEBmOAAAARIYjAAAAkeEIAABAZDgCAAAQGY4AAABEhiMAAACR4QgAAEBkOAIAABAZjgAAAESGIwAAAJHhCAAAQGQ4AgAAEBmOAAAARIYjAAAAkeEIAABAZDgCAAAQGY4AAABEhiMAAACR4QgAAEBkOAIAABAZjgAAAESGIwAAAJHhCAAAQGQ4AgAAEBmOAAAARIYjAAAAkeEIAABAZDgCAAAQGY4AAABEhiMAAACR4QgAAEBkOAIAABAZjgAAAESGIwAAAJHhCAAAQGQ4AgAAEBmOAAAARIYjAAAAkeEIAABAZDgCAAAQGY4AAABEhiMAAACR4QgAAEBkOAIAABAZjgAAAESGIwAAAJHhCAAAQGQ4AgAAEBmOAAAARIYjAAAAkeEIAABAZDgCAAAQGY4AAABEhiMAAACR4QgAAEBkOAIAABAZjgAAAESGIwAAAJHhCAAAQGQ4AgAAEBmOAAAARIYjAAAAkeEIAABAZDgCAAAQGY4AAABEhiMAAACR4QgAAEBkOAIAABAZjgAAAESGIwAAAJHhCAAAQGQ4AgAAEBmOAAAARIYjAAAAkeEIAABAZDgCAAAQGY4AAABEhiMAAACR4QgAAEBkOAIAABAZjgAAAESGIwAAAJHhCAAAQGQ4AgAAEBmOAAAARIYjAAAAkeEIAABAZDgCAAAQGY4AAABEhiMAAACR4QgAAEBkOAIAALDR/fv3DUcAAAA2+/DDD5eHDx8ajgAAAPy/9l8bP/roo+XRo0fLhfZJ9SQAAAAOT9uIH3zwwXLv3r3l5ORkefLkyfJvYHl9eZLsdTUAAAAASUVORK5CYII=\"","import React from \"react\";\nimport { Link, RouteComponentProps } from \"@reach/router\";\nimport {\n  Card,\n  CardActionArea,\n  CardContent,\n  CardMedia,\n  Grid,\n  makeStyles,\n  Typography,\n} from \"@material-ui/core\";\n\nimport { MODULES } from \"./modules\";\n\nconst useStyles = makeStyles({\n  root: {\n    maxWidth: 345,\n  },\n  media: {\n    height: 140,\n  },\n});\n\nexport const Dashboard: React.FC<RouteComponentProps> = () => {\n  const classes = useStyles();\n\n  return (\n    <Grid container spacing={1}>\n      {MODULES.filter((mod) => mod.dashboard).map((mod) => (\n        <Grid xs={6} item key={mod.name}>\n          <Link to={mod.link} style={{ textDecoration: \"none\" }}>\n            <Card className={classes.root}>\n              <CardActionArea>\n                <CardMedia\n                  className={classes.media}\n                  image={mod.image}\n                  title=\"Bloom\"\n                />\n                <CardContent>\n                  <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                    {mod.name}\n                  </Typography>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    component=\"p\"\n                  >\n                    {mod.description}\n                  </Typography>\n                </CardContent>\n              </CardActionArea>\n            </Card>\n          </Link>\n        </Grid>\n      ))}\n    </Grid>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"@reach/router\";\nimport {\n  Drawer,\n  ListItemText,\n  makeStyles,\n  ListItemIcon,\n  ListItem,\n  List,\n} from \"@material-ui/core\";\n\nimport { MODULES } from \"./modules\";\n\nexport type WsArgs = {\n  address: string;\n  args: (number | string)[];\n};\n\nconst useStyles = makeStyles((theme) => ({\n  list: {\n    width: 250,\n  },\n}));\n\nexport const AppDrawer: React.FC<{ open: boolean; toggle: () => void }> = ({\n  open,\n  toggle,\n}) => {\n  const classes = useStyles();\n\n  return (\n    <Drawer anchor=\"left\" open={open} onClose={toggle}>\n      <div\n        className={classes.list}\n        role=\"presentation\"\n        onClick={toggle}\n        onKeyDown={toggle}\n      >\n        <List>\n          {MODULES.map((item) => (\n            <Link\n              key={item.link}\n              to={item.link}\n              style={{ textDecoration: \"none\", color: \"black\" }}\n            >\n              <ListItem button>\n                <ListItemIcon>{item.icon}</ListItemIcon>\n                <ListItemText primary={item.name} />\n              </ListItem>\n            </Link>\n          ))}\n        </List>\n      </div>\n    </Drawer>\n  );\n};\n","import React from \"react\";\nimport { Link } from \"@reach/router\";\nimport {\n  AppBar,\n  IconButton,\n  makeStyles,\n  MenuItem,\n  Toolbar,\n  Typography,\n  Menu,\n} from \"@material-ui/core\";\nimport MenuIcon from \"@material-ui/icons/Menu\";\nimport { SyncDisabledRounded, SyncRounded } from \"@material-ui/icons\";\n\nconst useStyles = makeStyles((theme) => ({\n  menuButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport const AppTopBar: React.FC<{\n  toggleDrawer: () => void;\n  onDisconnect: () => void;\n  onConnect: () => void;\n  url?: string;\n}> = ({ toggleDrawer, url, onDisconnect, onConnect }) => {\n  const [anchorEl, setAnchorEl] = React.useState<HTMLButtonElement | null>(\n    null\n  );\n\n  const classes = useStyles();\n\n  const open = Boolean(anchorEl);\n\n  const handleOpen = (\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>\n  ) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  const handleDisconnect = () => {\n    onDisconnect();\n    handleClose();\n  };\n\n  const handleConnect = () => {\n    onConnect();\n    handleClose();\n  };\n\n  return (\n    <AppBar position=\"static\">\n      <Toolbar>\n        <IconButton\n          edge=\"start\"\n          className={classes.menuButton}\n          color=\"inherit\"\n          aria-label=\"menu\"\n          onClick={toggleDrawer}\n        >\n          <MenuIcon />\n        </IconButton>\n        <Link\n          to=\"/osc-controller/\"\n          className={classes.title}\n          style={{ textDecoration: \"none\", color: \"white\" }}\n        >\n          <Typography variant=\"h6\">Allan's Web Music</Typography>\n        </Link>\n        {url && (\n          <>\n            <IconButton color=\"inherit\" onClick={handleOpen}>\n              <SyncRounded />\n            </IconButton>\n            <Menu\n              id=\"menu-appbar\"\n              anchorEl={anchorEl}\n              anchorOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              open={open}\n              onClose={handleClose}\n            >\n              <MenuItem onClick={handleDisconnect}>Disconnect</MenuItem>\n            </Menu>\n          </>\n        )}\n        {!url && (\n          <>\n            <IconButton color=\"inherit\" onClick={handleOpen}>\n              <SyncDisabledRounded />\n            </IconButton>\n            <Menu\n              id=\"menu-appbar\"\n              anchorEl={anchorEl}\n              anchorOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              transformOrigin={{\n                vertical: \"top\",\n                horizontal: \"right\",\n              }}\n              open={open}\n              onClose={handleClose}\n            >\n              <MenuItem onClick={handleConnect}>Connect</MenuItem>\n            </Menu>\n          </>\n        )}\n      </Toolbar>\n    </AppBar>\n  );\n};\n","export const rangeMap = (\n  value: number,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number\n) => ((value - x1) * (y2 - x2)) / (y1 - x1) + x2;\n\nexport const colorMap = (value: number, x1: number, y1: number) =>\n  ((value - x1) * 255) / (y1 - x1);\n","import {\n  Button,\n  Card,\n  CardActions,\n  Slider,\n  Typography,\n} from \"@material-ui/core\";\nimport { Timelapse, Timer } from \"@material-ui/icons\";\nimport { RouteComponentProps } from \"@reach/router\";\nimport React from \"react\";\n\nimport { WsArgs } from \"../App\";\nimport { rangeMap } from \"../helpers/helpers\";\n\nexport type ClickHistory = {\n  x: number;\n  y: number;\n  time: number;\n  index: number;\n};\n\nconst ClickDot: React.FC<{\n  click: ClickHistory;\n  timer: number;\n  boardWidth: number;\n  maxTime: number;\n}> = ({ click, timer, boardWidth, maxTime }) => {\n  let timerDiff =\n    (Math.sin(((timer - click.time) / (maxTime / 2) + 0.5) * Math.PI) + 1) *\n    0.5;\n\n  return (\n    <div\n      style={{\n        width: (timerDiff * boardWidth) / 3,\n        height: (timerDiff * boardWidth) / 3,\n        backgroundColor: `rgba(0,${click.x / 2},${click.y / 2},${\n          timerDiff / 2\n        })`,\n        position: \"absolute\",\n        top: click.y - (timerDiff * boardWidth) / 6,\n        left: click.x - (timerDiff * boardWidth) / 6,\n        borderRadius: \"50%\",\n        transition: \"all 0.5s\",\n      }}\n    />\n  );\n};\n\nexport const OscBloom: React.FC<\n  RouteComponentProps & { onTransmit: (args: WsArgs) => void }\n> = ({ onTransmit }) => {\n  const [clickHistory, setClickHistory] = React.useState<ClickHistory[]>([]);\n  const [timer, setTimer] = React.useState(0);\n  const [size, setSize] = React.useState({ width: 0, height: 0 });\n  const [maxTime, setMaxTime] = React.useState(4);\n\n  const boardRef = React.useRef<HTMLDivElement>(null);\n\n  const playNote = React.useCallback(\n    (click: ClickHistory) => {\n      const freq = rangeMap(click.x, 0, size.width, 20, 2000);\n      const vol = rangeMap(click.y, 0, size.height, 0, 1);\n      console.log(\"Playing note \", freq, vol);\n\n      onTransmit({\n        address: \"/chuck/oscnote\",\n        args: [freq, vol, click.index],\n      });\n    },\n    [onTransmit, size]\n  );\n\n  React.useEffect(() => {\n    const interval = setInterval(() => {\n      let newTime = timer + 0.1;\n      if (newTime > maxTime) {\n        newTime = 0;\n      }\n\n      clickHistory\n        .filter((click) => click.time === newTime)\n        .forEach((click) => playNote(click));\n\n      setTimer(newTime);\n    }, 100);\n\n    return () => clearInterval(interval);\n  }, [playNote, clickHistory, timer, maxTime]);\n\n  React.useEffect(() => {\n    if (boardRef.current) {\n      setSize({\n        width: boardRef.current.clientWidth,\n        height: boardRef.current.clientHeight,\n      });\n    }\n  }, [boardRef]);\n\n  const mouseMoved = (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\n    const { nativeEvent } = event;\n    const x = nativeEvent.offsetX;\n    const y = nativeEvent.offsetY;\n    console.log(x, y);\n\n    if (boardRef.current) {\n      boardRef.current.style.backgroundColor = `rgba(0, ${rangeMap(\n        x,\n        0,\n        size.width,\n        0,\n        255\n      )}, ${rangeMap(y, 0, size.height, 0, 255)})`;\n    }\n  };\n\n  const mouseClicked = (\n    event: React.MouseEvent<HTMLDivElement, MouseEvent>\n  ) => {\n    const { nativeEvent } = event;\n    const x = nativeEvent.offsetX;\n    const y = nativeEvent.offsetY;\n\n    const newClick: ClickHistory = {\n      x,\n      y,\n      time: timer,\n      index: clickHistory.length,\n    };\n\n    setClickHistory([...clickHistory, newClick]);\n    playNote(newClick);\n  };\n\n  const clearHistory = () => {\n    setClickHistory([]);\n  };\n\n  const handleMaxTimeChange = (_event: unknown, value: number | number[]) => {\n    if (typeof value === \"number\") {\n      setMaxTime(value);\n    }\n  };\n\n  return (\n    <Card>\n      <div\n        ref={boardRef}\n        style={{\n          width: \"100%\",\n          height: 400,\n          position: \"relative\",\n          overflow: \"hidden\",\n          transition: \"background-color 0.5s\",\n        }}\n      >\n        {clickHistory.map((click) => (\n          <ClickDot\n            key={click.index}\n            click={click}\n            timer={timer}\n            boardWidth={size.width}\n            maxTime={maxTime}\n          />\n        ))}\n        <div\n          style={{\n            position: \"absolute\",\n            backgroundColor: \"rgba(0,0,0,0)\",\n            top: 0,\n            left: 0,\n            width: \"100%\",\n            height: \"100%\",\n          }}\n          onMouseMove={mouseMoved}\n          onClick={mouseClicked}\n        />\n      </div>\n      <CardActions>\n        <Timer />\n        <Typography variant=\"body1\" style={{ width: \"100%\" }}>\n          {Math.round(timer * 100) / 100}/{Math.round(maxTime * 100) / 100}\n        </Typography>\n        <Timelapse />\n        <Slider\n          value={maxTime}\n          onChange={handleMaxTimeChange}\n          max={20}\n          min={1}\n          step={0.1}\n        />\n        <Button onClick={clearHistory}>Clear</Button>\n      </CardActions>\n    </Card>\n  );\n};\n","import React from \"react\";\nimport { colorMap, rangeMap } from \"../helpers/helpers\";\nimport GyroNorm from \"gyronorm\";\nimport { Box, Button, Card, CardContent, Typography } from \"@material-ui/core\";\nimport { Error } from \"@material-ui/icons\";\n\nconst DOT_SIZE = 100;\n\nexport type AccelParams = {\n  alpha: number;\n  beta: number;\n  gamma: number;\n};\n\nexport const AccelPad: React.FC<{\n  onChange?: (args: AccelParams) => void;\n  onClick?: (status: \"on\" | \"off\") => void;\n}> = ({ onChange, onClick }) => {\n  const [hasMotionDevice, setHasMotionDevice] = React.useState(false);\n  const [error, setError] = React.useState(\"\");\n  const [size, setSize] = React.useState({ width: 0, height: 0 });\n\n  const boardRef = React.useRef<HTMLDivElement>(null);\n  const dotRef = React.useRef<HTMLDivElement>(null);\n\n  React.useEffect(() => {\n    if (boardRef.current) {\n      setSize({\n        width: boardRef.current.clientWidth,\n        height: boardRef.current.clientHeight,\n      });\n    }\n  }, [boardRef]);\n\n  const initMotion = () => {\n    setHasMotionDevice(true);\n    const gn = new GyroNorm();\n\n    gn.init({ frequency: 50 })\n      .then(() => {\n        gn.start((data) => {\n          if (dotRef.current) {\n            const { alpha, beta, gamma } = data.do;\n\n            dotRef.current.style.left = `${\n              rangeMap(gamma, -90, 90, 0, size.width) - DOT_SIZE / 2\n            }px`;\n\n            dotRef.current.style.top = `${\n              rangeMap(beta, -90, 90, 0, size.height) - DOT_SIZE / 2\n            }px`;\n\n            dotRef.current.style.backgroundColor = `rgb(255,${colorMap(\n              beta,\n              -180,\n              180\n            )},${colorMap(gamma, -90, 90)})`;\n\n            dotRef.current.style.borderRadius = `${rangeMap(\n              alpha,\n              0,\n              360,\n              0,\n              50\n            )}%`;\n\n            onChange?.({ alpha, beta, gamma });\n          }\n        });\n      })\n      .catch(() => {\n        setHasMotionDevice(false);\n        setError(\"This browser does not support device motion\");\n      });\n  };\n\n  const motionAccess = () => {\n    if (!window.DeviceMotionEvent?.requestPermission) {\n      initMotion();\n    }\n\n    window.DeviceMotionEvent?.requestPermission?.().then((response) => {\n      if (response === \"granted\") {\n        initMotion();\n      }\n    });\n  };\n\n  return (\n    <>\n      <Card>\n        {!hasMotionDevice && (\n          <CardContent>\n            <Button\n              onClick={motionAccess}\n              variant=\"outlined\"\n              color=\"primary\"\n              fullWidth\n            >\n              No motion device detected. Click to request access\n            </Button>\n\n            {error && (\n              <Box>\n                <Error color=\"error\" />\n                <Typography gutterBottom variant=\"caption\">\n                  {error}\n                </Typography>\n              </Box>\n            )}\n          </CardContent>\n        )}\n        <div\n          ref={boardRef}\n          style={{\n            width: \"100%\",\n            height: \"300px\",\n            position: \"relative\",\n            overflow: \"hidden\",\n            margin: \"0 auto\",\n            backgroundColor: \"#CCC\",\n          }}\n        >\n          <div\n            ref={dotRef}\n            style={{\n              width: DOT_SIZE,\n              height: DOT_SIZE,\n              backgroundColor: \"rgba(0, 0, 0 ,0)\",\n              position: \"absolute\",\n              top: 0,\n              left: 0,\n              borderRadius: \"50%\",\n              transition: \"all 0.04s\",\n            }}\n          />\n          <div\n            onTouchStart={() => onClick?.(\"on\")}\n            onTouchEnd={() => onClick?.(\"off\")}\n            style={{\n              position: \"absolute\",\n              backgroundColor: \"rgba(0,0,0,0)\",\n              top: 0,\n              left: 0,\n              width: \"100%\",\n              height: \"100%\",\n            }}\n          />\n        </div>\n      </Card>\n    </>\n  );\n};\n","import React from \"react\";\nimport { RouteComponentProps } from \"@reach/router\";\n\nimport { WsArgs } from \"../App\";\nimport { AccelPad, AccelParams } from \"../components/AccelPad\";\n\nexport const OscAccelerometer: React.FC<\n  RouteComponentProps & {\n    onTransmit: (args: WsArgs) => void;\n  }\n> = ({ onTransmit }) => {\n  const handleChange = (msg: AccelParams) => {\n    onTransmit({\n      address: \"/chuck/oscnote/accel\",\n      args: [msg.alpha, msg.beta, msg.gamma],\n    });\n  };\n\n  const handleClick = (msg: \"on\" | \"off\") => {\n    onTransmit({\n      address: \"/chuck/oscnote/tap\",\n      args: [msg],\n    });\n  };\n\n  return <AccelPad onClick={handleClick} onChange={handleChange} />;\n};\n","import React from \"react\";\nimport { RouteComponentProps } from \"@reach/router\";\nimport {\n  Button,\n  Card,\n  CardActions,\n  CardContent,\n  Slider,\n} from \"@material-ui/core\";\nimport { VolumeUp, Waves } from \"@material-ui/icons\";\n\nimport { AccelPad, AccelParams } from \"../components/AccelPad\";\nimport { rangeMap } from \"../helpers/helpers\";\n\nconst MAX_GAIN_1 = 10000;\nconst MAX_GAIN_2 = 1000;\nconst MAX_FREQUENCY_1 = 1000;\nconst MAX_FREQUENCY_2 = 20;\n\nexport const FmAccelerometer: React.FC<RouteComponentProps> = () => {\n  const [mod1, setMod1] = React.useState<OscillatorNode | null>(null);\n  const [mod2, setMod2] = React.useState<OscillatorNode | null>(null);\n  const [gain1, setGain1] = React.useState<GainNode | null>(null);\n  const [gain2, setGain2] = React.useState<GainNode | null>(null);\n  const [freq1Val, setFreq1Val] = React.useState(440);\n  const [freq2Val, setFreq2Val] = React.useState(440);\n  const [gain1Val, setGain1Val] = React.useState(3000);\n  const [gain2Val, setGain2Val] = React.useState(3000);\n  const [context, setContext] = React.useState<AudioContext | null>(null);\n\n  React.useEffect(() => {\n    if (!context) {\n      setContext(new AudioContext());\n    }\n    return () => {\n      context?.close();\n    };\n  }, [context]);\n\n  const startSynth = () => {\n    if (!context) {\n      return;\n    }\n\n    // Create audio context\n    context.resume();\n\n    // Setup\n    const out = context.destination;\n\n    // Instantiating\n    const mod1 = context.createOscillator(); // Modulator 1\n    const mod2 = context.createOscillator(); // Modulator 2\n    const carrier = context.createOscillator(); // Carrier\n    carrier.type = \"sine\";\n\n    // Setting frequencies\n    mod1.frequency.value = freq1Val;\n    mod2.frequency.value = freq2Val;\n    mod1.type = \"sawtooth\";\n    mod2.type = \"square\";\n    carrier.frequency.value = 440;\n\n    // Modulation depth\n    const mod1Gain = context.createGain();\n    mod1Gain.gain.value = gain1Val;\n    const mod2Gain = context.createGain();\n    mod2Gain.gain.value = gain2Val;\n    const mainGain = context.createGain();\n    mainGain.gain.value = 0.5;\n\n    // Wiring everything up\n    mod1.connect(mod1Gain);\n    mod2.connect(mod2Gain);\n    mod1Gain.connect(carrier.frequency);\n    mod2Gain.connect(mod1.frequency);\n    carrier.connect(mainGain);\n    mainGain.connect(out);\n\n    // Start making sound\n    mod1.start();\n    mod2.start();\n    carrier.start();\n\n    setMod1(mod1);\n    setGain1(mod1Gain);\n    setMod2(mod2);\n    setGain2(mod2Gain);\n  };\n\n  const handleFreq1Change = (_event: unknown, value: number | number[]) => {\n    if (mod1 && typeof value === \"number\") {\n      mod1.frequency.value = value;\n      setFreq1Val(mod1.frequency.value);\n    }\n  };\n\n  const handleFreq2Change = (_event: unknown, value: number | number[]) => {\n    if (mod2 && typeof value === \"number\") {\n      mod2.frequency.value = value;\n      setFreq2Val(mod2.frequency.value);\n    }\n  };\n\n  const handleGain1Change = (_event: unknown, value: number | number[]) => {\n    if (gain1 && typeof value === \"number\") {\n      gain1.gain.value = value;\n      setGain1Val(gain1.gain.value);\n    }\n  };\n\n  const handleGain2Change = (_event: unknown, value: number | number[]) => {\n    if (gain2 && typeof value === \"number\") {\n      gain2.gain.value = value;\n      setGain2Val(gain2.gain.value);\n    }\n  };\n\n  const handleAccel = (value: AccelParams) => {\n    if (mod1) {\n      mod1.frequency.value = rangeMap(value.gamma, -90, 90, 0, MAX_FREQUENCY_1);\n      setFreq1Val(mod1.frequency.value);\n    }\n    if (gain1) {\n      gain1.gain.value = rangeMap(value.beta, -90, 90, 0, MAX_GAIN_1);\n      setGain1Val(gain1.gain.value);\n    }\n    if (mod2) {\n      mod2.frequency.value = rangeMap(value.alpha, 0, 360, 0, MAX_FREQUENCY_2);\n      setFreq2Val(mod2.frequency.value);\n    }\n  };\n\n  return (\n    <>\n      <Card>\n        <CardContent>\n          {!mod1 && (\n            <Button\n              onClick={startSynth}\n              variant=\"outlined\"\n              color=\"primary\"\n              fullWidth\n            >\n              Start\n            </Button>\n          )}\n        </CardContent>\n        <CardActions>\n          <div style={{ width: \"100%\" }}>\n            {mod1 && (\n              <>\n                <Waves />\n                <Slider\n                  value={freq1Val}\n                  onChange={handleFreq1Change}\n                  max={MAX_FREQUENCY_1}\n                  min={0}\n                  step={1}\n                />\n              </>\n            )}\n            {gain1 && (\n              <>\n                <VolumeUp />\n                <Slider\n                  value={gain1Val}\n                  onChange={handleGain1Change}\n                  max={MAX_GAIN_1}\n                  min={0}\n                  step={1}\n                />\n              </>\n            )}\n          </div>\n          <div style={{ width: \"100%\" }}>\n            {mod2 && (\n              <>\n                <Waves />\n                <Slider\n                  value={freq2Val}\n                  onChange={handleFreq2Change}\n                  max={MAX_FREQUENCY_2}\n                  min={0}\n                  step={1}\n                />\n              </>\n            )}\n            {gain2 && (\n              <>\n                <VolumeUp />\n                <Slider\n                  value={gain2Val}\n                  onChange={handleGain2Change}\n                  max={MAX_GAIN_2}\n                  min={0}\n                  step={1}\n                />\n              </>\n            )}\n          </div>\n        </CardActions>\n      </Card>\n      {mod1 && <AccelPad onChange={handleAccel} />}\n    </>\n  );\n};\n","import { FmPreset } from \".\";\n\nexport const FM_INSTRUMENTS: FmPreset[] = [\n  {\n    name: \"Basic\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackLevel: 1.0,\n        attackTime: 0.0,\n        decayLevel: 0.1,\n        decayTime: 0.1,\n        sustainLevel: 0.0,\n        sustainTime: 1.0,\n        releaseLevel: 0.0,\n        releaseTime: 0.0,\n      },\n    },\n    op2: {\n      dest: \"blackhole\",\n      type: \"sine\",\n      ratio: 0.5,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackLevel: 0.0,\n        attackTime: 0.0,\n        decayLevel: 0.0,\n        decayTime: 0.0,\n        sustainLevel: 0.0,\n        sustainTime: 0.0,\n        releaseLevel: 0.0,\n        releaseTime: 0.0,\n      },\n    },\n  },\n  {\n    name: \"Basic 2\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.0,\n      feedback: 1.0,\n      level: 1.0,\n      adsr: {\n        attackLevel: 1.0,\n        attackTime: 0.1,\n        decayLevel: 0.9,\n        decayTime: 0.2,\n        sustainLevel: 1.0,\n        sustainTime: 1.0,\n        releaseLevel: 0.0,\n        releaseTime: 1.0,\n      },\n    },\n    op2: {\n      dest: \"blackhole\",\n      type: \"sawtooth\",\n      ratio: 1.2,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackLevel: 0.0,\n        attackTime: 0.1,\n        decayLevel: 0.0,\n        decayTime: 0.0,\n        sustainLevel: 1000.0,\n        sustainTime: 0.0,\n        releaseLevel: 0.0,\n        releaseTime: 0.0,\n      },\n    },\n  },\n  {\n    name: \"Abrasive Synth\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sawtooth\",\n      ratio: 1.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.0,\n        attackLevel: 1.0,\n        decayTime: 0.0,\n        decayLevel: 1.0,\n        sustainTime: 1.0,\n        sustainLevel: 1.0,\n        releaseTime: 1.5,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"op1\",\n      type: \"sine\",\n      ratio: 1.2,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.5,\n        attackLevel: 1000.0,\n        decayTime: 1.0,\n        decayLevel: 500.0,\n        sustainTime: 1.0,\n        sustainLevel: 100.0,\n        releaseTime: 1.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"Flute\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.5,\n        attackLevel: 1.0,\n        decayTime: 0.0,\n        decayLevel: 1.0,\n        sustainTime: 1.0,\n        sustainLevel: 1.0,\n        releaseTime: 1.5,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"op1\",\n      type: \"sawtooth\",\n      ratio: 2.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.7,\n        attackLevel: 1000.0,\n        decayTime: 1.0,\n        decayLevel: 500.0,\n        sustainTime: 1.0,\n        sustainLevel: 100.0,\n        releaseTime: 1.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"Brass\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sawtooth\",\n      ratio: 1.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0,\n        attackLevel: 1.0,\n        decayTime: 0.5,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"op1\",\n      type: \"sine\",\n      ratio: 0.501,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.1,\n        attackLevel: 1000.0,\n        decayTime: 0.5,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"Bass\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 0.5,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0,\n        attackLevel: 1.0,\n        decayTime: 0.5,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"op1\",\n      type: \"sine\",\n      ratio: 0.501,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.1,\n        attackLevel: 1000.0,\n        decayTime: 0.5,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"Bell\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0,\n        attackLevel: 1.0,\n        decayTime: 0.5,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"op1\",\n      type: \"sine\",\n      ratio: 1.27,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.1,\n        attackLevel: 1000.0,\n        decayTime: 0.5,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"Guitar\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0,\n        attackLevel: 1.0,\n        decayTime: 1.0,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"op1\",\n      type: \"sine\",\n      ratio: 3.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.01,\n        attackLevel: 2000.0,\n        decayTime: 0.7,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"E Piano\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0,\n        attackLevel: 1.0,\n        decayTime: 1.0,\n        decayLevel: 0.7,\n        sustainTime: 1.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"op1\",\n      type: \"sine\",\n      ratio: 3.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.0,\n        attackLevel: 2000.0,\n        decayTime: 0.2,\n        decayLevel: 0.7,\n        sustainTime: 5.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"E Piano 2\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.0,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0,\n        attackLevel: 1.0,\n        decayTime: 1.0,\n        decayLevel: 0.7,\n        sustainTime: 1.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"op1\",\n      type: \"sine\",\n      ratio: 2.01,\n      feedback: 0.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.0,\n        attackLevel: 2000.0,\n        decayTime: 0.2,\n        decayLevel: 0.7,\n        sustainTime: 5.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"Snare Drum\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 0.5,\n      feedback: 10090.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.0,\n        attackLevel: 1.0,\n        decayTime: 0.1,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.5,\n      feedback: 5000.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.0,\n        attackLevel: 1.0,\n        decayTime: 0.1,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n  {\n    name: \"High Hat\",\n    gain: 1.0,\n    op1: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 0.5,\n      feedback: 10090.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.0,\n        attackLevel: 1.0,\n        decayTime: 0.04,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n    op2: {\n      dest: \"out\",\n      type: \"sine\",\n      ratio: 1.5,\n      feedback: 5000.0,\n      level: 1.0,\n      adsr: {\n        attackTime: 0.0,\n        attackLevel: 1.0,\n        decayTime: 0.02,\n        decayLevel: 0.0,\n        sustainTime: 0.0,\n        sustainLevel: 0.0,\n        releaseTime: 0.0,\n        releaseLevel: 0.0,\n      },\n    },\n  },\n];\n","import { FM_INSTRUMENTS } from \"./instruments\";\n\ninterface FmAdsrPreset {\n  attackLevel: number;\n  attackTime: number;\n  decayLevel: number;\n  decayTime: number;\n  sustainLevel: number;\n  sustainTime: number;\n  releaseLevel: number;\n  releaseTime: number;\n}\n\ninterface FmOpPreset {\n  type: \"sawtooth\" | \"sine\" | \"square\" | \"triangle\" | \"custom\";\n  custom?: {\n    real: Float32Array;\n    imag: Float32Array;\n  };\n  dest: \"op1\" | \"op2\" | \"out\" | \"blackhole\";\n  ratio: number;\n  adsr: FmAdsrPreset;\n  feedback: number;\n  level: number;\n}\n\nexport interface FmPreset {\n  gain: number;\n  op1: FmOpPreset;\n  op2: FmOpPreset;\n  name?: string;\n}\n\nexport class FmSynth {\n  private readonly context: AudioContext;\n\n  private readonly gain: GainNode;\n\n  private readonly op1: OscillatorNode;\n\n  private readonly op2: OscillatorNode;\n\n  private readonly op1Gain: GainNode;\n\n  private readonly op2Gain: GainNode;\n\n  private readonly op1Feedback: GainNode;\n\n  private readonly op2Feedback: GainNode;\n\n  private readonly analyser: AnalyserNode;\n\n  private preset: FmPreset;\n\n  public constructor() {\n    // Create audio context\n    this.context = new AudioContext();\n    this.context.resume();\n\n    // Create analyser\n    this.analyser = this.context.createAnalyser();\n    this.analyser.fftSize = 256;\n\n    // Create oscs\n    this.op1 = this.context.createOscillator();\n    this.op2 = this.context.createOscillator();\n\n    // Create gains\n    this.op1Gain = this.context.createGain();\n    this.op2Gain = this.context.createGain();\n\n    // Create feedbacks\n    this.op1Feedback = this.context.createGain();\n    this.op2Feedback = this.context.createGain();\n\n    // Create global gain\n    this.gain = this.context.createGain();\n\n    // Wiring\n    this.op1.connect(this.op1Gain);\n    this.op1.connect(this.op1Feedback);\n    this.op2.connect(this.op2Gain);\n    this.op2.connect(this.op2Feedback);\n    this.gain.connect(this.context.destination);\n    this.gain.connect(this.analyser);\n\n    // Start Synth\n    this.op1.start();\n    this.op2.start();\n\n    // Setup preset\n    this.preset = FM_INSTRUMENTS[0];\n    this.changeInstrument(this.preset);\n  }\n\n  public programChange(instrument: number): void {\n    const preset = FM_INSTRUMENTS[instrument];\n\n    if (!preset) {\n      return;\n    }\n\n    this.changeInstrument(preset);\n  }\n\n  public changeInstrument(preset: FmPreset): void {\n    // Set preset\n    this.preset = preset;\n\n    // Gain\n    this.gain.gain.value = preset.gain;\n\n    // Wave\n    if (preset.op1.type === \"custom\" && preset.op1.custom) {\n      const wave = this.context.createPeriodicWave(\n        preset.op1.custom.real,\n        preset.op1.custom.imag\n      );\n      this.op1.setPeriodicWave(wave);\n    } else {\n      this.op1.type = preset.op1.type;\n    }\n\n    if (preset.op2.type === \"custom\" && preset.op2.custom) {\n      const wave = this.context.createPeriodicWave(\n        preset.op2.custom.real,\n        preset.op2.custom.imag\n      );\n      this.op2.setPeriodicWave(wave);\n    } else {\n      this.op2.type = preset.op2.type;\n    }\n\n    // Gain\n    this.op1Gain.gain.value = 0.0;\n    this.op2Gain.gain.value = 0.0;\n\n    // Feedback\n    this.op1Feedback.disconnect();\n    this.op2Feedback.disconnect();\n\n    this.op1Feedback.gain.value = preset.op1.feedback;\n    this.op2Feedback.gain.value = preset.op2.feedback;\n\n    if (preset.op1.feedback > 0) {\n      this.op1Feedback.connect(this.op1.frequency);\n    }\n    if (preset.op2.feedback > 0) {\n      this.op2Feedback.connect(this.op2.frequency);\n    }\n\n    // Op 1 wiring\n    this.op1Gain.disconnect();\n    switch (preset.op1.dest) {\n      case \"op2\":\n        this.op1Gain.connect(this.op2.frequency);\n        break;\n      case \"out\":\n        this.op1Gain.connect(this.gain);\n        break;\n      default:\n        break;\n    }\n\n    // Op 2 wiring\n    this.op2Gain.disconnect();\n    switch (preset.op2.dest) {\n      case \"op1\":\n        this.op2Gain.connect(this.op1.frequency);\n        break;\n      case \"out\":\n        this.op2Gain.connect(this.gain);\n        break;\n      default:\n        break;\n    }\n  }\n\n  public play(freq: number): void {\n    // Set frequency\n    this.op1.frequency.value = freq * this.preset.op1.ratio;\n    this.op2.frequency.value = freq * this.preset.op2.ratio;\n\n    const now = this.context.currentTime;\n\n    // Op 1 ADSR\n    this.op1Gain.gain.cancelScheduledValues(0);\n    this.op1Gain.gain.setValueAtTime(0, now);\n    this.op1Gain.gain.linearRampToValueAtTime(\n      this.preset.op1.adsr.attackLevel * this.preset.op1.level,\n      now + this.preset.op1.adsr.attackTime\n    );\n    this.op1Gain.gain.linearRampToValueAtTime(\n      this.preset.op1.adsr.decayLevel * this.preset.op1.level,\n      now + this.preset.op1.adsr.attackTime + this.preset.op1.adsr.decayTime\n    );\n    this.op1Gain.gain.linearRampToValueAtTime(\n      this.preset.op1.adsr.sustainLevel * this.preset.op1.level,\n      now +\n        this.preset.op1.adsr.attackTime +\n        this.preset.op1.adsr.decayTime +\n        this.preset.op1.adsr.sustainTime\n    );\n\n    // Op 2 ADSR\n    this.op2Gain.gain.cancelScheduledValues(0);\n    this.op2Gain.gain.setValueAtTime(0, now);\n    this.op2Gain.gain.linearRampToValueAtTime(\n      this.preset.op2.adsr.attackLevel * this.preset.op2.level,\n      now + this.preset.op2.adsr.attackTime\n    );\n    this.op2Gain.gain.linearRampToValueAtTime(\n      this.preset.op2.adsr.decayLevel * this.preset.op2.level,\n      now + this.preset.op2.adsr.attackTime + this.preset.op2.adsr.decayTime\n    );\n    this.op2Gain.gain.linearRampToValueAtTime(\n      this.preset.op2.adsr.sustainLevel * this.preset.op2.level,\n      now +\n        this.preset.op2.adsr.attackTime +\n        this.preset.op2.adsr.decayTime +\n        this.preset.op2.adsr.sustainTime\n    );\n  }\n\n  public stop(): void {\n    const now = this.context.currentTime;\n\n    // Op 1 ADSR\n    this.op1Gain.gain.cancelScheduledValues(0);\n    this.op1Gain.gain.setValueAtTime(this.op1Gain.gain.value, now);\n    this.op1Gain.gain.linearRampToValueAtTime(\n      this.preset.op1.adsr.releaseLevel * this.preset.op1.level,\n      now + this.preset.op1.adsr.releaseTime\n    );\n\n    // Op 2 ADSR\n    this.op2Gain.gain.cancelScheduledValues(0);\n    this.op2Gain.gain.setValueAtTime(this.op2Gain.gain.value, now);\n    this.op2Gain.gain.linearRampToValueAtTime(\n      this.preset.op2.adsr.releaseLevel * this.preset.op2.level,\n      now + this.preset.op2.adsr.releaseTime\n    );\n  }\n\n  public destroy(): void {\n    this.op1.disconnect();\n    this.op2.disconnect();\n    this.op1Gain.disconnect();\n    this.op2Gain.disconnect();\n    this.op1Feedback.disconnect();\n    this.op2Feedback.disconnect();\n    this.gain.disconnect();\n    if (this.context.state !== \"closed\") {\n      this.context.close();\n      this.op1.stop();\n      this.op2.stop();\n    }\n  }\n\n  public getAnalyser(): AnalyserNode {\n    return this.analyser;\n  }\n}\n\nexport { FM_INSTRUMENTS };\n","import * as React from \"react\";\n\nexport const Oscilloscope: React.FC<{ analyser?: AnalyserNode }> = ({\n  analyser,\n}) => {\n  const oscRef = React.useRef<HTMLCanvasElement>(null);\n  const parentRef = React.useRef<HTMLDivElement>(null);\n  const [width, setWidth] = React.useState(0);\n\n  React.useEffect(() => {\n    if (parentRef.current) {\n      setWidth(parentRef.current.clientWidth);\n    }\n  }, [parentRef]);\n\n  React.useEffect(() => {\n    const render = () => {\n      if (!oscRef.current) {\n        return;\n      }\n\n      const ctx = oscRef.current.getContext(\"2d\");\n      if (!ctx) {\n        return;\n      }\n\n      // Setup draw\n      ctx.fillStyle = \"rgb(0, 0, 0)\";\n      ctx.fillRect(0, 0, oscRef.current.width, oscRef.current.height);\n      ctx.lineWidth = 2;\n      ctx.strokeStyle = \"rgb(255, 255, 255)\";\n      ctx.beginPath();\n\n      if (!analyser) {\n        ctx.moveTo(0, oscRef.current.height / 2);\n        ctx.lineTo(oscRef.current.width, oscRef.current.height / 2);\n        ctx.stroke();\n        return;\n      }\n\n      const bufferLength = analyser.frequencyBinCount;\n      const dataArray = new Uint8Array(bufferLength);\n      analyser.getByteTimeDomainData(dataArray);\n\n      const sliceWidth = (oscRef.current.width * 1.0) / bufferLength;\n      let x = 0;\n      for (let i = 0; i < dataArray.length; i++) {\n        const v = dataArray[i] / 128.0;\n        const y = (v * oscRef.current.height) / 2;\n\n        if (i === 0) {\n          ctx.moveTo(x, y);\n        } else {\n          ctx.lineTo(x, y);\n        }\n\n        x += sliceWidth;\n      }\n      ctx.lineTo(oscRef.current.width, oscRef.current.height / 2);\n      ctx.stroke();\n      return requestAnimationFrame(render);\n    };\n\n    const requestId = render();\n\n    return () => {\n      if (requestId) {\n        cancelAnimationFrame(requestId);\n      }\n    };\n  }, [analyser, oscRef, width]);\n\n  return (\n    <div ref={parentRef} style={{ width: \"100%\" }}>\n      <canvas width={width} height={150} ref={oscRef} />\n    </div>\n  );\n};\n","import React from \"react\";\nimport * as yup from \"yup\";\nimport { RouteComponentProps } from \"@reach/router\";\nimport {\n  Button,\n  Card,\n  CardContent,\n  Grid,\n  MenuItem,\n  Select,\n  Slider,\n  Typography,\n  InputLabel,\n  CardActions,\n  TextField,\n} from \"@material-ui/core\";\n\nimport { FmPreset, FmSynth, FM_INSTRUMENTS } from \"../components/FmSynth\";\nimport { rangeMap } from \"../helpers/helpers\";\nimport { Oscilloscope } from \"../components/Oscilloscope\";\n\nexport const FmSynthController: React.FC<RouteComponentProps> = () => {\n  const [fmSynth, setFmSynth] = React.useState<FmSynth | null>(null);\n  const [preset, setPreset] = React.useState<FmPreset>(FM_INSTRUMENTS[0]);\n  const [copied, setCopied] = React.useState(false);\n  const [presetText, setPresetText] = React.useState(\"\");\n  const [presetError, setPresetError] = React.useState(\"\");\n\n  const playNote = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    if (!fmSynth) {\n      setFmSynth(new FmSynth());\n      return;\n    }\n    fmSynth.changeInstrument(preset);\n    const bounding = event.currentTarget.getBoundingClientRect();\n    const freq = rangeMap(\n      event.clientX - bounding.x,\n      0,\n      bounding.width,\n      50,\n      2000\n    );\n    fmSynth.play(freq);\n  };\n\n  const stopNote = () => {\n    if (!fmSynth) {\n      return;\n    }\n\n    fmSynth.stop();\n  };\n\n  const reset = () => {\n    setPreset(FM_INSTRUMENTS[0]);\n  };\n\n  const copyPreset = async () => {\n    await navigator.clipboard.writeText(btoa(JSON.stringify(preset)));\n    setCopied(true);\n    setTimeout(() => {\n      setCopied(false);\n    }, 1000);\n  };\n\n  const handlePresetChange = (\n    event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>\n  ) => {\n    setPresetText(event.target.value);\n  };\n\n  const loadPreset = () => {\n    try {\n      const parsed = JSON.parse(atob(presetText));\n\n      const opSchema = yup\n        .object({\n          type: yup\n            .mixed<\"sawtooth\" | \"sine\" | \"square\" | \"triangle\">()\n            .oneOf([\"sawtooth\", \"sine\", \"square\", \"triangle\"])\n            .required(),\n          dest: yup\n            .mixed<\"op1\" | \"op2\" | \"out\" | \"blackhole\">()\n            .oneOf([\"op1\", \"op2\", \"out\", \"blackhole\"])\n            .required(),\n          ratio: yup.number().required(),\n          feedback: yup.number().required(),\n          level: yup.number().required(),\n          adsr: yup\n            .object({\n              attackLevel: yup.number().required(),\n              attackTime: yup.number().required(),\n              decayLevel: yup.number().required(),\n              decayTime: yup.number().required(),\n              sustainLevel: yup.number().required(),\n              sustainTime: yup.number().required(),\n              releaseLevel: yup.number().required(),\n              releaseTime: yup.number().required(),\n            })\n            .required(),\n        })\n        .required();\n\n      const schema = yup\n        .object({\n          gain: yup.number().required(),\n          op1: opSchema,\n          op2: opSchema,\n        })\n        .required();\n\n      const res = schema.validateSync(parsed);\n      setPreset(res);\n    } catch (e) {\n      setPresetError(\"Invalid preset\");\n    }\n    setTimeout(() => {\n      setPresetError(\"\");\n    }, 1000);\n  };\n\n  return (\n    <>\n      <Grid container spacing={1}>\n        <Grid xs={6} item>\n          <OpPreset op=\"op1\" preset={preset} setPreset={setPreset} />\n        </Grid>\n        <Grid xs={6} item>\n          <OpPreset op=\"op2\" preset={preset} setPreset={setPreset} />\n        </Grid>\n\n        <Grid xs={12} item>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h5\">Controller</Typography>\n            </CardContent>\n            <CardActions>\n              <Button\n                onMouseDown={playNote}\n                onMouseUp={stopNote}\n                variant=\"outlined\"\n                color=\"primary\"\n                fullWidth\n              >\n                Play\n              </Button>\n\n              <Button\n                onClick={playNote}\n                variant=\"outlined\"\n                color=\"primary\"\n                fullWidth\n              >\n                Hold\n              </Button>\n\n              <Button\n                onClick={stopNote}\n                variant=\"outlined\"\n                color=\"primary\"\n                fullWidth\n              >\n                Stop\n              </Button>\n\n              <Button\n                onClick={reset}\n                variant=\"outlined\"\n                color=\"primary\"\n                fullWidth\n              >\n                Reset\n              </Button>\n            </CardActions>\n            <Oscilloscope analyser={fmSynth?.getAnalyser()} />\n          </Card>\n        </Grid>\n\n        <Grid xs={12} item>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h5\">Presets</Typography>\n            </CardContent>\n            <CardActions>\n              <Select\n                variant=\"outlined\"\n                style={{ marginBottom: 16 }}\n                onChange={(event) => {\n                  if (typeof event.target.value === \"number\") {\n                    setPreset(FM_INSTRUMENTS[event.target.value]);\n                  }\n                }}\n                defaultValue={0}\n                fullWidth\n                placeholder=\"Select a preset\"\n                color=\"primary\"\n              >\n                <MenuItem value={-1} disabled>\n                  Select a preset\n                </MenuItem>\n                {FM_INSTRUMENTS.map((preset, index) => (\n                  <MenuItem value={index} key={index}>\n                    {preset.name ?? `Preset ${index}`}\n                  </MenuItem>\n                ))}\n              </Select>\n            </CardActions>\n          </Card>\n        </Grid>\n\n        <Grid xs={12} item>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h5\">Share</Typography>\n            </CardContent>\n            <CardActions>\n              <Button\n                onClick={copyPreset}\n                variant=\"outlined\"\n                color={copied ? \"secondary\" : \"primary\"}\n                fullWidth\n              >\n                {copied ? \"Copied!\" : \"Copy preset\"}\n              </Button>\n            </CardActions>\n            <CardActions>\n              <TextField\n                variant=\"outlined\"\n                color=\"primary\"\n                fullWidth\n                type=\"text\"\n                onChange={handlePresetChange}\n              />\n              <Button\n                onClick={loadPreset}\n                variant=\"outlined\"\n                fullWidth\n                color={presetError ? \"secondary\" : \"primary\"}\n              >\n                {presetError ? presetError : \"Load Preset\"}\n              </Button>\n            </CardActions>\n          </Card>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n\nconst OpPreset: React.FC<{\n  op: \"op1\" | \"op2\";\n  preset: FmPreset;\n  setPreset: React.Dispatch<React.SetStateAction<FmPreset>>;\n}> = ({ preset, setPreset, op }) => {\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h5\" gutterBottom>\n          {op === \"op1\" ? \"Operator 1\" : \"Operator 2\"}\n        </Typography>\n\n        <InputLabel>Wave Type</InputLabel>\n        <Select\n          style={{ marginBottom: 16 }}\n          value={preset[op].type}\n          onChange={(\n            event: React.ChangeEvent<{\n              value: unknown;\n            }>\n          ) => {\n            const type = event.target.value as\n              | \"sawtooth\"\n              | \"sine\"\n              | \"square\"\n              | \"triangle\";\n            setPreset({ ...preset, [op]: { ...preset[op], type } });\n          }}\n          fullWidth\n        >\n          <MenuItem value=\"sine\">Sine</MenuItem>\n          <MenuItem value=\"sawtooth\">Sawtooth</MenuItem>\n          <MenuItem value=\"triangle\">Triangle</MenuItem>\n          <MenuItem value=\"square\">Square</MenuItem>\n        </Select>\n\n        <InputLabel>Destination</InputLabel>\n        <Select\n          style={{ marginBottom: 16 }}\n          value={preset[op].dest}\n          onChange={(\n            event: React.ChangeEvent<{\n              value: unknown;\n            }>\n          ) => {\n            const dest = event.target.value as\n              | \"op1\"\n              | \"op2\"\n              | \"out\"\n              | \"blackhole\";\n            setPreset({ ...preset, [op]: { ...preset[op], dest } });\n          }}\n          fullWidth\n        >\n          {op === \"op2\" && <MenuItem value=\"op1\">Operator 1</MenuItem>}\n          {op === \"op1\" && <MenuItem value=\"op2\">Operator 2</MenuItem>}\n          <MenuItem value=\"out\">Output</MenuItem>\n          <MenuItem value=\"blackhole\">Blackhole</MenuItem>\n        </Select>\n\n        <InputLabel>Level</InputLabel>\n        <Slider\n          valueLabelDisplay=\"auto\"\n          value={preset[op].level}\n          onChange={(_event: unknown, value: number | number[]) => {\n            if (typeof value === \"number\") {\n              setPreset({ ...preset, [op]: { ...preset[op], level: value } });\n            }\n          }}\n          max={10000}\n          min={0}\n          step={1}\n        />\n\n        <InputLabel>Level (Fine)</InputLabel>\n        <Slider\n          valueLabelDisplay=\"auto\"\n          value={preset[op].level}\n          onChange={(_event: unknown, value: number | number[]) => {\n            if (typeof value === \"number\") {\n              setPreset({ ...preset, [op]: { ...preset[op], level: value } });\n            }\n          }}\n          max={1}\n          min={0}\n          step={0.01}\n        />\n\n        <InputLabel>Ratio</InputLabel>\n        <Slider\n          valueLabelDisplay=\"auto\"\n          value={preset[op].ratio}\n          onChange={(_event: unknown, value: number | number[]) => {\n            if (typeof value === \"number\") {\n              setPreset({ ...preset, [op]: { ...preset[op], ratio: value } });\n            }\n          }}\n          max={10}\n          min={0}\n          step={0.01}\n        />\n\n        <InputLabel>Feedback (Does not work on some browsers)</InputLabel>\n        <Slider\n          valueLabelDisplay=\"auto\"\n          value={preset[op].feedback}\n          onChange={(_event: unknown, value: number | number[]) => {\n            if (typeof value === \"number\") {\n              setPreset({\n                ...preset,\n                [op]: { ...preset[op], feedback: value },\n              });\n            }\n          }}\n          max={2000}\n          min={0}\n          step={1}\n        />\n\n        <Typography variant=\"h5\" gutterBottom>\n          ADSR\n        </Typography>\n\n        <Grid container spacing={1}>\n          <Grid xs={6} item>\n            <InputLabel>Attack Time</InputLabel>\n            <Slider\n              valueLabelDisplay=\"auto\"\n              value={preset[op].adsr.attackTime}\n              onChange={(_event: unknown, value: number | number[]) => {\n                if (typeof value === \"number\") {\n                  setPreset({\n                    ...preset,\n                    [op]: {\n                      ...preset[op],\n                      adsr: { ...preset[op].adsr, attackTime: value },\n                    },\n                  });\n                }\n              }}\n              max={5}\n              min={0}\n              step={0.1}\n            />\n          </Grid>\n          <Grid xs={6} item>\n            <InputLabel>Attack Level</InputLabel>\n            <Slider\n              valueLabelDisplay=\"auto\"\n              value={preset[op].adsr.attackLevel}\n              onChange={(_event: unknown, value: number | number[]) => {\n                if (typeof value === \"number\") {\n                  setPreset({\n                    ...preset,\n                    [op]: {\n                      ...preset[op],\n                      adsr: { ...preset[op].adsr, attackLevel: value },\n                    },\n                  });\n                }\n              }}\n              max={1.0}\n              min={0}\n              step={0.01}\n            />\n          </Grid>\n        </Grid>\n\n        <Grid container spacing={1}>\n          <Grid xs={6} item>\n            <InputLabel>Decay Time</InputLabel>\n            <Slider\n              valueLabelDisplay=\"auto\"\n              value={preset[op].adsr.decayTime}\n              onChange={(_event: unknown, value: number | number[]) => {\n                if (typeof value === \"number\") {\n                  setPreset({\n                    ...preset,\n                    [op]: {\n                      ...preset[op],\n                      adsr: { ...preset[op].adsr, decayTime: value },\n                    },\n                  });\n                }\n              }}\n              max={5}\n              min={0}\n              step={0.1}\n            />\n          </Grid>\n          <Grid xs={6} item>\n            <InputLabel>Decay Level</InputLabel>\n            <Slider\n              valueLabelDisplay=\"auto\"\n              value={preset[op].adsr.decayLevel}\n              onChange={(_event: unknown, value: number | number[]) => {\n                if (typeof value === \"number\") {\n                  setPreset({\n                    ...preset,\n                    [op]: {\n                      ...preset[op],\n                      adsr: { ...preset[op].adsr, decayLevel: value },\n                    },\n                  });\n                }\n              }}\n              max={1.0}\n              min={0}\n              step={0.01}\n            />\n          </Grid>\n        </Grid>\n\n        <Grid container spacing={1}>\n          <Grid xs={6} item>\n            <InputLabel>Sustain Time</InputLabel>\n            <Slider\n              valueLabelDisplay=\"auto\"\n              value={preset[op].adsr.sustainTime}\n              onChange={(_event: unknown, value: number | number[]) => {\n                if (typeof value === \"number\") {\n                  setPreset({\n                    ...preset,\n                    [op]: {\n                      ...preset[op],\n                      adsr: { ...preset[op].adsr, sustainTime: value },\n                    },\n                  });\n                }\n              }}\n              max={5}\n              min={0}\n              step={0.1}\n            />\n          </Grid>\n          <Grid xs={6} item>\n            <InputLabel>Sustain Level</InputLabel>\n            <Slider\n              valueLabelDisplay=\"auto\"\n              value={preset[op].adsr.sustainLevel}\n              onChange={(_event: unknown, value: number | number[]) => {\n                if (typeof value === \"number\") {\n                  setPreset({\n                    ...preset,\n                    [op]: {\n                      ...preset[op],\n                      adsr: { ...preset[op].adsr, sustainLevel: value },\n                    },\n                  });\n                }\n              }}\n              max={1.0}\n              min={0}\n              step={0.01}\n            />\n          </Grid>\n        </Grid>\n\n        <Grid container spacing={1}>\n          <Grid xs={6} item>\n            <InputLabel>Release Time</InputLabel>\n            <Slider\n              valueLabelDisplay=\"auto\"\n              value={preset[op].adsr.releaseTime}\n              onChange={(_event: unknown, value: number | number[]) => {\n                if (typeof value === \"number\") {\n                  setPreset({\n                    ...preset,\n                    [op]: {\n                      ...preset[op],\n                      adsr: { ...preset[op].adsr, releaseTime: value },\n                    },\n                  });\n                }\n              }}\n              max={5}\n              min={0}\n              step={0.1}\n            />\n          </Grid>\n          <Grid xs={6} item>\n            <InputLabel>Release Level</InputLabel>\n            <Slider\n              valueLabelDisplay=\"auto\"\n              value={preset[op].adsr.releaseLevel}\n              onChange={(_event: unknown, value: number | number[]) => {\n                if (typeof value === \"number\") {\n                  setPreset({\n                    ...preset,\n                    [op]: {\n                      ...preset[op],\n                      adsr: { ...preset[op].adsr, releaseLevel: value },\n                    },\n                  });\n                }\n              }}\n              max={1.0}\n              min={0}\n              step={0.01}\n            />\n          </Grid>\n        </Grid>\n      </CardContent>\n    </Card>\n  );\n};\n","import React from \"react\";\nimport { RouteComponentProps } from \"@reach/router\";\nimport {\n  Button,\n  Card,\n  CardContent,\n  Grid,\n  MenuItem,\n  Select,\n  Typography,\n  CardActions,\n} from \"@material-ui/core\";\n\nimport { FmPreset, FmSynth } from \"../components/FmSynth\";\nimport { rangeMap } from \"../helpers/helpers\";\n\nconst DEFAULT_PRESET: FmPreset = {\n  gain: 1.0,\n  op1: {\n    ratio: 1,\n    dest: \"out\",\n    feedback: 0,\n    level: 1.0,\n    type: \"sine\",\n    adsr: {\n      attackLevel: 1.0,\n      attackTime: 0.1,\n      decayLevel: 0.8,\n      decayTime: 0.1,\n      sustainLevel: 0.5,\n      sustainTime: 0.2,\n      releaseLevel: 0.0,\n      releaseTime: 0.3,\n    },\n  },\n  op2: {\n    ratio: 1,\n    dest: \"op1\",\n    feedback: 0,\n    level: 1000.0,\n    type: \"sine\",\n    adsr: {\n      attackLevel: 1.0,\n      attackTime: 0.1,\n      decayLevel: 0.8,\n      decayTime: 0.1,\n      sustainLevel: 0.5,\n      sustainTime: 0.2,\n      releaseLevel: 0.0,\n      releaseTime: 0.3,\n    },\n  },\n};\n\nexport const Harmonicity: React.FC<RouteComponentProps> = () => {\n  const [fmSynth, setFmSynth] = React.useState<FmSynth | null>(null);\n  const [preset, setPreset] = React.useState<FmPreset>(DEFAULT_PRESET);\n\n  const playNote = (event: React.MouseEvent<HTMLButtonElement, MouseEvent>) => {\n    if (!fmSynth) {\n      setFmSynth(new FmSynth());\n      return;\n    }\n    fmSynth.changeInstrument(preset);\n    const bounding = event.currentTarget.getBoundingClientRect();\n    const freq = rangeMap(\n      event.clientX - bounding.x,\n      0,\n      bounding.width,\n      50,\n      2000\n    );\n    fmSynth.play(freq);\n  };\n\n  const stopNote = () => {\n    if (!fmSynth) {\n      return;\n    }\n\n    fmSynth.stop();\n  };\n\n  return (\n    <>\n      <Grid container spacing={1}>\n        <Grid xs={12} item>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h5\">Controller</Typography>\n            </CardContent>\n            <CardActions>\n              <Button\n                onMouseDown={playNote}\n                onMouseUp={stopNote}\n                variant=\"outlined\"\n                color=\"primary\"\n                fullWidth\n              >\n                Play\n              </Button>\n\n              <Button\n                onClick={playNote}\n                variant=\"outlined\"\n                color=\"primary\"\n                fullWidth\n              >\n                Hold\n              </Button>\n\n              <Button\n                onClick={stopNote}\n                variant=\"outlined\"\n                color=\"primary\"\n                fullWidth\n              >\n                Stop\n              </Button>\n            </CardActions>\n          </Card>\n        </Grid>\n\n        <Grid xs={12} item>\n          <Card>\n            <CardContent>\n              <Typography variant=\"h5\">Ratios</Typography>\n              {preset.op2.ratio % preset.op1.ratio === 0 ? (\n                <Typography variant=\"body1\">The ratio is HARMONIC</Typography>\n              ) : (\n                <Typography variant=\"body1\">The ratio is INHARMONIC</Typography>\n              )}\n            </CardContent>\n            <CardActions>\n              <Select\n                variant=\"outlined\"\n                style={{ marginBottom: 16 }}\n                onChange={(event) => {\n                  if (typeof event.target.value === \"number\") {\n                    setPreset({\n                      ...preset,\n                      op1: { ...preset.op1, ratio: event.target.value },\n                    });\n                  }\n                }}\n                value={preset.op1.ratio}\n                fullWidth\n                placeholder=\"Select a preset\"\n                color=\"primary\"\n              >\n                <MenuItem value={1}>1</MenuItem>\n                <MenuItem value={2}>2</MenuItem>\n                <MenuItem value={3}>3</MenuItem>\n                <MenuItem value={4}>4</MenuItem>\n                <MenuItem value={5}>5</MenuItem>\n                <MenuItem value={6}>6</MenuItem>\n                <MenuItem value={7}>7</MenuItem>\n              </Select>\n\n              <Select\n                variant=\"outlined\"\n                style={{ marginBottom: 16 }}\n                onChange={(event) => {\n                  if (typeof event.target.value === \"number\") {\n                    setPreset({\n                      ...preset,\n                      op2: { ...preset.op1, ratio: event.target.value },\n                    });\n                  }\n                }}\n                value={preset.op2.ratio}\n                fullWidth\n                placeholder=\"Select a preset\"\n                color=\"primary\"\n              >\n                <MenuItem value={1}>1</MenuItem>\n                <MenuItem value={2}>2</MenuItem>\n                <MenuItem value={3}>3</MenuItem>\n                <MenuItem value={4}>4</MenuItem>\n                <MenuItem value={5}>5</MenuItem>\n                <MenuItem value={6}>6</MenuItem>\n                <MenuItem value={7}>7</MenuItem>\n              </Select>\n            </CardActions>\n          </Card>\n        </Grid>\n      </Grid>\n    </>\n  );\n};\n","import React from \"react\";\n\nexport const DotDraw: React.FC<{\n  samples: number;\n  height: number;\n  points: Float32Array;\n  onChange: (points: Float32Array) => void;\n}> = ({ samples, height, points, onChange }) => {\n  const ref = React.useRef<HTMLCanvasElement>(null);\n  const parentRef = React.useRef<HTMLDivElement>(null);\n\n  const [drawing, setDrawing] = React.useState(false);\n  const [canvasWidth, setCanvasWidth] = React.useState(0);\n\n  React.useEffect(() => {\n    if (parentRef.current) {\n      setCanvasWidth(parentRef.current.clientWidth);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [parentRef]);\n\n  React.useEffect(() => {\n    // Do draw\n    const render = () => {\n      if (!ref.current) {\n        return;\n      }\n      const ctx = ref.current.getContext(\"2d\");\n      if (!ctx) {\n        return;\n      }\n\n      // Get size\n      const { height, width } = ref.current;\n\n      // Clear\n      ctx.fillStyle = \"#000000\";\n      ctx.fillRect(0, 0, width, height);\n\n      // Draw center line\n      ctx.strokeStyle = \"#FFFFFF\";\n      ctx.beginPath();\n      ctx.moveTo(0, height / 2);\n      ctx.lineTo(width, height / 2);\n      ctx.stroke();\n\n      // Draw blocks\n      const radius = canvasWidth / samples / 2;\n      let x = radius;\n\n      points.forEach((val, index) => {\n        const y = height / 2 - val * (height / 2);\n\n        // Draw stroke\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(x, height / 2);\n        ctx.stroke();\n\n        // Draw ellipse\n        ctx.beginPath();\n        ctx.fillStyle = `rgba(${(index * 255) / points.length},${\n          val * 255\n        },255,1)`;\n        ctx.ellipse(x, y, radius / 2, radius / 2, 0, 0, 2 * Math.PI);\n        ctx.fill();\n\n        // Incr x\n        x += radius * 2;\n      });\n\n      return requestAnimationFrame(render);\n    };\n\n    const requestId = render();\n\n    return () => {\n      if (requestId) {\n        cancelAnimationFrame(requestId);\n      }\n    };\n  }, [canvasWidth, points, samples, height]);\n\n  const updatePoints = (\n    event: React.MouseEvent<HTMLCanvasElement, MouseEvent>,\n    drawing: boolean\n  ) => {\n    if (!drawing) {\n      return;\n    }\n\n    // Get coordinates, and map to pts domain\n    const bounding = event.currentTarget.getBoundingClientRect();\n    const x = Math.floor(\n      (event.clientX - bounding.x) * (samples / canvasWidth)\n    );\n    const clickPos = event.clientY - bounding.y;\n    const y = -((2 * clickPos) / height - 1);\n\n    // Set point value\n    const pts = points.copyWithin(0, 0);\n    if (typeof pts[x] === \"number\") {\n      pts[x] = y;\n    }\n    onChange(pts);\n  };\n\n  const handleMouseUp = () => {\n    setDrawing(false);\n  };\n\n  const handleMouseDown = (\n    event: React.MouseEvent<HTMLCanvasElement, MouseEvent>\n  ) => {\n    setDrawing(true);\n    updatePoints(event, true);\n  };\n\n  return (\n    <div ref={parentRef} style={{ width: \"100%\" }}>\n      <canvas\n        width={canvasWidth}\n        height={height}\n        onMouseDown={handleMouseDown}\n        onMouseUp={handleMouseUp}\n        onMouseLeave={handleMouseUp}\n        onMouseMove={(event) => updatePoints(event, drawing)}\n        ref={ref}\n      />\n    </div>\n  );\n};\n","import React from \"react\";\nimport { RouteComponentProps } from \"@reach/router\";\nimport {\n  Button,\n  Card,\n  CardActions,\n  MenuItem,\n  Select,\n  Slider,\n  Typography,\n} from \"@material-ui/core\";\n\nimport { FmPreset, FmSynth } from \"../components/FmSynth\";\nimport { Oscilloscope } from \"../components/Oscilloscope\";\nimport { DotDraw } from \"../components/DotDraw\";\n\nconst CANVAS_HEIGHT = 300;\nconst DEFAULT_SAMPLES = 20;\n\nconst DEFAULT_PRESET: FmPreset = {\n  name: \"Basic\",\n  gain: 0.2,\n  op1: {\n    dest: \"out\",\n    type: \"sine\",\n    ratio: 1.0,\n    feedback: 0.0,\n    level: 1.0,\n    adsr: {\n      attackLevel: 0.0,\n      attackTime: 0.0,\n      decayLevel: 0.0,\n      decayTime: 0.0,\n      sustainLevel: 1.0,\n      sustainTime: 0.0,\n      releaseLevel: 0.0,\n      releaseTime: 0.0,\n    },\n  },\n  op2: {\n    dest: \"blackhole\",\n    type: \"sine\",\n    ratio: 0.5,\n    feedback: 0.0,\n    level: 1.0,\n    adsr: {\n      attackLevel: 0.0,\n      attackTime: 0.0,\n      decayLevel: 0.0,\n      decayTime: 0.0,\n      sustainLevel: 0.0,\n      sustainTime: 0.0,\n      releaseLevel: 0.0,\n      releaseTime: 0.0,\n    },\n  },\n};\n\nconst getFourierPreset = (\n  type: \"square\" | \"triangle\" | \"sawtooth\" | \"rectified\" | \"cosine\",\n  size: number\n) => {\n  const real = new Float32Array(size);\n  const imag = new Float32Array(size);\n\n  for (let i = 0; i < size; i++) {\n    switch (type) {\n      case \"square\":\n        if (i > 0) {\n          real[i] = (2 / (i * Math.PI)) * Math.sin((i * Math.PI) / 2);\n        }\n        break;\n      case \"triangle\":\n        if (i > 0) {\n          real[i] = 4 / Math.pow(i * Math.PI, 2);\n        }\n        break;\n      case \"sawtooth\":\n        if (i > 0) {\n          imag[i] = 1 / (i * Math.PI);\n        }\n        break;\n      case \"rectified\":\n        if (i === 0) {\n          real[i] = 2 / Math.PI;\n        } else {\n          real[i] = -4 / (Math.PI * (4 * Math.pow(Math.PI, 2) - 1));\n        }\n        break;\n      case \"cosine\":\n        if (i === 0) {\n          real[i] = 2 / Math.PI;\n        } else if (i === 1) {\n          real[i] = 1;\n        }\n        break;\n      default:\n        break;\n    }\n  }\n\n  return { real, imag };\n};\n\nexport const WaveformDraw: React.FC<RouteComponentProps> = () => {\n  const [points, setPoints] = React.useState({\n    real: new Float32Array(DEFAULT_SAMPLES),\n    imag: new Float32Array(DEFAULT_SAMPLES),\n  });\n  const [fmSynth, setFmSynth] = React.useState<FmSynth | null>(null);\n  const [freq, setFreq] = React.useState(440);\n\n  React.useEffect(() => {\n    // Update preset with points\n    const newPreset: FmPreset = {\n      ...DEFAULT_PRESET,\n      op1: {\n        ...DEFAULT_PRESET.op1,\n        type: \"custom\",\n        custom: points,\n      },\n    };\n\n    if (fmSynth) {\n      fmSynth.changeInstrument(newPreset);\n      fmSynth.play(freq);\n    }\n  }, [points, freq, fmSynth]);\n\n  const stopNote = () => {\n    if (!fmSynth) {\n      return;\n    }\n    fmSynth.stop();\n  };\n\n  const reset = () => {\n    setPoints({\n      real: new Float32Array(points.real.length),\n      imag: new Float32Array(points.real.length),\n    });\n  };\n\n  const startSynth = () => {\n    if (!fmSynth) {\n      setFmSynth(new FmSynth());\n    }\n  };\n\n  return (\n    <Card>\n      <Typography variant=\"h5\">Real Component</Typography>\n      <DotDraw\n        height={CANVAS_HEIGHT}\n        samples={points.real.length}\n        points={points.real}\n        onChange={(real) => {\n          setPoints({ ...points, real });\n        }}\n      />\n      <Typography variant=\"h5\">Imaginary Component</Typography>\n      <DotDraw\n        height={CANVAS_HEIGHT}\n        samples={points.imag.length}\n        points={points.imag}\n        onChange={(imag) => {\n          setPoints({ ...points, imag });\n        }}\n      />\n      <Oscilloscope analyser={fmSynth?.getAnalyser()} />\n      <CardActions>\n        <Button\n          onClick={startSynth}\n          variant=\"outlined\"\n          color=\"primary\"\n          fullWidth\n        >\n          Start\n        </Button>\n\n        <Button onClick={stopNote} variant=\"outlined\" color=\"primary\" fullWidth>\n          Stop\n        </Button>\n\n        <Button onClick={reset} variant=\"outlined\" color=\"primary\" fullWidth>\n          Reset\n        </Button>\n      </CardActions>\n      <CardActions>\n        <Typography variant=\"body2\">Frequency</Typography>\n        <Slider\n          value={freq}\n          onChange={(_event, value) => {\n            if (typeof value === \"number\") {\n              setFreq(value);\n            }\n          }}\n          max={2000}\n          min={40}\n          step={1}\n          valueLabelDisplay=\"auto\"\n        />\n      </CardActions>\n      <CardActions>\n        <Typography variant=\"body2\">Samples</Typography>\n        <Slider\n          value={points.real.length}\n          onChange={(_event, value) => {\n            if (typeof value === \"number\") {\n              if (points.real.length > value) {\n                const real = points.real.slice(0, value);\n                const imag = points.imag.slice(0, value);\n                setPoints({\n                  real,\n                  imag,\n                });\n              } else {\n                const real = new Float32Array(value);\n                const imag = new Float32Array(value);\n                points.real.forEach((val, i) => (real[i] = val));\n                points.imag.forEach((val, i) => (imag[i] = val));\n                setPoints({\n                  real,\n                  imag,\n                });\n              }\n            }\n          }}\n          max={50}\n          min={2}\n          step={1}\n          valueLabelDisplay=\"auto\"\n        />\n      </CardActions>\n      <CardActions>\n        <Select\n          variant=\"outlined\"\n          style={{ marginBottom: 16 }}\n          onChange={(event) => {\n            const type = event.target.value as\n              | \"square\"\n              | \"triangle\"\n              | \"sawtooth\"\n              | \"rectified\"\n              | \"cosine\";\n            setPoints(getFourierPreset(type, points.real.length));\n          }}\n          defaultValue=\"\"\n          fullWidth\n          placeholder=\"Select a preset\"\n          color=\"primary\"\n        >\n          <MenuItem value=\"\" disabled>\n            Select a preset\n          </MenuItem>\n          <MenuItem value=\"square\">Square</MenuItem>\n          <MenuItem value=\"triangle\">Triangle</MenuItem>\n          <MenuItem value=\"sawtooth\">Sawtooth</MenuItem>\n          <MenuItem value=\"rectified\">Rectified</MenuItem>\n          <MenuItem value=\"cosine\">Cosine</MenuItem>\n        </Select>\n      </CardActions>\n    </Card>\n  );\n};\n","export const getChord = (transpose: number, chord: string): number[] => {\n  const [key, type] = chord.split(\"-\");\n\n  if (!key || !type) {\n    return [];\n  }\n\n  let nums: number[] = getChordType(type);\n  let offset = getChordOffset(key);\n\n  return nums.map((n) => n + 24 + transpose + offset);\n};\n\nconst getChordOffset = (key: string) => {\n  switch (key) {\n    case \"C\":\n      return 0;\n    case \"C#\":\n      return 1;\n    case \"D\":\n      return 2;\n    case \"D#\":\n      return 3;\n    case \"E\":\n      return 4;\n    case \"F\":\n      return 5;\n    case \"F#\":\n      return 6;\n    case \"G\":\n      return 7;\n    case \"G#\":\n      return 8;\n    case \"A\":\n      return 9;\n    case \"A#\":\n      return 10;\n    case \"B\":\n      return 11;\n    case \"B#\":\n      return 12;\n    default:\n      return 0;\n  }\n};\n\nconst getChordType = (type: string) => {\n  switch (type) {\n    case \"M\":\n      return [0, 4, 7];\n    case \"m\":\n      return [0, 3, 7];\n    case \"dim\":\n      return [0, 3, 8];\n    case \"aug\":\n      return [0, 4, 8];\n    case \"M7\":\n      return [0, 4, 7, 11];\n    case \"m7\":\n      return [0, 3, 7, 10];\n    case \"dom7\":\n      return [0, 4, 7, 10];\n    case \"sus2\":\n      return [0, 2, 7];\n    case \"sus4\":\n      return [0, 5, 7];\n    default:\n      return [];\n  }\n};\n","interface Sequence {\n  current: string;\n  next: string;\n}\n\nexport class MarkovChain {\n  private readonly chain: Record<string, string[]>;\n\n  private current: string;\n\n  constructor(values: Sequence[], start: string) {\n    this.chain = {};\n    for (let i = 0; i < values.length; i++) {\n      let seq = values[i];\n      if (!this.chain[seq.current]) {\n        this.chain[seq.current] = [];\n      }\n      this.chain[seq.current].push(seq.next);\n    }\n\n    this.current = start;\n  }\n\n  next(): string {\n    const currentChain = this.chain[this.current];\n\n    if (currentChain) {\n      this.current =\n        currentChain[Math.floor(Math.random() * currentChain.length)];\n    }\n\n    return this.current;\n  }\n}\n","import { getChord } from \"../../helpers/chords\";\nimport { MarkovChain } from \"../../helpers/markovChain\";\n\ninterface Operator {\n  osc: OscillatorNode;\n  oscGain: GainNode;\n  lfo: OscillatorNode;\n  panner: StereoPannerNode;\n}\n\nconst NUM_OSCS = 4;\nconst STEP_TIME = 2000;\nconst SEQ_LENGTH = 4;\n\nconst mtof = (midi: number) => {\n  return Math.pow(2, (midi - 69) / 12) * 440;\n};\n\nexport class LivingSynth {\n  private readonly context: AudioContext;\n\n  private readonly gain: GainNode;\n\n  private readonly convolver: ConvolverNode;\n\n  private readonly analyser: AnalyserNode;\n\n  private readonly operators: Operator[];\n\n  private interval: number;\n\n  private chain: MarkovChain;\n\n  private readonly arpOp: Operator;\n\n  private step: number;\n\n  public constructor() {\n    // Create audio context\n    this.context = new AudioContext();\n    this.context.resume();\n\n    // Create convolver\n    this.convolver = this.context.createConvolver();\n    this.getImpulseBuffer(\"impulse.ogg\");\n\n    // Create analyser\n    this.analyser = this.context.createAnalyser();\n    this.analyser.fftSize = 256;\n\n    // Create gains\n    this.gain = this.context.createGain();\n    this.gain.gain.value = 0.1;\n\n    // Wiring\n    this.gain.connect(this.convolver);\n    this.convolver.connect(this.context.destination);\n    this.gain.connect(this.analyser);\n\n    // Set up arp op\n    this.arpOp = {\n      osc: this.context.createOscillator(),\n      oscGain: this.context.createGain(),\n      lfo: this.context.createOscillator(),\n      panner: this.context.createStereoPanner(),\n    };\n    this.arpOp.osc.type = \"triangle\";\n    this.arpOp.osc.start();\n    this.arpOp.lfo.start();\n    this.arpOp.osc.connect(this.arpOp.oscGain);\n    this.arpOp.lfo.connect(this.arpOp.panner.pan);\n    this.arpOp.oscGain.connect(this.arpOp.panner);\n    this.arpOp.panner.connect(this.gain);\n    this.arpOp.oscGain.gain.value = 0.1;\n    this.arpOp.lfo.frequency.value = 0.1;\n\n    // Operators is empty array (for now)\n    this.operators = [];\n\n    for (let i = 0; i < NUM_OSCS; i++) {\n      const op: Operator = {\n        osc: this.context.createOscillator(),\n        oscGain: this.context.createGain(),\n        lfo: this.context.createOscillator(),\n        panner: this.context.createStereoPanner(),\n      };\n      op.osc.start();\n      op.lfo.start();\n      op.osc.connect(op.oscGain);\n      op.lfo.connect(op.panner.pan);\n      op.oscGain.connect(op.panner);\n      op.panner.connect(this.gain);\n      op.oscGain.gain.value = 1.0;\n      op.lfo.frequency.value = i + 1;\n      this.operators.push(op);\n    }\n\n    // No interval\n    this.interval = -1;\n\n    // Setup chain\n    this.chain = new MarkovChain(\n      [\n        {\n          current: \"C-M7\",\n          next: \"F-M7\",\n        },\n        {\n          current: \"C-M7\",\n          next: \"F-M7\",\n        },\n        {\n          current: \"F-M7\",\n          next: \"C-M7\",\n        },\n        {\n          current: \"F-M7\",\n          next: \"E-m7\",\n        },\n        {\n          current: \"E-m7\",\n          next: \"D-M7\",\n        },\n        {\n          current: \"D-M7\",\n          next: \"F-M7\",\n        },\n        {\n          current: \"D-M7\",\n          next: \"C-M7\",\n        },\n      ],\n      \"C-M7\"\n    );\n\n    // Step\n    this.step = 0;\n  }\n\n  public start(): void {\n    if (this.interval !== -1) {\n      window.clearInterval(this.interval);\n      this.interval = -1;\n    }\n    this.interval = window.setInterval(this.evolve.bind(this), STEP_TIME);\n    this.evolve();\n  }\n\n  public evolve(): void {\n    const chord = this.chain.next();\n\n    // Adjust transpose\n    const notes = getChord(24, chord);\n    const now = this.context.currentTime;\n\n    this.operators.forEach((op, i) => {\n      op.osc.frequency.cancelScheduledValues(0);\n      op.osc.frequency.setValueAtTime(op.osc.frequency.value, now);\n      // Try other interpolation\n      op.osc.frequency.linearRampToValueAtTime(\n        mtof(notes[i] ?? 0),\n        now + STEP_TIME / 11000.0\n      );\n    });\n\n    // Arp op\n    this.arpOp.osc.frequency.cancelScheduledValues(0);\n    this.step += 1;\n\n    for (let i = 0; i < SEQ_LENGTH; i++) {\n      let nextNote = notes[Math.floor(Math.random() * notes.length)] ?? 0;\n      // Resolve on root\n      if (this.step % SEQ_LENGTH === 0) {\n        nextNote = notes[0] ?? 0;\n      }\n      console.log(nextNote);\n      const freq = mtof(nextNote + 24);\n      this.arpOp.osc.frequency.setValueAtTime(\n        freq,\n        now + (STEP_TIME / (1000.0 * SEQ_LENGTH)) * i\n      );\n    }\n\n    console.log(chord, notes, this.step % SEQ_LENGTH);\n  }\n\n  public getAnalyser(): AnalyserNode {\n    return this.analyser;\n  }\n\n  private async getImpulseBuffer(impulseUrl: string): Promise<void> {\n    const buffer = await fetch(impulseUrl)\n      .then((response) => response.arrayBuffer())\n      .then((arrayBuffer) => this.context.decodeAudioData(arrayBuffer));\n\n    this.convolver.buffer = buffer;\n  }\n}\n","import { Button, Card } from \"@material-ui/core\";\nimport { RouteComponentProps } from \"@reach/router\";\nimport React from \"react\";\n\nimport { LivingSynth } from \"../components/LivingSynth\";\nimport { Oscilloscope } from \"../components/Oscilloscope\";\n\nexport const GuidedMusic: React.FC<RouteComponentProps> = () => {\n  const [fmSynth, setFmSynth] = React.useState<LivingSynth | null>(null);\n\n  const startSynth = () => {\n    if (!fmSynth) {\n      const synth = new LivingSynth();\n      synth.start();\n      setFmSynth(synth);\n      return;\n    }\n\n    // Set phase ratio\n    fmSynth.start();\n  };\n\n  return (\n    <Card>\n      <Button onClick={startSynth}>{fmSynth ? \"Restart\" : \"Start\"}</Button>\n      <Oscilloscope analyser={fmSynth?.getAnalyser()} />\n    </Card>\n  );\n};\n","import React from \"react\";\nimport { Router } from \"@reach/router\";\nimport { Box, Container, makeStyles } from \"@material-ui/core\";\n\nimport { ConnectForm } from \"./ConnectForm\";\nimport { Dashboard } from \"./Dashboard\";\nimport { AppDrawer } from \"./AppDrawer\";\nimport { AppTopBar } from \"./AppTopBar\";\n\nimport { OscBloom } from \"./modules/OscBloom\";\nimport { OscAccelerometer } from \"./modules/OscAccelerometer\";\nimport { FmAccelerometer } from \"./modules/FmAccelerometer\";\nimport { FmSynthController } from \"./modules/FmSynthController\";\nimport { Harmonicity } from \"./modules/Harmonicity\";\nimport { WaveformDraw } from \"./modules/WaveformDraw\";\nimport { GuidedMusic } from \"./modules/GuidedMusic\";\n\nexport type WsArgs = {\n  address: string;\n  args: (number | string)[];\n};\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    flexGrow: 1,\n  },\n}));\n\nconst App: React.FC = () => {\n  const [client, setClient] = React.useState<WebSocket | null>(null);\n  const [loading, setLoading] = React.useState(false);\n  const [error, setError] = React.useState(\"\");\n  const [drawerOpen, setDrawerOpen] = React.useState(false);\n  const [connectOpen, setConnectOpen] = React.useState(false);\n\n  const classes = useStyles();\n\n  const toggleDrawer = () => {\n    setDrawerOpen((open) => !open);\n  };\n\n  const handleDisconnect = () => {\n    if (client) {\n      client.close();\n    }\n    setClient(null);\n  };\n\n  const connectWebsocket = (url: string) => {\n    setLoading(true);\n    setError(\"\");\n\n    if (!/^wss:[\\w]*\\/\\/./u.exec(url)) {\n      setError(\"Invalid wss string\");\n      setLoading(false);\n      return;\n    }\n\n    const ws = new WebSocket(url);\n\n    ws.onopen = (connection) => {\n      console.log(\"WebSocket Client Connected\", connection);\n      setLoading(false);\n      setClient(ws);\n      setConnectOpen(false);\n      window.localStorage.setItem(\"wssurl\", url);\n    };\n\n    ws.onerror = (error) => {\n      console.log(\"Connection Error: \", error);\n      setLoading(false);\n      setError(\"Connection failed\");\n    };\n\n    ws.onclose = () => {\n      console.log(\"Connection Closed\");\n      handleDisconnect();\n    };\n\n    ws.onmessage = (message) => {\n      if (message.type === \"utf8\") {\n        console.log(\"Received: '\" + message.data + \"'\");\n      }\n    };\n  };\n\n  const playNote = (args: WsArgs) => {\n    if (client) {\n      console.log(\"Playing note \", args);\n      client.send(JSON.stringify(args));\n    }\n  };\n\n  return (\n    <div className={classes.root} style={{ userSelect: \"none\" }}>\n      <AppTopBar\n        onConnect={() => setConnectOpen(true)}\n        onDisconnect={handleDisconnect}\n        toggleDrawer={toggleDrawer}\n        url={client?.url}\n      />\n      <AppDrawer open={drawerOpen} toggle={toggleDrawer} />\n      <ConnectForm\n        loading={loading}\n        onSubmit={connectWebsocket}\n        open={connectOpen}\n        error={error}\n        onClose={() => setConnectOpen(false)}\n      />\n      <Container maxWidth=\"md\">\n        <Box maxWidth=\"md\" mt={4}>\n          <Router basepath=\"/osc-controller\">\n            <Dashboard path=\"/\" />\n            <OscBloom path=\"/osc-bloom\" onTransmit={playNote} />\n            <OscAccelerometer path=\"/osc-accelerometer\" onTransmit={playNote} />\n            <FmAccelerometer path=\"/fm-synth-accelerometer\" />\n            <FmSynthController path=\"/fm-synth-controller\" />\n            <Harmonicity path=\"/harmonicity\" />\n            <WaveformDraw path=\"/waveform\" />\n            <GuidedMusic path=\"/guided-music\" />\n          </Router>\n        </Box>\n      </Container>\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { CssBaseline } from \"@material-ui/core\";\n\nimport \"fontsource-roboto\";\nimport \"./libs/fulltilt\";\n\nimport App from \"./App\";\n\nwindow.AudioContext = window.AudioContext || (window as any).webkitAudioContext;\n\nReactDOM.render(\n  <React.StrictMode>\n    <CssBaseline />\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}